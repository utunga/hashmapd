(function(){function Gb(t,q){if(typeof this[t]!=="function"&&typeof this[t]!=="object")this[t]=typeof this[q]==="function"?this[q]:function(z){if(z instanceof Array)return z;else if(typeof z==="number"){var A=[];A.length=z;return A}}}function nb(t){if(t.constructor===String){for(var q=0,z=0;z<t.length;++z)q=q*31+t.charCodeAt(z)&4294967295;return q}else if(typeof t!=="object")return t&4294967295;else if(t.hashCode instanceof Function)return t.hashCode();else{if(t.$id===v)t.$id=Math.floor(Math.random()*
65536)-32768<<16|Math.floor(Math.random()*65536);return t.$id}}function ab(t,q){return t===null||q===null?t===null&&q===null:t.constructor===String?t===q:typeof t!=="object"?t===q:t.equals instanceof Function?t.equals(q):t===q}function Sc(){}var v,lc=function(t){var q=new XMLHttpRequest;q.open("GET",t,false);q.overrideMimeType&&q.overrideMimeType("text/plain");q.setRequestHeader("If-Modified-Since","Fri, 01 Jan 1960 00:00:00 GMT");q.send(null);if(q.status!==200&&q.status!==0)throw"XMLHttpRequest failed, status code "+
q.status;return q.responseText},Hb="document"in this&&!("fake"in this.document);(function(){var t=/t/g;if(!("t".replace(t,"")!==null&&t.exec("t"))){var q=String.prototype.replace;String.prototype.replace=function(z){var A=q.apply(this,arguments);if(z instanceof RegExp&&z.global)z.lastIndex=0;return A}}})();(function(){var t=/t/g;if(!("t".match(t)!==null&&t.exec("t"))){var q=String.prototype.match;String.prototype.match=function(z){var A=q.apply(this,arguments);if(z instanceof RegExp&&z.global)z.lastIndex=
0;return A}}})();(function(){try{if(!("createImageData"in CanvasRenderingContext2D.prototype))CanvasRenderingContext2D.prototype.createImageData=function(q,z){return new ImageData(q,z)}}catch(t){}})();var h={X:0,Y:1,Z:2,R:3,G:4,B:5,A:6,U:7,V:8,NX:9,NY:10,NZ:11,EDGE:12,SR:13,SG:14,SB:15,SA:16,SW:17,TX:18,TY:19,TZ:20,VX:21,VY:22,VZ:23,VW:24,AR:25,AG:26,AB:27,DR:3,DG:4,DB:5,DA:6,SPR:28,SPG:29,SPB:30,SHINE:31,ER:32,EG:33,EB:34,BEEN_LIT:35,VERTEX_FIELD_COUNT:36,P2D:1,JAVA2D:1,WEBGL:2,P3D:2,OPENGL:2,PDF:0,
DXF:0,OTHER:0,WINDOWS:1,MAXOSX:2,LINUX:3,EPSILON:1.0E-4,MAX_FLOAT:3.4028235E38,MIN_FLOAT:-3.4028235E38,MAX_INT:2147483647,MIN_INT:-2147483648,PI:Math.PI,TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,THIRD_PI:Math.PI/3,QUARTER_PI:Math.PI/4,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,WHITESPACE:" \t\n\r\u000c\u00a0",RGB:1,ARGB:2,HSB:3,ALPHA:4,CMYK:5,TIFF:0,TARGA:1,JPEG:2,GIF:3,BLUR:11,GRAY:12,INVERT:13,OPAQUE:14,POSTERIZE:15,THRESHOLD:16,ERODE:17,DILATE:18,REPLACE:0,BLEND:1,ADD:2,SUBTRACT:4,LIGHTEST:8,DARKEST:16,
DIFFERENCE:32,EXCLUSION:64,MULTIPLY:128,SCREEN:256,OVERLAY:512,HARD_LIGHT:1024,SOFT_LIGHT:2048,DODGE:4096,BURN:8192,ALPHA_MASK:4278190080,RED_MASK:16711680,GREEN_MASK:65280,BLUE_MASK:255,CUSTOM:0,ORTHOGRAPHIC:2,PERSPECTIVE:3,POINT:2,POINTS:2,LINE:4,LINES:4,TRIANGLE:8,TRIANGLES:9,TRIANGLE_STRIP:10,TRIANGLE_FAN:11,QUAD:16,QUADS:16,QUAD_STRIP:17,POLYGON:20,PATH:21,RECT:30,ELLIPSE:31,ARC:32,SPHERE:40,BOX:41,GROUP:0,PRIMITIVE:1,GEOMETRY:3,VERTEX:0,BEZIER_VERTEX:1,CURVE_VERTEX:2,BREAK:3,CLOSESHAPE:4,OPEN:1,
CLOSE:2,CORNER:0,CORNERS:1,RADIUS:2,CENTER_RADIUS:2,CENTER:3,DIAMETER:3,CENTER_DIAMETER:3,BASELINE:0,TOP:101,BOTTOM:102,NORMAL:1,NORMALIZED:1,IMAGE:2,MODEL:4,SHAPE:5,SQUARE:"butt",ROUND:"round",PROJECT:"square",MITER:"miter",BEVEL:"bevel",AMBIENT:0,DIRECTIONAL:1,SPOT:3,BACKSPACE:8,TAB:9,ENTER:10,RETURN:13,ESC:27,DELETE:127,CODED:65535,SHIFT:16,CONTROL:17,ALT:18,CAPSLK:20,PGUP:33,PGDN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INS:45,DEL:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,
F9:120,F10:121,F11:122,F12:123,NUMLK:144,ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",NOCURSOR:"url('data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=='), auto",DISABLE_OPENGL_2X_SMOOTH:1,ENABLE_OPENGL_2X_SMOOTH:-1,ENABLE_OPENGL_4X_SMOOTH:2,ENABLE_NATIVE_FONTS:3,DISABLE_DEPTH_TEST:4,ENABLE_DEPTH_TEST:-4,ENABLE_DEPTH_SORT:5,DISABLE_DEPTH_SORT:-5,DISABLE_OPENGL_ERROR_REPORT:6,ENABLE_OPENGL_ERROR_REPORT:-6,ENABLE_ACCURATE_TEXTURES:7,
DISABLE_ACCURATE_TEXTURES:-7,HINT_COUNT:10,SINCOS_LENGTH:parseInt(720,10),PRECISIONB:15,PRECISIONF:32768,PREC_MAXVAL:32767,PREC_ALPHA_SHIFT:9,PREC_RED_SHIFT:1,NORMAL_MODE_AUTO:0,NORMAL_MODE_SHAPE:1,NORMAL_MODE_VERTEX:2,MAX_LIGHTS:8};Gb("Float32Array","WebGLFloatArray");Gb("Int32Array","WebGLIntArray");Gb("Uint16Array","WebGLUnsignedShortArray");Gb("Uint8Array","WebGLUnsignedByteArray");var mc=function(){function t(z){var A=0;this.hasNext=function(){return A<z.length};this.next=function(){return z[A++]};
this.remove=function(){z.splice(A,1)}}function q(){var z;if(arguments.length===0)z=[];else if(arguments.length>0&&typeof arguments[0]!=="number")z=arguments[0];else{z=[];z.length=0|arguments[0]}this.get=function(A){return z[A]};this.contains=function(A){for(var I=0,u=z.length;I<u;++I)if(ab(A,z[I]))return true;return false};this.add=function(){if(arguments.length===1)z.push(arguments[0]);else if(arguments.length===2){var A=arguments[0];if(typeof A==="number")if(A>=0&&A<=z.length)z.splice(A,0,arguments[1]);
else throw A+" is not a valid index";else throw typeof A+" is not a number";}else throw"Please use the proper number of parameters.";};this.set=function(){if(arguments.length===2){var A=arguments[0];if(typeof A==="number")if(A>=0&&A<z.length)z.splice(A,1,arguments[1]);else throw A+" is not a valid index.";else throw typeof A+" is not a number";}else throw"Please use the proper number of parameters.";};this.size=function(){return z.length};this.clear=function(){z.length=0};this.remove=function(A){return z.splice(A,
1)[0]};this.isEmpty=function(){return!z.length};this.clone=function(){return new q(z.slice(0))};this.toArray=function(){return z.slice(0)};this.iterator=function(){return new t(z)}}return q}(),Bd=function(){function t(){function q(){if(!(X<=P*y.length)){for(var B=[],F=0;F<y.length;++F)if(y[F]!==v)B=B.concat(y[F]);y=[];y.length*=2;for(F=0;F<B.length;++F){var G=nb(B[F].key)%y.length,H=y[G];if(H===v)y[G]=H=[];H.push(B[F])}}}function z(B,F){function G(){for(;!Y;){++S;if(H>=y.length)Y=true;else if(y[H]===
v||S>=y[H].length){S=-1;++H}else break}}var H=0,S=-1,Y=false;this.hasNext=function(){return!Y};this.next=function(){var ra=B(y[H][S]);G();return ra};this.remove=function(){F(this.next());--S};G()}function A(B,F,G){this.clear=function(){Z.clear()};this.contains=function(H){return F(H)};this.containsAll=function(H){for(H=H.iterator();H.hasNext();)if(!this.contains(H.next()))return false;return true};this.isEmpty=function(){return Z.isEmpty()};this.iterator=function(){return new z(B,G)};this.remove=
function(H){if(this.contains(H)){G(H);return true}return false};this.removeAll=function(H){for(H=H.iterator();H.hasNext();){var S=H.next();this.contains(S)&&G(S)}return true};this.retainAll=function(H){for(var S=this.iterator(),Y=[];S.hasNext();){var ra=S.next();H.contains(ra)||Y.push(ra)}for(H=0;H<Y.length;++H)G(Y[H]);return Y.length>0};this.size=function(){return Z.size()};this.toArray=function(){for(var H=[],S=this.iterator();S.hasNext();)H.push(S.next());return H}}function I(B){this._isIn=function(F){return F===
Z&&B.removed===v};this.equals=function(F){return ab(B.key,F.getKey())};this.getKey=function(){return B.key};this.getValue=function(){return B.value};this.hashCode=function(){return nb(B.key)};this.setValue=function(F){var G=B.value;B.value=F;return G}}if(arguments.length===1&&arguments[0].constructor===t)return arguments[0].clone();var u=arguments.length>0?arguments[0]:16,P=arguments.length>1?arguments[1]:0.75,y=[];y.length=u;var X=0,Z=this;this.clear=function(){X=0;y=[];y.length=u};this.clone=function(){var B=
new t;B.putAll(this);return B};this.containsKey=function(B){var F=nb(B)%y.length;F=y[F];if(F===v)return false;for(var G=0;G<F.length;++G)if(ab(F[G].key,B))return true;return false};this.containsValue=function(B){for(var F=0;F<y.length;++F){var G=y[F];if(G!==v)for(var H=0;H<G.length;++H)if(ab(G[H].value,B))return true}return false};this.entrySet=function(){return new A(function(B){return new I(B)},function(B){return B.constructor===I&&B._isIn(Z)},function(B){return Z.remove(B.getKey())})};this.get=
function(B){var F=nb(B)%y.length;F=y[F];if(F===v)return null;for(var G=0;G<F.length;++G)if(ab(F[G].key,B))return F[G].value;return null};this.isEmpty=function(){return X===0};this.keySet=function(){return new A(function(B){return B.key},function(B){return Z.containsKey(B)},function(B){return Z.remove(B)})};this.put=function(B,F){var G=nb(B)%y.length,H=y[G];if(H===v){++X;y[G]=[{key:B,value:F}];q();return null}for(G=0;G<H.length;++G)if(ab(H[G].key,B)){var S=H[G].value;H[G].value=F;return S}++X;H.push({key:B,
value:F});q();return null};this.putAll=function(B){for(B=B.entrySet().iterator();B.hasNext();){var F=B.next();this.put(F.getKey(),F.getValue())}};this.remove=function(B){var F=nb(B)%y.length,G=y[F];if(G===v)return null;for(var H=0;H<G.length;++H)if(ab(G[H].key,B)){--X;B=G[H].value;G[H].removed=true;if(G.length>1)G.splice(H,1);else y[F]=v;return B}return null};this.size=function(){return X};this.values=function(){for(var B=[],F=this.entrySet().iterator();F.hasNext();){var G=F.next();B.push(G.getValue())}return B}}
return t}(),sa=function(){function t(u,P,y){this.x=u||0;this.y=P||0;this.z=y||0}function q(u){return function(P,y){var X=P.get();X[u](y);return X}}function z(u){return function(P,y){return P[u](y)}}var A="dist dot cross".split(" "),I=A.length;t.angleBetween=function(u,P){return Math.acos(u.dot(P)/(u.mag()*P.mag()))};for(t.prototype={set:function(u,P,y){if(arguments.length===1)this.set(u.x||u[0],u.y||u[1],u.z||u[2]);else{this.x=u;this.y=P;this.z=y}},get:function(){return new t(this.x,this.y,this.z)},
mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},add:function(u,P,y){if(arguments.length===3){this.x+=u;this.y+=P;this.z+=y}else if(arguments.length===1){this.x+=u.x;this.y+=u.y;this.z+=u.z}},sub:function(u,P,y){if(arguments.length===3){this.x-=u;this.y-=P;this.z-=y}else if(arguments.length===1){this.x-=u.x;this.y-=u.y;this.z-=u.z}},mult:function(u){if(typeof u==="number"){this.x*=u;this.y*=u;this.z*=u}else if(typeof u==="object"){this.x*=u.x;this.y*=u.y;this.z*=u.z}},div:function(u){if(typeof u===
"number"){this.x/=u;this.y/=u;this.z/=u}else if(typeof u==="object"){this.x/=u.x;this.y/=u.y;this.z/=u.z}},dist:function(u){var P=this.x-u.x,y=this.y-u.y;u=this.z-u.z;return Math.sqrt(P*P+y*y+u*u)},dot:function(u,P,y){if(arguments.length===3)return this.x*u+this.y*P+this.z*y;else if(arguments.length===1)return this.x*u.x+this.y*u.y+this.z*u.z},cross:function(u){return new t(this.y*u.z-u.y*this.z,this.z*u.x-u.z*this.x,this.x*u.y-u.x*this.y)},normalize:function(){var u=this.mag();u>0&&this.div(u)},
limit:function(u){if(this.mag()>u){this.normalize();this.mult(u)}},heading2D:function(){return-Math.atan2(-this.y,this.x)},toString:function(){return"["+this.x+", "+this.y+", "+this.z+"]"},array:function(){return[this.x,this.y,this.z]}};I--;)t[A[I]]=z(A[I]);for(I in t.prototype)if(t.prototype.hasOwnProperty(I)&&!t.hasOwnProperty(I))t[I]=q(I);return t}();Sc.prototype=h;var bb=new Sc;bb.ArrayList=mc;bb.HashMap=Bd;bb.PVector=sa;bb.ObjectIterator=function(t){if(t.iterator instanceof Function)return t.iterator();
else if(t instanceof Array){var q=-1;this.hasNext=function(){return++q<t.length};this.next=function(){return t[q]}}else throw"Unable to iterate: "+t;};var ha=this.Processing=function t(q,z){function A(a,b,c,e){var f=Ea.locations[a];if(f===v){f=i.getUniformLocation(b,c);Ea.locations[a]=f}if(f!==-1)if(e.length===4)i.uniform4fv(f,e);else if(e.length===3)i.uniform3fv(f,e);else e.length===2?i.uniform2fv(f,e):i.uniform1f(f,e)}function I(a,b,c,e){var f=Ea.locations[a];if(f===v){f=i.getUniformLocation(b,
c);Ea.locations[a]=f}if(f!==-1)if(e.length===4)i.uniform4iv(f,e);else if(e.length===3)i.uniform3iv(f,e);else e.length===2?i.uniform2iv(f,e):i.uniform1i(f,e)}function u(a,b,c,e,f){var g=Ea.attributes[a];if(g===v){g=i.getAttribLocation(b,c);Ea.attributes[a]=g}if(g!==-1){i.bindBuffer(i.ARRAY_BUFFER,f);i.vertexAttribPointer(g,e,i.FLOAT,false,0,0);i.enableVertexAttribArray(g)}}function P(a,b,c){var e=Ea.attributes[a];if(e===v){e=i.getAttribLocation(b,c);Ea.attributes[a]=e}e!==-1&&i.disableVertexAttribArray(e)}
function y(a,b,c,e,f){var g=Ea.locations[a];if(g===v){g=i.getUniformLocation(b,c);Ea.locations[a]=g}if(g!==-1)if(f.length===16)i.uniformMatrix4fv(g,e,f);else f.length===9?i.uniformMatrix3fv(g,e,f):i.uniformMatrix2fv(g,e,f)}function X(a,b,c,e){if(Fa===h.HSB){c=d.color.toRGB(a,b,c);a=c[0];b=c[1];c=c[2]}else{a=Math.round(255*(a/la));b=Math.round(255*(b/za));c=Math.round(255*(c/ta))}e=Math.round(255*(e/ua));return(e>255?255:e)<<24&h.ALPHA_MASK|(a>255?255:a)<<16&h.RED_MASK|(b>255?255:b)<<8&h.GREEN_MASK|
(c>255?255:c)&h.BLUE_MASK}function Z(){i.restore();Ha=Ib=true}function B(a,b){var c=1;c<<=b-1;for(var e="",f=0;f<b;f++){e+=c&a?"1":"0";c>>>=1}return e}function F(a,b,c,e,f,g){b=a<0?c:b;c=f===v||f<0?0:f;a=Math.abs(a);if(f===0){c=1;for(a*=10;Math.abs(Math.round(a)-a)>1.0E-6&&c<7;){++c;a*=10}}else if(c!==0)a*=Math.pow(10,c);f=a*2;if(Math.floor(a)!==a)if(Math.floor(f)===f){f=Math.floor(a);a=f+f%2}else a=Math.round(a);f="";for(e+=c;e>0||a>0;){e--;f=""+a%10+f;a=Math.floor(a/10)}if(g!==v)for(e=f.length-
3-c;e>0;){f=f.substring(0,e)+g+f.substring(e);e-=3}return c>0?b+f.substring(0,f.length-c)+"."+f.substring(f.length-c,f.length):b+f}function G(a,b,c,e,f,g){if(a instanceof Array){for(var k=[],j=0,l=a.length;j<l;j++)k.push(F(a[j],b,c,e,f,g));return k}else return F(a,b,c,e,f,g)}function H(a){a=parseInt("0x"+a,16);if(a>2147483647)a-=4294967296;return a}function S(a){return Array.prototype.slice.call(a,1)}function Y(a){if(typeof a==="number")return a!==0;else if(typeof a==="boolean")return a;else if(typeof a===
"string")return a.toLowerCase()==="true";else if(a instanceof Ia)return a.code===49||a.code===84||a.code===116}function ra(a){if(typeof a==="number")return a;else if(typeof a==="boolean")return a?1:0;else if(typeof a==="string")return parseFloat(a);else if(a instanceof Ia)return a.code}function M(a){if(typeof a==="number")return a&4294967295;else if(typeof a==="boolean")return a?1:0;else if(typeof a==="string")return parseInt(a,10)&4294967295;else if(a instanceof Ia)return a.code}function T(a,b){var c=
a||362436069,e=b||521288629,f=function(){c=36969*(c&65535)+(c>>>16)&4294967295;e=18E3*(e&65535)+(e>>>16)&4294967295;return((c&65535)<<16|e&65535)&4294967295};this.nextDouble=function(){var g=f()/4294967296;return g<0?1+g:g};this.nextInt=f}function ea(a){function b(l,p,o,s){l&=15;var n=l<8?p:o;p=l<4?o:l===12||l===14?p:s;return((l&1)===0?n:-n)+((l&2)===0?p:-p)}function c(l,p,o){p=(l&1)===0?p:o;return(l&2)===0?-p:p}function e(l,p,o){return p+l*(o-p)}a=a!==v?new T(a):T.createRandomized();var f,g,k=new Uint8Array(512);
for(f=0;f<256;++f)k[f]=f;for(f=0;f<256;++f){var j=k[g=a.nextInt()&255];k[g]=k[f];k[f]=j}for(f=0;f<256;++f)k[f+256]=k[f];this.noise3d=function(l,p,o){var s=Math.floor(l)&255,n=Math.floor(p)&255,w=Math.floor(o)&255;l-=Math.floor(l);p-=Math.floor(p);o-=Math.floor(o);var E=(3-2*l)*l*l,C=(3-2*p)*p*p,r=k[s]+n,$=k[r]+w;r=k[r+1]+w;n=k[s+1]+n;s=k[n]+w;w=k[n+1]+w;return e((3-2*o)*o*o,e(C,e(E,b(k[$],l,p,o),b(k[s],l-1,p,o)),e(E,b(k[r],l,p-1,o),b(k[w],l-1,p-1,o))),e(C,e(E,b(k[$+1],l,p,o-1),b(k[s+1],l-1,p,o-1)),
e(E,b(k[r+1],l,p-1,o-1),b(k[w+1],l-1,p-1,o-1))))};this.noise2d=function(l,p){var o=Math.floor(l)&255,s=Math.floor(p)&255;l-=Math.floor(l);p-=Math.floor(p);var n=(3-2*l)*l*l,w=k[o]+s;o=k[o+1]+s;return e((3-2*p)*p*p,e(n,c(k[w],l,p),c(k[o],l-1,p)),e(n,c(k[w+1],l,p-1),c(k[o+1],l-1,p-1)))};this.noise1d=function(l){var p=Math.floor(l)&255;l-=Math.floor(l);return e((3-2*l)*l*l,(k[p]&1)===0?-l:l,(k[p+1]&1)===0?-(l-1):l-1)}}function W(){if(V){if(Ha){i.fillStyle=d.color.toString(Xa);Ha=false}i.fill()}}function ma(){if(Q){if(Ib){i.strokeStyle=
d.color.toString(na);Ib=false}i.stroke()}}function Ya(a,b,c){c=0|c*((b&h.ALPHA_MASK)>>>24);return Math.min(((a&h.ALPHA_MASK)>>>24)+c,255)<<24|d.mix(a&h.RED_MASK,b&h.RED_MASK,c)&h.RED_MASK|d.mix(a&h.GREEN_MASK,b&h.GREEN_MASK,c)&h.GREEN_MASK|d.mix(a&h.BLUE_MASK,b&h.BLUE_MASK,c)}function ka(a,b,c){var e=Tc.shift();if(e===v){e={};e.canvas=document.createElement("canvas");e.context=e.canvas.getContext("2d")}Tc.push(e);var f=e.canvas,g=e.context;b=b||a.width;c=c||a.height;f.width=b;f.height=c;if(a)if("data"in
a)g.putImageData(a,0,0);else{g.clearRect(0,0,b,c);g.drawImage(a,0,0,b,c)}else g.clearRect(0,0,b,c);return e}function Ja(){if(yb){i=Uc;yb=false;d.updatePixels()}}function cb(){function a(e,f){e[f]=function(){Ja();i[f].apply(i,arguments)}}function b(e,f){d.defineProperty(e,f,{get:function(){Ja();return i[f]},set:function(g){Ja();i[f]=g}})}for(var c in i)typeof i[c]==="function"?a(this,c):b(this,c)}function Ra(a){this.name="sans-serif";if(a!==v)switch(a){case "sans-serif":case "serif":case "monospace":case "fantasy":case "cursive":this.name=
a;break;default:this.name='"'+a+'", sans-serif'}this.origName=a}function ob(a,b,c,e){this.canvas=document.createElement("canvas");this.canvas.setAttribute("width",b+"px");this.canvas.setAttribute("height",b+"px");this.ctx=this.canvas.getContext("2d");this.ctx.font=b+"pt "+a;this.ctx.fillStyle="black";this.ctx.fillRect(0,0,b,b);this.ctx.fillStyle="white";this.ctx.fillText(e,0,c);this.imageData=this.ctx.getImageData(0,0,b,b);this.get=function(f,g){return this.imageData.data[g*this.imageData.width*4+
f*4]}}function db(a){return a instanceof String?a:typeof a==="number"?a===(0|a)?a.toString():d.nf(a,0,3):a===null||a===v?"":a.toString()}function pb(a,b,c,e,f){var g=e=0;if(fa.glyph){e=d.glyphTable[fa.name];i.save();i.translate(b,c+N);if(f===h.RIGHT||f===h.CENTER)e.width(a);b=1/e.units_per_em*N;i.scale(b,b);b=0;for(c=a.length;b<c;b++)try{d.glyphLook(e,a[b]).draw()}catch(k){t.debug(k)}Z()}else if(a&&("fillText"in i||"mozDrawText"in i)){if(Ha){i.fillStyle=d.color.toString(Xa);Ha=false}if(f===h.RIGHT||
f===h.CENTER){if("fillText"in i)e=i.measureText(a).width;else if("mozDrawText"in i)e=i.mozMeasureText(a);g=f===h.RIGHT?-e:-e/2}if("fillText"in i)i.fillText(a,b+g,c);else if("mozDrawText"in i){i.save();i.translate(b+g,c);i.mozDrawText(a);Z()}}}function zb(a,b,c,e,f){if(oa===v)oa=document.createElement("canvas");var g=i;i=oa.getContext("2d");i.font=i.mozTextStyle=N+"px "+fa.name;var k=0;if("fillText"in i)k=i.measureText(a).width;else if("mozDrawText"in i)k=i.mozMeasureText(a);oa.width=k;oa.height=N;
i=oa.getContext("2d");i.font=i.mozTextStyle=N+"px "+fa.name;i.textBaseline="top";pb(a,0,0,0,h.LEFT);a=oa.width/oa.height;i=g;i.bindTexture(i.TEXTURE_2D,Vc);qb(oa);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE);g=0;if(f===h.RIGHT)g=-k;else if(f===h.CENTER)g=-k/2;f=new D;k=N*0.5;f.translate(b+g-k/2,c-k,
e);f.scale(-a*k,-k,k);f.translate(-1,-1,-1);f.transpose();b=new D;b.scale(1,-1,1);b.apply(U.array());b.transpose();c=new D;c.set(ia);c.transpose();i.useProgram(J);u("vertex2d",J,"Vertex",3,nc);u("aTextureCoord2d",J,"aTextureCoord",2,oc);I("uSampler2d",J,"uSampler",[0]);I("picktype2d",J,"picktype",1);y("model2d",J,"model",false,f.array());y("view2d",J,"view",false,b.array());y("projection2d",J,"projection",false,c.array());A("color2d",J,"color",xa);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,pc);i.drawElements(i.TRIANGLES,
6,i.UNSIGNED_SHORT,0)}function ga(a,b,c,e){var f=d.use3DContext?zb:pb,g;if(a.indexOf("\n")<0){a=[a];g=1}else{a=a.split(/\r?\n/g);g=a.length}var k;k=rb===h.TOP?(1-Jb)*eb:rb===h.CENTER?(1-Jb-g/2)*eb:rb===h.BOTTOM?(1-Jb-g)*eb:0;for(var j=0;j<g;++j){f(a[j],b,c+k,e,sb);k+=eb}}function Ka(a,b,c,e,f,g){if(!(a.length===0||e===0||f===0))if(!(N>f)){var k=-1,j=0,l=0,p=0;i.font=N+"px "+fa.name;for(var o=[],s=0,n=a.length;s<n;s++){var w=a[s],E=0,C=w===" ";if("fillText"in i)E=i.measureText(w).width;else if("mozDrawText"in
i)E=i.mozMeasureText(w);if(w!=="\n"&&l+E<e){if(C)k=s;l+=E}else{if(k+1===j)if(s>0)k=s;else return;if(w==="\n"){o.push({text:a.substring(j,s),width:l,offset:p});j=s+1}else{o.push({text:a.substring(j,k),width:l,offset:p});j=k+1}p+=N;l=0;s=j-1}}j<n&&o.push({text:a.substring(j),width:l,offset:p});a=d.use3DContext?zb:pb;k=0;if(sb===h.CENTER)k=e/2;else if(sb===h.RIGHT)k=e;e=(1-Jb)*N;j=0;if(rb===h.BOTTOM)j=f-o.length*eb;else if(rb===h.CENTER)j=(f-o.length*eb)/2;l=0;for(p=o.length;l<p;l++){s=o[l];if(!(s.offset+
j<0)){if(s.offset+j+N>f)break;a(s.text,b+k,c+s.offset+e+j,g,sb)}}}}function Za(a,b){function c(g){d.defineProperty(a,g,{get:function(){return b[g]},set:function(k){b[g]=k},enumerable:true})}var e=[],f;for(f in b)if(!(f in a))if(typeof b[f]==="function")a[f]=b[f];else f!=="$upcast"&&e.push(f);for(;e.length>0;)c(e.shift())}function ca(a,b,c){a.addEventListener?a.addEventListener(b,c,false):a.attachEvent("on"+b,c);Sa.push([a,b,c])}function Cd(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,
false);else a.detachEvent&&a.detachEvent("on"+b,c)}function Wc(a){var b=a,c=0,e=0;d.pmouseX=d.mouseX;d.pmouseY=d.mouseY;if(b.offsetParent){do{c+=b.offsetLeft;e+=b.offsetTop}while(b=b.offsetParent)}b=a;do{c-=b.scrollLeft||0;e-=b.scrollTop||0}while(b=b.parentNode);c+=Xc;e+=Yc;c+=Zc;e+=$c;c+=window.pageXOffset;e+=window.pageYOffset;return{X:c,Y:e}}function Kb(a,b){var c=Wc(a,b);d.mouseX=b.pageX-c.X;d.mouseY=b.pageY-c.Y}function Lb(a){var b=Wc(a.changedTouches[0].target,a.changedTouches[0]),c;for(c=0;c<
a.touches.length;c++){var e=a.touches[c];e.offsetX=e.pageX-b.X;e.offsetY=e.pageY-b.Y}for(c=0;c<a.targetTouches.length;c++){e=a.targetTouches[c];e.offsetX=e.pageX-b.X;e.offsetY=e.pageY-b.Y}for(c=0;c<a.changedTouches.length;c++){e=a.changedTouches[c];e.offsetX=e.pageX-b.X;e.offsetY=e.pageY-b.Y}return a}function qc(a){if(Dd.indexOf(a)>=0){d.keyCode=a;if(a===d.INS)d.keyCode=155;return h.CODED}switch(a){case 13:return 10;case 46:return 127}return a}function Mb(a,b){if(a>=65&&a<=90){if(!b)return a+32}else if(a>=
48&&a<=57){if(b)switch(a){case 49:return 33;case 50:return 64;case 51:return 35;case 52:return 36;case 53:return 37;case 54:return 94;case 55:return 38;case 56:return 42;case 57:return 40;case 48:return 41}}else if(b)switch(a){case 107:return 43;case 219:return 123;case 221:return 125;case 222:return 34}else switch(a){case 188:return 44;case 109:return 45;case 190:return 46;case 191:return 47;case 192:return 96;case 219:return 91;case 220:return 92;case 221:return 93;case 222:return 39}return a}function ad(){var a;
d.keyPressed();a=d.keyCode;d.keyCode=0;d.keyTyped();d.keyCode=a}function Nb(){var a;d.keyPressed();a=d.keyCode;d.keyCode=0;d.keyTyped();d.keyCode=a}function rc(a,b){d.key=qc(a.keyCode,a.shiftKey);if(b==="keypress")if(a.keyCode===a.charCode)d.keyCode=-1;switch(d.keyCode){case 19:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 45:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:case 123:case 145:case 155:case 224:case 225:case 226:case 227:if(b===
"keydown")if(Ob){d.keyReleased();d.keyPressed()}else{d.keyPressed();Ob=true}else if(b==="keypress")if(Pb)Pb=false;else{d.keyReleased();d.keyPressed()}else if(b==="keyup"){d.keyReleased();if(Pb===false)Pb=true;if(Ob)Ob=false}break;case 16:case 17:case 18:case 20:case 144:if(b==="keydown")d.keyPressed();else b==="keyup"&&d.keyReleased();break;case 46:case 13:if(b==="keydown")if(Qb===true){Qb=false;ad()}else Nb();else if(b==="keypress")if(Rb===true)Rb=false;else Nb();else if(b==="keyup"){d.keyCode=a.keyCode;
d.keyReleased();if(Qb===false)Qb=true;if(Rb===false)Rb=true}break;default:if(d.keyCode===-1)d.keyCode=a.keyCode;if(a.keyCode===0){d.key=Mb(a.charCode,a.shiftKey);if(b==="keypress")if(tb===true)tb=false;else Nb();else if(b==="keyup"){d.keyCode=a.keyCode;d.keyReleased();if(tb===false)tb=true}}else{d.key=Mb(a.keyCode,a.shiftKey);if(b==="keydown")if(Sb===true){Sb=false;ad()}else Nb();else if(b==="keyup"){d.keyCode=a.keyCode;d.keyReleased();if(tb===false)tb=true;if(Sb===false)Sb=true}}}}if(!(this instanceof
t))throw"called Processing constructor as if it were a function: missing 'new'.";var d=this;d.externals={canvas:q,context:v,sketch:v};d.name="Processing.js Instance";d.use3DContext=false;d.focused=false;d.breakShape=false;d.glyphTable={};d.pmouseX=0;d.pmouseY=0;d.mouseX=0;d.mouseY=0;d.mouseButton=0;d.mouseScroll=0;d.mouseClicked=v;d.mouseDragged=v;d.mouseMoved=v;d.mousePressed=v;d.mouseReleased=v;d.mouseScrolled=v;d.mouseOver=v;d.mouseOut=v;d.touchStart=v;d.touchEnd=v;d.touchMove=v;d.touchCancel=
v;d.key=v;d.keyCode=v;d.keyPressed=function(){};d.keyReleased=function(){};d.keyTyped=function(){};d.draw=v;d.setup=v;d.__mousePressed=false;d.__keyPressed=false;d.__frameRate=0;d.frameCount=0;d.width=q.width-0;d.height=q.height-0;d.defineProperty=function(a,b,c){if("defineProperty"in Object)Object.defineProperty(a,b,c);else{c.hasOwnProperty("get")&&a.__defineGetter__(b,c.get);c.hasOwnProperty("set")&&a.__defineSetter__(b,c.set)}};var i,aa,V=true,xa=[1,1,1,1],Xa=4294967295,Ha=true,Q=true,va=[0.8,
0.8,0.8,1],na=4294835709,Ib=true,pa=1,Tb=false,fb=true,Ub=0,gb=h.CORNER,$a=h.CENTER,sc=0,tc=0,uc=0,Vb=h.NORMAL_MODE_AUTO,bd=60,Ed=q.style.cursor,cd=1,da=h.POLYGON,vc=0,wc=20,dd=false,xc=20,ua=255,la=255,za=255,ta=255,Fa=h.RGB,hb=null,N=12,fa={name:'"Arial", sans-serif',origName:"Arial"},eb=14,ed=(new Date).getTime(),yc=ed,Wb=0,oa,Ab,Xb,ub,vb,zc,Ac,Pb=true,Qb=true,Rb=true,tb=true,Sb=true,Ob=false,Ea={attributes:{},locations:{}},x,J,Ga,Bc,Cc,Dc,Yb,Ec,Bb,Fc,fd,Gc,gd,Zb,hd,id,Vc,$b={width:0,height:0},
jd=h.IMAGE,ya=false,nc,oc,pc,sb=h.LEFT,rb=h.BASELINE,Jb=0.2,Hc=h.MODEL,Uc,Ic=null,yb=false,kd,ld=1E3,Dd=[h.SHIFT,h.CONTROL,h.ALT,h.CAPSLK,h.PGUP,h.PGDN,h.END,h.HOME,h.LEFT,h.UP,h.RIGHT,h.DOWN,h.NUMLK,h.INS,h.F1,h.F2,h.F3,h.F4,h.F5,h.F6,h.F7,h.F8,h.F9,h.F10,h.F11,h.F12],Xc,Yc,Zc,$c;if(document.defaultView&&document.defaultView.getComputedStyle){Xc=parseInt(document.defaultView.getComputedStyle(q,null).paddingLeft,10)||0;Yc=parseInt(document.defaultView.getComputedStyle(q,null).paddingTop,10)||0;Zc=
parseInt(document.defaultView.getComputedStyle(q,null).borderLeftWidth,10)||0;$c=parseInt(document.defaultView.getComputedStyle(q,null).borderTopWidth,10)||0}var K=0,ac=0,ib=0,La=[],Ma=[],Na=[],Jc=new Float32Array(h.SINCOS_LENGTH),Kc=new Float32Array(h.SINCOS_LENGTH),L,jb,Oa,Aa,Ba,U,Cb,bc,Db,ia,cc=false,dc=60*(Math.PI/180),Lc=q.width/2,kb=q.height/2,lb=kb/Math.tan(dc/2),md=lb/10,nd=lb*10,od=q.width/q.height,m=[],wa=[],qa=0,Mc=false,Nc=false,ec=true,Eb=h.CORNER,fc={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",
aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",
darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",
hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",
linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",
palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",
tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},pd=[],qd=new Float32Array([0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,0.5,-0.5,-0.5,0.5,
-0.5,-0.5,0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5]),rd=new Float32Array([0.5,0.5,0.5,0.5,-0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,
-0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5]),Fd=new Float32Array([0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]),Oc=new Float32Array([0,0,0,0,1,0,1,1,0,1,0,0]),Gd=new Float32Array([0,0,-1,0,0,-1,0,0,-1,0,0,-1]),sd=function(a,b,c,e){return{x:a,y:b,w:c,h:e}},gc=sd,Hd=function(a,b,c,e,f){return{x:a,y:b,w:f?
c:c-a,h:f?e:e-b}},Id=function(a,b,c,e){return{x:a-c/2,y:b-e/2,w:c,h:e}},Pc=function(a,b,c){var e=a.createShader(a.VERTEX_SHADER);a.shaderSource(e,b);a.compileShader(e);if(!a.getShaderParameter(e,a.COMPILE_STATUS))throw a.getShaderInfoLog(e);b=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(b,c);a.compileShader(b);if(!a.getShaderParameter(b,a.COMPILE_STATUS))throw a.getShaderInfoLog(b);c=a.createProgram();a.attachShader(c,e);a.attachShader(c,b);a.linkProgram(c);if(!a.getProgramParameter(c,a.LINK_STATUS))throw"Error linking shaders.";
return c},Qc={},Ia=d.Character=function(a){this.code=typeof a==="string"&&a.length===1?a.charCodeAt(0):NaN;return Qc[this.code]===v?Qc[this.code]=this:Qc[this.code]};Ia.prototype.toString=function(){return String.fromCharCode(this.code)};Ia.prototype.valueOf=function(){return this.code};var Ta=d.PShape=function(a){this.family=a||h.GROUP;this.style=this.visible=true;this.children=[];this.nameTable=[];this.params=[];this.name="";this.parent=this.height=this.width=this.close=this.kind=this.matrix=this.image=
null};Ta.prototype={isVisible:function(){return this.visible},setVisible:function(a){this.visible=a},disableStyle:function(){this.style=false;for(var a=0,b=this.children.length;a<b;a++)this.children[a].disableStyle()},enableStyle:function(){this.style=true;for(var a=0,b=this.children.length;a<b;a++)this.children[a].enableStyle()},getFamily:function(){return this.family},getWidth:function(){return this.width},getHeight:function(){return this.height},setName:function(a){this.name=a},getName:function(){return this.name},
draw:function(){if(this.visible){this.pre();this.drawImpl();this.post()}},drawImpl:function(){if(this.family===h.GROUP)this.drawGroup();else if(this.family===h.PRIMITIVE)this.drawPrimitive();else if(this.family===h.GEOMETRY)this.drawGeometry();else this.family===h.PATH&&this.drawPath()},drawPath:function(){var a,b;if(this.vertices.length!==0){d.beginShape();if(this.vertexCodes.length===0)if(this.vertices[0].length===2){a=0;for(b=this.vertices.length;a<b;a++)d.vertex(this.vertices[a][0],this.vertices[a][1])}else{a=
0;for(b=this.vertices.length;a<b;a++)d.vertex(this.vertices[a][0],this.vertices[a][1],this.vertices[a][2])}else{var c=0;if(this.vertices[0].length===2){a=0;for(b=this.vertexCodes.length;a<b;a++)if(this.vertexCodes[a]===h.VERTEX){d.vertex(this.vertices[c][0],this.vertices[c][1]);if(this.vertices[c].moveTo===true)m[m.length-1].moveTo=true;else if(this.vertices[c].moveTo===false)m[m.length-1].moveTo=false;d.breakShape=false;c++}else if(this.vertexCodes[a]===h.BEZIER_VERTEX){d.bezierVertex(this.vertices[c+
0][0],this.vertices[c+0][1],this.vertices[c+1][0],this.vertices[c+1][1],this.vertices[c+2][0],this.vertices[c+2][1]);c+=3}else if(this.vertexCodes[a]===h.CURVE_VERTEX){d.curveVertex(this.vertices[c][0],this.vertices[c][1]);c++}else if(this.vertexCodes[a]===h.BREAK)d.breakShape=true}else{a=0;for(b=this.vertexCodes.length;a<b;a++)if(this.vertexCodes[a]===h.VERTEX){d.vertex(this.vertices[c][0],this.vertices[c][1],this.vertices[c][2]);if(this.vertices[c].moveTo===true)m[m.length-1].moveTo=true;else if(this.vertices[c].moveTo===
false)m[m.length-1].moveTo=false;d.breakShape=false}else if(this.vertexCodes[a]===h.BEZIER_VERTEX){d.bezierVertex(this.vertices[c+0][0],this.vertices[c+0][1],this.vertices[c+0][2],this.vertices[c+1][0],this.vertices[c+1][1],this.vertices[c+1][2],this.vertices[c+2][0],this.vertices[c+2][1],this.vertices[c+2][2]);c+=3}else if(this.vertexCodes[a]===h.CURVE_VERTEX){d.curveVertex(this.vertices[c][0],this.vertices[c][1],this.vertices[c][2]);c++}else if(this.vertexCodes[a]===h.BREAK)d.breakShape=true}}d.endShape(this.close?
h.CLOSE:h.OPEN)}},drawGeometry:function(){var a,b;d.beginShape(this.kind);if(this.style){a=0;for(b=this.vertices.length;a<b;a++)d.vertex(this.vertices[a])}else{a=0;for(b=this.vertices.length;a<b;a++){var c=this.vertices[a];c[2]===0?d.vertex(c[0],c[1]):d.vertex(c[0],c[1],c[2])}}d.endShape()},drawGroup:function(){for(var a=0,b=this.children.length;a<b;a++)this.children[a].draw()},drawPrimitive:function(){if(this.kind===h.POINT)d.point(this.params[0],this.params[1]);else if(this.kind===h.LINE)this.params.length===
4?d.line(this.params[0],this.params[1],this.params[2],this.params[3]):d.line(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5]);else if(this.kind===h.TRIANGLE)d.triangle(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5]);else if(this.kind===h.QUAD)d.quad(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5],this.params[6],this.params[7]);else if(this.kind===h.RECT)if(this.image!==null){d.imageMode(h.CORNER);
d.image(this.image,this.params[0],this.params[1],this.params[2],this.params[3])}else{d.rectMode(h.CORNER);d.rect(this.params[0],this.params[1],this.params[2],this.params[3])}else if(this.kind===h.ELLIPSE){d.ellipseMode(h.CORNER);d.ellipse(this.params[0],this.params[1],this.params[2],this.params[3])}else if(this.kind===h.ARC){d.ellipseMode(h.CORNER);d.arc(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5])}else if(this.kind===h.BOX)this.params.length===1?d.box(this.params[0]):
d.box(this.params[0],this.params[1],this.params[2]);else this.kind===h.SPHERE&&d.sphere(this.params[0])},pre:function(){if(this.matrix){d.pushMatrix();i.transform(this.matrix.elements[0],this.matrix.elements[3],this.matrix.elements[1],this.matrix.elements[4],this.matrix.elements[2],this.matrix.elements[5])}if(this.style){d.pushStyle();this.styles()}},post:function(){this.matrix&&d.popMatrix();this.style&&d.popStyle()},styles:function(){if(this.stroke){d.stroke(this.strokeColor);d.strokeWeight(this.strokeWeight);
d.strokeCap(this.strokeCap);d.strokeJoin(this.strokeJoin)}else d.noStroke();this.fill?d.fill(this.fillColor):d.noFill()},getChild:function(a){var b,c;if(typeof a==="number")return this.children[a];else{var e;if(a===""||this.name===a)return this;else{if(this.nameTable.length>0){b=0;for(c=this.nameTable.length;b<c||e;b++)if(this.nameTable[b].getName===a)e=this.nameTable[b];if(e)return e}b=0;for(c=this.children.length;b<c;b++)if(e=this.children[b].getChild(a))return e}return null}},getChildCount:function(){return this.children.length},
addChild:function(a){this.children.push(a);a.parent=this;a.getName()!==null&&this.addName(a.getName(),a)},addName:function(a,b){this.parent!==null?this.parent.addName(a,b):this.nameTable.push([a,b])},translate:function(){if(arguments.length===2){this.checkMatrix(2);this.matrix.translate(arguments[0],arguments[1])}else{this.checkMatrix(3);this.matrix.translate(arguments[0],arguments[1],0)}},checkMatrix:function(a){if(this.matrix===null)this.matrix=a===2?new d.PMatrix2D:new d.PMatrix3D;else if(a===
3&&this.matrix instanceof d.PMatrix2D)this.matrix=new d.PMatrix3D},rotateX:function(a){this.rotate(a,1,0,0)},rotateY:function(a){this.rotate(a,0,1,0)},rotateZ:function(a){this.rotate(a,0,0,1)},rotate:function(){if(arguments.length===1){this.checkMatrix(2);this.matrix.rotate(arguments[0])}else{this.checkMatrix(3);this.matrix.rotate(arguments[0],arguments[1],arguments[2],arguments[3])}},scale:function(){if(arguments.length===2){this.checkMatrix(2);this.matrix.scale(arguments[0],arguments[1])}else if(arguments.length===
3){this.checkMatrix(2);this.matrix.scale(arguments[0],arguments[1],arguments[2])}else{this.checkMatrix(2);this.matrix.scale(arguments[0])}},resetMatrix:function(){this.checkMatrix(2);this.matrix.reset()},applyMatrix:function(a){if(arguments.length===1)this.applyMatrix(a.elements[0],a.elements[1],0,a.elements[2],a.elements[3],a.elements[4],0,a.elements[5],0,0,1,0,0,0,0,1);else if(arguments.length===6){this.checkMatrix(2);this.matrix.apply(arguments[0],arguments[1],arguments[2],0,arguments[3],arguments[4],
arguments[5],0,0,0,1,0,0,0,0,1)}else if(arguments.length===16){this.checkMatrix(3);this.matrix.apply(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15])}}};var O=d.PShapeSVG=function(){d.PShape.call(this);if(arguments.length===1){this.element=arguments[0];this.vertexCodes=[];this.vertices=[];this.opacity=1;this.stroke=false;this.strokeColor=
h.ALPHA_MASK;this.strokeWeight=1;this.strokeCap=h.SQUARE;this.strokeJoin=h.MITER;this.strokeName=this.strokeGradientPaint=this.strokeGradient=null;this.strokeOpacity=1;this.fill=true;this.fillColor=h.ALPHA_MASK;this.fillName=this.fillGradientPaint=this.fillGradient=null;this.fillOpacity=1;if(this.element.getName()!=="svg")throw"root is not <svg>, it's <"+this.element.getName()+">";}else if(arguments.length===2)if(typeof arguments[1]==="string"){if(arguments[1].indexOf(".svg")>-1){this.element=new d.XMLElement(null,
arguments[1]);this.vertexCodes=[];this.vertices=[];this.opacity=1;this.stroke=false;this.strokeColor=h.ALPHA_MASK;this.strokeWeight=1;this.strokeCap=h.SQUARE;this.strokeJoin=h.MITER;this.strokeName=this.strokeGradientPaint=this.strokeGradient="";this.strokeOpacity=1;this.fill=true;this.fillColor=h.ALPHA_MASK;this.fillGradientPaint=this.fillGradient=null;this.fillOpacity=1}}else if(arguments[0]){this.element=arguments[1];this.vertexCodes=arguments[0].vertexCodes.slice();this.vertices=arguments[0].vertices.slice();
this.stroke=arguments[0].stroke;this.strokeColor=arguments[0].strokeColor;this.strokeWeight=arguments[0].strokeWeight;this.strokeCap=arguments[0].strokeCap;this.strokeJoin=arguments[0].strokeJoin;this.strokeGradient=arguments[0].strokeGradient;this.strokeGradientPaint=arguments[0].strokeGradientPaint;this.strokeName=arguments[0].strokeName;this.fill=arguments[0].fill;this.fillColor=arguments[0].fillColor;this.fillGradient=arguments[0].fillGradient;this.fillGradientPaint=arguments[0].fillGradientPaint;
this.fillName=arguments[0].fillName;this.strokeOpacity=arguments[0].strokeOpacity;this.fillOpacity=arguments[0].fillOpacity;this.opacity=arguments[0].opacity}this.name=this.element.getStringAttribute("id");this.visible=this.element.getStringAttribute("display","inline")!=="none";var a=this.element.getAttribute("transform");if(a)this.matrix=this.parseMatrix(a);a=this.element.getStringAttribute("viewBox");if(a!==null){a=a.split(" ");this.width=a[2];this.height=a[3]}a=this.element.getStringAttribute("width");
var b=this.element.getStringAttribute("height");if(a!==null){this.width=this.parseUnitSize(a);this.height=this.parseUnitSize(b)}else if(this.width===0||this.height===0){this.height=this.width=1;throw"The width and/or height is not readable in the <svg> tag of this file.";}this.parseColors(this.element);this.parseChildren(this.element)};O.prototype=new Ta;O.prototype.parseMatrix=function(a){this.checkMatrix(2);var b=[];a.replace(/\s*(\w+)\((.*?)\)/g,function(g){b.push(d.trim(g))});if(b.length===0)return null;
a=0;for(var c=b.length;a<c;a++){var e=[];b[a].replace(/\((.*?)\)/,function(){return function(g,k){e=k.replace(/,+/g," ").split(/\s+/)}}());if(b[a].indexOf("matrix")!==-1)this.matrix.set(e[0],e[2],e[4],e[1],e[3],e[5]);else if(b[a].indexOf("translate")!==-1)this.matrix.translate(e[0],e.length===2?e[1]:0);else if(b[a].indexOf("scale")!==-1)this.matrix.scale(e[0],e.length===2?e[1]:e[0]);else if(b[a].indexOf("rotate")!==-1){var f=e[0];if(e.length===1)this.matrix.rotate(d.radians(f));else if(e.length===
3){this.matrix.translate(e[1],e[2]);this.matrix.rotate(d.radians(e[0]));this.matrix.translate(-e[1],-e[2])}}else if(b[a].indexOf("skewX")!==-1)this.matrix.skewX(parseFloat(e[0]));else b[a].indexOf("skewY")!==-1&&this.matrix.skewY(e[0])}return this.matrix};O.prototype.parseChildren=function(a){a=a.getChildren();for(var b=new d.PShape,c=0,e=a.length;c<e;c++){var f=this.parseChild(a[c]);f&&b.addChild(f)}this.children.push(b)};O.prototype.getName=function(){return this.name};O.prototype.parseChild=function(a){var b=
a.getName(),c;if(b==="g")c=new O(this,a);else if(b==="defs")c=new O(this,a);else if(b==="line"){c=new O(this,a);c.parseLine()}else if(b==="circle"){c=new O(this,a);c.parseEllipse(true)}else if(b==="ellipse"){c=new O(this,a);c.parseEllipse(false)}else if(b==="rect"){c=new O(this,a);c.parseRect()}else if(b==="polygon"){c=new O(this,a);c.parsePoly(true)}else if(b==="polyline"){c=new O(this,a);c.parsePoly(false)}else if(b==="path"){c=new O(this,a);c.parsePath()}return c};O.prototype.parsePath=function(){this.family=
h.PATH;this.kind=0;var a=d.trim(this.element.getStringAttribute("d").replace(/[\s,]+/g," "));if(a!==null){a=d.__toCharArray(a);for(var b=0,c=0,e=0,f=0,g=f=e=0,k=0,j=0,l=0,p=l=f=j=e=0,o=0,s="",n=[],w=false,E,C,r;p<a.length;){o=a[p].valueOf();if(o>=65&&o<=90||o>=97&&o<=122){r=p;p++;if(p<a.length){n=[];for(o=a[p].valueOf();!(o>=65&&o<=90||o>=97&&o<=100||o>=102&&o<=122)&&w===false;){if(o===32){if(s!==""){n.push(parseFloat(s));s=""}}else if(o===45)if(a[p-1].valueOf()===101)s+=a[p].toString();else{s!==
""&&n.push(parseFloat(s));s=a[p].toString()}else s+=a[p].toString();p++;if(p===a.length)w=true;else o=a[p].valueOf()}}if(s!==""){n.push(parseFloat(s));s=""}C=a[r];o=C.valueOf();if(o===77){if(n.length>=2&&n.length%2===0){b=n[0];c=n[1];this.parsePathMoveto(b,c);if(n.length>2){r=2;for(o=n.length;r<o;r+=2){b=n[r];c=n[r+1];this.parsePathLineto(b,c)}}}}else if(o===109){if(n.length>=2&&n.length%2===0){this.parsePathMoveto(b,c);if(n.length>2){r=2;for(o=n.length;r<o;r+=2){b+=n[r];c+=n[r+1];this.parsePathLineto(b,
c)}}}}else if(o===76){if(n.length>=2&&n.length%2===0){r=0;for(o=n.length;r<o;r+=2){b=n[r];c=n[r+1];this.parsePathLineto(b,c)}}}else if(o===108){if(n.length>=2&&n.length%2===0){r=0;for(o=n.length;r<o;r+=2){b+=n[r];c+=n[r+1];this.parsePathLineto(b,c)}}}else if(o===72){r=0;for(o=n.length;r<o;r++){b=n[r];this.parsePathLineto(b,c)}}else if(o===104){r=0;for(o=n.length;r<o;r++){b+=n[r];this.parsePathLineto(b,c)}}else if(o===86){r=0;for(o=n.length;r<o;r++){c=n[r];this.parsePathLineto(b,c)}}else if(o===118){r=
0;for(o=n.length;r<o;r++){c+=n[r];this.parsePathLineto(b,c)}}else if(o===67){if(n.length>=6&&n.length%6===0){r=0;for(o=n.length;r<o;r+=6){e=n[r];g=n[r+1];f=n[r+2];k=n[r+3];j=n[r+4];l=n[r+5];this.parsePathCurveto(e,g,f,k,j,l);b=j;c=l}}}else if(o===99){if(n.length>=6&&n.length%6===0){r=0;for(o=n.length;r<o;r+=6){e=b+n[r];g=c+n[r+1];f=b+n[r+2];k=c+n[r+3];j=b+n[r+4];l=c+n[r+5];this.parsePathCurveto(e,g,f,k,j,l);b=j;c=l}}}else if(o===83){if(n.length>=4&&n.length%4===0){r=0;for(o=n.length;r<o;r+=4){if(E.toLowerCase()===
"c"||E.toLowerCase()==="s"){e=this.vertices[this.vertices.length-2][0];j=this.vertices[this.vertices.length-2][1];f=this.vertices[this.vertices.length-1][0];l=this.vertices[this.vertices.length-1][1];e=f+(f-e);g=l+(l-j)}else{e=this.vertices[this.vertices.length-1][0];g=this.vertices[this.vertices.length-1][1]}f=n[r];k=n[r+1];j=n[r+2];l=n[r+3];this.parsePathCurveto(e,g,f,k,j,l);b=j;c=l}}}else if(o===115){if(n.length>=4&&n.length%4===0){r=0;for(o=n.length;r<o;r+=4){if(E.toLowerCase()==="c"||E.toLowerCase()===
"s"){e=this.vertices[this.vertices.length-2][0];j=this.vertices[this.vertices.length-2][1];f=this.vertices[this.vertices.length-1][0];l=this.vertices[this.vertices.length-1][1];e=f+(f-e);g=l+(l-j)}else{e=this.vertices[this.vertices.length-1][0];g=this.vertices[this.vertices.length-1][1]}f=b+n[r];k=c+n[r+1];j=b+n[r+2];l=c+n[r+3];this.parsePathCurveto(e,g,f,k,j,l);b=j;c=l}}}else if(o===81){if(n.length>=4&&n.length%4===0){r=0;for(o=n.length;r<o;r+=4){e=n[r];f=n[r+1];j=n[r+2];l=n[r+3];this.parsePathQuadto(b,
c,e,f,j,l);b=j;c=l}}}else if(o===113){if(n.length>=4&&n.length%4===0){r=0;for(o=n.length;r<o;r+=4){e=b+n[r];f=c+n[r+1];j=b+n[r+2];l=c+n[r+3];this.parsePathQuadto(b,c,e,f,j,l);b=j;c=l}}}else if(o===84){if(n.length>=2&&n.length%2===0){r=0;for(o=n.length;r<o;r+=2){if(E.toLowerCase()==="q"||E.toLowerCase()==="t"){e=this.vertices[this.vertices.length-2][0];j=this.vertices[this.vertices.length-2][1];f=this.vertices[this.vertices.length-1][0];l=this.vertices[this.vertices.length-1][1];e=f+(f-e);f=l+(l-j)}else{e=
b;f=c}j=n[r];l=n[r+1];this.parsePathQuadto(b,c,e,f,j,l);b=j;c=l}}}else if(o===116){if(n.length>=2&&n.length%2===0){r=0;for(o=n.length;r<o;r+=2){if(E.toLowerCase()==="q"||E.toLowerCase()==="t"){e=this.vertices[this.vertices.length-2][0];j=this.vertices[this.vertices.length-2][1];f=this.vertices[this.vertices.length-1][0];l=this.vertices[this.vertices.length-1][1];e=f+(f-e);f=l+(l-j)}else{e=b;f=c}j=b+n[r];l=c+n[r+1];this.parsePathQuadto(b,c,e,f,j,l);b=j;c=l}}}else if(o!==90)if(o===122)this.close=true;
E=C.toString()}else p++}}};O.prototype.parsePathQuadto=function(a,b,c,e,f,g){if(this.vertices.length>0){this.parsePathCode(h.BEZIER_VERTEX);this.parsePathVertex(a+(c-a)*2/3,b+(e-b)*2/3);this.parsePathVertex(f+(c-f)*2/3,g+(e-g)*2/3);this.parsePathVertex(f,g)}else throw"Path must start with M/m";};O.prototype.parsePathCurveto=function(a,b,c,e,f,g){if(this.vertices.length>0){this.parsePathCode(h.BEZIER_VERTEX);this.parsePathVertex(a,b);this.parsePathVertex(c,e);this.parsePathVertex(f,g)}else throw"Path must start with M/m";
};O.prototype.parsePathLineto=function(a,b){if(this.vertices.length>0){this.parsePathCode(h.VERTEX);this.parsePathVertex(a,b);this.vertices[this.vertices.length-1].moveTo=false}else throw"Path must start with M/m";};O.prototype.parsePathMoveto=function(a,b){this.vertices.length>0&&this.parsePathCode(h.BREAK);this.parsePathCode(h.VERTEX);this.parsePathVertex(a,b);this.vertices[this.vertices.length-1].moveTo=true};O.prototype.parsePathVertex=function(a,b){var c=[];c[0]=a;c[1]=b;this.vertices.push(c)};
O.prototype.parsePathCode=function(a){this.vertexCodes.push(a)};O.prototype.parsePoly=function(a){this.family=h.PATH;this.close=a;a=d.trim(this.element.getStringAttribute("points").replace(/[,\s]+/g," "));if(a!==null){a=a.split(" ");if(a.length%2===0)for(var b=0,c=a.length;b<c;b++){var e=[];e[0]=a[b];e[1]=a[++b];this.vertices.push(e)}}};O.prototype.parseRect=function(){this.kind=h.RECT;this.family=h.PRIMITIVE;this.params=[];this.params[0]=this.element.getFloatAttribute("x");this.params[1]=this.element.getFloatAttribute("y");
this.params[2]=this.element.getFloatAttribute("width");this.params[3]=this.element.getFloatAttribute("height")};O.prototype.parseEllipse=function(a){this.kind=h.ELLIPSE;this.family=h.PRIMITIVE;this.params=[];this.params[0]=this.element.getFloatAttribute("cx");this.params[1]=this.element.getFloatAttribute("cy");var b;if(a)a=b=this.element.getFloatAttribute("r");else{a=this.element.getFloatAttribute("rx");b=this.element.getFloatAttribute("ry")}this.params[0]-=a;this.params[1]-=b;this.params[2]=a*2;
this.params[3]=b*2};O.prototype.parseLine=function(){this.kind=h.LINE;this.family=h.PRIMITIVE;this.params=[];this.params[0]=this.element.getFloatAttribute("x1");this.params[1]=this.element.getFloatAttribute("y1");this.params[2]=this.element.getFloatAttribute("x2");this.params[3]=this.element.getFloatAttribute("y2")};O.prototype.parseColors=function(a){a.hasAttribute("opacity")&&this.setOpacity(a.getAttribute("opacity"));a.hasAttribute("stroke")&&this.setStroke(a.getAttribute("stroke"));a.hasAttribute("stroke-width")&&
this.setStrokeWeight(a.getAttribute("stroke-width"));a.hasAttribute("stroke-linejoin")&&this.setStrokeJoin(a.getAttribute("stroke-linejoin"));a.hasAttribute("stroke-linecap")&&this.setStrokeCap(a.getStringAttribute("stroke-linecap"));a.hasAttribute("fill")&&this.setFill(a.getStringAttribute("fill"));if(a.hasAttribute("style")){a=a.getStringAttribute("style").toString().split(";");for(var b=0,c=a.length;b<c;b++){var e=d.trim(a[b].split(":"));if(e[0]==="fill")this.setFill(e[1]);else if(e[0]==="fill-opacity")this.setFillOpacity(e[1]);
else if(e[0]==="stroke")this.setStroke(e[1]);else if(e[0]==="stroke-width")this.setStrokeWeight(e[1]);else if(e[0]==="stroke-linecap")this.setStrokeCap(e[1]);else if(e[0]==="stroke-linejoin")this.setStrokeJoin(e[1]);else if(e[0]==="stroke-opacity")this.setStrokeOpacity(e[1]);else e[0]==="opacity"&&this.setOpacity(e[1])}}};O.prototype.setFillOpacity=function(a){this.fillOpacity=parseFloat(a);this.fillColor=this.fillOpacity*255<<24|this.fillColor&16777215};O.prototype.setFill=function(a){var b=this.fillColor&
4278190080;if(a==="none")this.fill=false;else if(a.indexOf("#")===0){this.fill=true;this.fillColor=b|parseInt(a.substring(1),16)&16777215}else if(a.indexOf("rgb")===0){this.fill=true;this.fillColor=b|this.parseRGB(a)}else if(a.indexOf("url(#")===0)this.fillName=a.substring(5,a.length-1);else if(fc[a]){this.fill=true;this.fillColor=b|parseInt(fc[a].substring(1),16)&16777215}};O.prototype.setOpacity=function(a){this.strokeColor=parseFloat(a)*255<<24|this.strokeColor&16777215;this.fillColor=parseFloat(a)*
255<<24|this.fillColor&16777215};O.prototype.setStroke=function(a){var b=this.strokeColor&4278190080;if(a==="none")this.stroke=false;else if(a.charAt(0)==="#"){this.stroke=true;this.strokeColor=b|parseInt(a.substring(1),16)&16777215}else if(a.indexOf("rgb")===0){this.stroke=true;this.strokeColor=b|this.parseRGB(a)}else if(a.indexOf("url(#")===0)this.strokeName=a.substring(5,a.length-1);else if(fc[a]){this.stroke=true;this.strokeColor=b|parseInt(fc[a].substring(1),16)&16777215}};O.prototype.setStrokeWeight=
function(a){this.strokeWeight=this.parseUnitSize(a)};O.prototype.setStrokeJoin=function(a){if(a==="miter")this.strokeJoin=h.MITER;else if(a==="round")this.strokeJoin=h.ROUND;else if(a==="bevel")this.strokeJoin=h.BEVEL};O.prototype.setStrokeCap=function(a){if(a==="butt")this.strokeCap=h.SQUARE;else if(a==="round")this.strokeCap=h.ROUND;else if(a==="square")this.strokeCap=h.PROJECT};O.prototype.setStrokeOpacity=function(a){this.strokeOpacity=parseFloat(a);this.strokeColor=this.strokeOpacity*255<<24|
this.strokeColor&16777215};O.prototype.parseRGB=function(a){a=a.substring(a.indexOf("(")+1,a.indexOf(")")).split(", ");return a[0]<<16|a[1]<<8|a[2]};O.prototype.parseUnitSize=function(a){var b=a.length-2;if(b<0)return a;return a.indexOf("pt")===b?parseFloat(a.substring(0,b))*1.25:a.indexOf("pc")===b?parseFloat(a.substring(0,b))*15:a.indexOf("mm")===b?parseFloat(a.substring(0,b))*3.543307:a.indexOf("cm")===b?parseFloat(a.substring(0,b))*35.43307:a.indexOf("in")===b?parseFloat(a.substring(0,b))*90:
a.indexOf("px")===b?parseFloat(a.substring(0,b)):parseFloat(a)};d.shape=function(a,b,c,e,f){if(arguments.length>=1&&arguments[0]!==null)if(a.isVisible()){d.pushMatrix();if(Eb===h.CENTER)if(arguments.length===5){d.translate(b-e/2,c-f/2);d.scale(e/a.getWidth(),f/a.getHeight())}else arguments.length===3?d.translate(b-a.getWidth()/2,-a.getHeight()/2):d.translate(-a.getWidth()/2,-a.getHeight()/2);else if(Eb===h.CORNER)if(arguments.length===5){d.translate(b,c);d.scale(e/a.getWidth(),f/a.getHeight())}else arguments.length===
3&&d.translate(b,c);else if(Eb===h.CORNERS)if(arguments.length===5){e-=b;f-=c;d.translate(b,c);d.scale(e/a.getWidth(),f/a.getHeight())}else arguments.length===3&&d.translate(b,c);a.draw();if(arguments.length===1&&Eb===h.CENTER||arguments.length>1)d.popMatrix()}};d.shapeMode=function(a){Eb=a};d.loadShape=function(a){if(arguments.length===1)if(a.indexOf(".svg")>-1)return new O(null,a);return null};var hc=function(a,b,c,e,f){this.fullName=a||"";this.name=b||"";this.namespace=c||"";this.value=e;this.type=
f};hc.prototype={getName:function(){return this.name},getFullName:function(){return this.fullName},getNamespace:function(){return this.namespace},getValue:function(){return this.value},getType:function(){return this.type},setValue:function(a){this.value=a}};var wb=d.XMLElement=function(){if(arguments.length===4){this.attributes=[];this.children=[];this.fullName=arguments[0]||"";if(arguments[1])this.name=arguments[1];else{var a=this.fullName.indexOf(":");this.name=a>=0?this.fullName.substring(a+1):
this.fullName}this.namespace=arguments[1];this.content="";this.lineNr=arguments[3];this.systemID=arguments[2];this.parent=null}else if(arguments.length===2&&arguments[1].indexOf(".")>-1){this.attributes=[];this.children=[];this.lineNr=this.systemID=this.content=this.namespace=this.name=this.fullName="";this.parent=null;this.parse(arguments[arguments.length-1])}else if(arguments.length===1&&typeof arguments[0]==="string"){this.attributes=[];this.children=[];this.lineNr=this.systemID=this.content=this.namespace=
this.name=this.fullName="";this.parent=null;this.parse(arguments[0])}else{this.attributes=[];this.children=[];this.lineNr=this.systemID=this.content=this.namespace=this.name=this.fullName="";this.parent=null}};wb.prototype={parse:function(a){var b;try{if(a.indexOf(".xml")>-1||a.indexOf(".svg")>-1)a=lc(a);b=(new DOMParser).parseFromString(a,"text/xml");var c=b.documentElement;if(c)this.parseChildrenRecursive(null,c);else throw"Error loading document";return this}catch(e){throw e;}},createElement:function(){return arguments.length===
2?new wb(arguments[0],arguments[1],null,null):new wb(arguments[0],arguments[1],arguments[2],arguments[3])},hasAttribute:function(){if(arguments.length===1)return this.getAttribute(arguments[0])!==null;else if(arguments.length===2)return this.getAttribute(arguments[0],arguments[1])!==null},createPCDataElement:function(){return new wb},equals:function(a){if(typeof a==="Object")return this.equalsXMLElement(a)},equalsXMLElement:function(a){if(a instanceof wb){var b,c;if(this.name!==a.getLocalName())return false;
if(this.attributes.length!==a.getAttributeCount())return false;b=0;for(c=this.attributes.length;b<c;b++){if(!a.hasAttribute(this.attributes[b].getName(),this.attributes[b].getNamespace()))return false;if(this.attributes[b].getValue()!==a.attributes[b].getValue())return false;if(this.attributes[b].getType()!==a.attributes[b].getType())return false}if(this.children.length!==a.getChildCount())return false;var e,f;b=0;for(c=this.children.length;b<c;b++){e=this.getChildAtIndex(b);f=a.getChildAtIndex(b);
if(!e.equalsXMLElement(f))return false}return true}},getContent:function(){return this.content},getAttribute:function(){var a;if(arguments.length===2)return(a=this.findAttribute(arguments[0]))?a.getValue():arguments[1];else if(arguments.length===1)return(a=this.findAttribute(arguments[0]))?a.getValue():null;else if(arguments.length===3)return(a=this.findAttribute(arguments[0],arguments[1]))?a.getValue():arguments[2]},getStringAttribute:function(){return arguments.length===1?this.getAttribute(arguments[0]):
arguments.length===2?this.getAttribute(arguments[0],arguments[1]):this.getAttribute(arguments[0],arguments[1],arguments[2])},getFloatAttribute:function(){return arguments.length===1?parseFloat(this.getAttribute(arguments[0],0)):arguments.length===2?this.getAttribute(arguments[0],arguments[1]):this.getAttribute(arguments[0],arguments[1],arguments[2])},getIntAttribute:function(){return arguments.length===1?this.getAttribute(arguments[0],0):arguments.length===2?this.getAttribute(arguments[0],arguments[1]):
this.getAttribute(arguments[0],arguments[1],arguments[2])},hasChildren:function(){return this.children.length>0},addChild:function(a){if(a!==null){a.parent=this;this.children.push(a)}},insertChild:function(a,b){if(a){if(a.getLocalName()===null&&!this.hasChildren()){var c=this.children[this.children.length-1];if(c.getLocalName()===null){c.setContent(c.getContent()+a.getContent());return}}a.parent=this;this.children.splice(b,0,a)}},getChild:function(a){if(typeof a==="number")return this.children[a];
else if(a.indexOf("/")!==-1)this.getChildRecursive(a.split("/"),0);else{for(var b,c,e=0,f=this.getChildCount();e<f;e++){b=this.getChild(e);c=b.getName();if(c!==null&&c===a)return b}return null}},getChildren:function(){if(arguments.length===1)if(typeof arguments[0]==="number")return this.getChild(arguments[0]);else if(arguments[0].indexOf("/")!==-1)return this.getChildrenRecursive(arguments[0].split("/"),0);else{for(var a=[],b,c,e=0,f=this.getChildCount();e<f;e++){b=this.getChild(e);c=b.getName();
c!==null&&c===arguments[0]&&a.push(b)}return a}else return this.children},getChildCount:function(){return this.children.length},getChildRecursive:function(a,b){for(var c,e,f=0,g=this.getChildCount();f<g;f++){c=this.getChild(f);e=c.getName();if(e!==null&&e===a[b])if(b===a.length-1)return c;else{b+=1;return c.getChildRecursive(a,b)}}return null},getChildrenRecursive:function(a,b){if(b===a.length-1)return this.getChildren(a[b]);for(var c=this.getChildren(a[b]),e=[],f=0;f<c.length;f++)e=e.concat(c[f].getChildrenRecursive(a,
b+1));return e},parseChildrenRecursive:function(a,b){var c,e,f,g;if(a){c=new wb(b.localName,b.nodeName,"","");c.content=b.textContent||"";c.parent=a}else{this.fullName=b.localName;this.name=b.nodeName;this.content=b.textContent||"";c=this}f=0;for(g=b.attributes.length;f<g;f++){e=b.attributes[f];e=new hc(e.getname,e.nodeName,e.namespaceURI,e.nodeValue,e.nodeType);c.attributes.push(e)}f=0;for(g=b.childNodes.length;f<g;f++){e=b.childNodes[f];e.nodeType===1&&c.children.push(c.parseChildrenRecursive(c,
e))}return c},isLeaf:function(){return!this.hasChildren()},listChildren:function(){for(var a=[],b=0,c=this.children.length;b<c;b++)a.push(this.getChild(b).getName());return a},removeAttribute:function(a,b){this.namespace=b||"";for(var c=0,e=this.attributes.length;c<e;c++)if(this.attributes[c].getName()===a&&this.attributes[c].getNamespace()===this.namespace){this.attributes.splice(c,1);break}},removeChild:function(a){if(a)for(var b=0,c=this.children.length;b<c;b++)if(this.children[b].equalsXMLElement(a)){this.children.splice(b,
1);break}},removeChildAtIndex:function(a){this.children.length>a&&this.children.splice(a,1)},findAttribute:function(a,b){this.namespace=b||"";for(var c=0,e=this.attributes.length;c<e;c++)if(this.attributes[c].getName()===a&&this.attributes[c].getNamespace()===this.namespace)return this.attributes[c]},setAttribute:function(){var a;if(arguments.length===3){a=arguments[0].indexOf(":");var b=arguments[0].substring(a+1);if(a=this.findAttribute(b,arguments[1]))a.setValue(arguments[2]);else{a=new hc(arguments[0],
b,arguments[1],arguments[2],"CDATA");this.attributes.push(a)}}else if(a=this.findAttribute(arguments[0]))a.setValue(arguments[1]);else{a=new hc(arguments[0],arguments[0],null,arguments[1],"CDATA");this.attributes.push(a)}},setContent:function(a){this.content=a},setName:function(){if(arguments.length===1){this.name=arguments[0];this.fullName=arguments[0];this.namespace=null}else{var a=arguments[0].indexOf(":");this.name=arguments[1]===null||a<0?arguments[0]:arguments[0].substring(a+1);this.fullName=
arguments[0];this.namespace=arguments[1]}},getName:function(){return this.fullName},getLocalName:function(){return this.name},getAttributeCount:function(){return this.attributes.length}};var td=function(a){for(var b=0,c=0;c<a.length;c++)b=c!==0?Math.max(b,Math.abs(a[c])):Math.abs(a[c]);a=(b+"").indexOf(".");if(a===0)a=1;else if(a===-1)a=(b+"").length;return a},Pa=d.PMatrix2D=function(){if(arguments.length===0)this.reset();else if(arguments.length===1&&arguments[0]instanceof Pa)this.set(arguments[0].array());
else arguments.length===6&&this.set(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])};Pa.prototype={set:function(){if(arguments.length===6){var a=arguments;this.set([a[0],a[1],a[2],a[3],a[4],a[5]])}else if(arguments.length===1&&arguments[0]instanceof Pa)this.elements=arguments[0].array();else if(arguments.length===1&&arguments[0]instanceof Array)this.elements=arguments[0].slice()},get:function(){var a=new Pa;a.set(this.elements);return a},reset:function(){this.set([1,
0,0,0,1,0])},array:function(){return this.elements.slice()},translate:function(a,b){this.elements[2]=a*this.elements[0]+b*this.elements[1]+this.elements[2];this.elements[5]=a*this.elements[3]+b*this.elements[4]+this.elements[5]},transpose:function(){},mult:function(a,b){var c,e;if(a instanceof sa){c=a.x;e=a.y;b||(b=new sa)}else if(a instanceof Array){c=a[0];e=a[1];b||(b=[])}if(b instanceof Array){b[0]=this.elements[0]*c+this.elements[1]*e+this.elements[2];b[1]=this.elements[3]*c+this.elements[4]*
e+this.elements[5]}else if(b instanceof sa){b.x=this.elements[0]*c+this.elements[1]*e+this.elements[2];b.y=this.elements[3]*c+this.elements[4]*e+this.elements[5];b.z=0}return b},multX:function(a,b){return a*this.elements[0]+b*this.elements[1]+this.elements[2]},multY:function(a,b){return a*this.elements[3]+b*this.elements[4]+this.elements[5]},skewX:function(a){this.apply(1,0,1,a,0,0)},skewY:function(a){this.apply(1,0,1,0,a,0)},determinant:function(){return this.elements[0]*this.elements[4]-this.elements[1]*
this.elements[3]},invert:function(){var a=this.determinant();if(Math.abs(a)>h.MIN_INT){var b=this.elements[0],c=this.elements[1],e=this.elements[2],f=this.elements[3],g=this.elements[4],k=this.elements[5];this.elements[0]=g/a;this.elements[3]=-f/a;this.elements[1]=-c/a;this.elements[4]=b/a;this.elements[2]=(c*k-g*e)/a;this.elements[5]=(f*e-b*k)/a;return true}return false},scale:function(a,b){if(a&&!b)b=a;if(a&&b){this.elements[0]*=a;this.elements[1]*=b;this.elements[3]*=a;this.elements[4]*=b}},apply:function(){var a;
if(arguments.length===1&&arguments[0]instanceof Pa)a=arguments[0].array();else if(arguments.length===6)a=Array.prototype.slice.call(arguments);else if(arguments.length===1&&arguments[0]instanceof Array)a=arguments[0];for(var b=[0,0,this.elements[2],0,0,this.elements[5]],c=0,e=0;e<2;e++)for(var f=0;f<3;f++,c++)b[c]+=this.elements[e*3+0]*a[f+0]+this.elements[e*3+1]*a[f+3];this.elements=b.slice()},preApply:function(){var a;if(arguments.length===1&&arguments[0]instanceof Pa)a=arguments[0].array();else if(arguments.length===
6)a=Array.prototype.slice.call(arguments);else if(arguments.length===1&&arguments[0]instanceof Array)a=arguments[0];var b=[0,0,a[2],0,0,a[5]];b[2]=a[2]+this.elements[2]*a[0]+this.elements[5]*a[1];b[5]=a[5]+this.elements[2]*a[3]+this.elements[5]*a[4];b[0]=this.elements[0]*a[0]+this.elements[3]*a[1];b[3]=this.elements[0]*a[3]+this.elements[3]*a[4];b[1]=this.elements[1]*a[0]+this.elements[4]*a[1];b[4]=this.elements[1]*a[3]+this.elements[4]*a[4];this.elements=b.slice()},rotate:function(a){var b=Math.cos(a);
a=Math.sin(a);var c=this.elements[0],e=this.elements[1];this.elements[0]=b*c+a*e;this.elements[1]=-a*c+b*e;c=this.elements[3];e=this.elements[4];this.elements[3]=b*c+a*e;this.elements[4]=-a*c+b*e},rotateZ:function(a){this.rotate(a)},print:function(){var a=td(this.elements);a=""+d.nfs(this.elements[0],a,4)+" "+d.nfs(this.elements[1],a,4)+" "+d.nfs(this.elements[2],a,4)+"\n"+d.nfs(this.elements[3],a,4)+" "+d.nfs(this.elements[4],a,4)+" "+d.nfs(this.elements[5],a,4)+"\n\n";d.println(a)}};var D=d.PMatrix3D=
function(){this.reset()};D.prototype={set:function(){if(arguments.length===16)this.elements=Array.prototype.slice.call(arguments);else if(arguments.length===1&&arguments[0]instanceof D)this.elements=arguments[0].array();else if(arguments.length===1&&arguments[0]instanceof Array)this.elements=arguments[0].slice()},get:function(){var a=new D;a.set(this.elements);return a},reset:function(){this.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},array:function(){return this.elements.slice()},translate:function(a,
b,c){if(c===v)c=0;this.elements[3]+=a*this.elements[0]+b*this.elements[1]+c*this.elements[2];this.elements[7]+=a*this.elements[4]+b*this.elements[5]+c*this.elements[6];this.elements[11]+=a*this.elements[8]+b*this.elements[9]+c*this.elements[10];this.elements[15]+=a*this.elements[12]+b*this.elements[13]+c*this.elements[14]},transpose:function(){var a=this.elements.slice();this.elements[0]=a[0];this.elements[1]=a[4];this.elements[2]=a[8];this.elements[3]=a[12];this.elements[4]=a[1];this.elements[5]=
a[5];this.elements[6]=a[9];this.elements[7]=a[13];this.elements[8]=a[2];this.elements[9]=a[6];this.elements[10]=a[10];this.elements[11]=a[14];this.elements[12]=a[3];this.elements[13]=a[7];this.elements[14]=a[11];this.elements[15]=a[15]},mult:function(a,b){var c,e,f,g;if(a instanceof sa){c=a.x;e=a.y;f=a.z;g=1;b||(b=new sa)}else if(a instanceof Array){c=a[0];e=a[1];f=a[2];g=a[3]||1;if(!b||b.length!==3&&b.length!==4)b=[0,0,0]}if(b instanceof Array)if(b.length===3){b[0]=this.elements[0]*c+this.elements[1]*
e+this.elements[2]*f+this.elements[3];b[1]=this.elements[4]*c+this.elements[5]*e+this.elements[6]*f+this.elements[7];b[2]=this.elements[8]*c+this.elements[9]*e+this.elements[10]*f+this.elements[11]}else if(b.length===4){b[0]=this.elements[0]*c+this.elements[1]*e+this.elements[2]*f+this.elements[3]*g;b[1]=this.elements[4]*c+this.elements[5]*e+this.elements[6]*f+this.elements[7]*g;b[2]=this.elements[8]*c+this.elements[9]*e+this.elements[10]*f+this.elements[11]*g;b[3]=this.elements[12]*c+this.elements[13]*
e+this.elements[14]*f+this.elements[15]*g}if(b instanceof sa){b.x=this.elements[0]*c+this.elements[1]*e+this.elements[2]*f+this.elements[3];b.y=this.elements[4]*c+this.elements[5]*e+this.elements[6]*f+this.elements[7];b.z=this.elements[8]*c+this.elements[9]*e+this.elements[10]*f+this.elements[11]}return b},preApply:function(){var a;if(arguments.length===1&&arguments[0]instanceof D)a=arguments[0].array();else if(arguments.length===16)a=Array.prototype.slice.call(arguments);else if(arguments.length===
1&&arguments[0]instanceof Array)a=arguments[0];for(var b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=0,e=0;e<4;e++)for(var f=0;f<4;f++,c++)b[c]+=this.elements[f+0]*a[e*4+0]+this.elements[f+4]*a[e*4+1]+this.elements[f+8]*a[e*4+2]+this.elements[f+12]*a[e*4+3];this.elements=b.slice()},apply:function(){var a;if(arguments.length===1&&arguments[0]instanceof D)a=arguments[0].array();else if(arguments.length===16)a=Array.prototype.slice.call(arguments);else if(arguments.length===1&&arguments[0]instanceof Array)a=
arguments[0];for(var b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=0,e=0;e<4;e++)for(var f=0;f<4;f++,c++)b[c]+=this.elements[e*4+0]*a[f+0]+this.elements[e*4+1]*a[f+4]+this.elements[e*4+2]*a[f+8]+this.elements[e*4+3]*a[f+12];this.elements=b.slice()},rotate:function(a,b,c,e){if(c){var f=d.cos(a);a=d.sin(a);var g=1-f;this.apply(g*b*b+f,g*b*c-a*e,g*b*e+a*c,0,g*b*c+a*e,g*c*c+f,g*c*e-a*b,0,g*b*e-a*c,g*c*e+a*b,g*e*e+f,0,0,0,0,1)}else this.rotateZ(a)},invApply:function(){if(Db===v)Db=new D;var a=arguments;Db.set(a[0],
a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]);if(!Db.invert())return false;this.preApply(Db);return true},rotateX:function(a){var b=d.cos(a);a=d.sin(a);this.apply([1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1])},rotateY:function(a){var b=d.cos(a);a=d.sin(a);this.apply([b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1])},rotateZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.apply([b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1])},scale:function(a,b,c){if(a&&!b&&!c)b=c=a;else if(a&&b&&!c)c=1;if(a&&b&&
c){this.elements[0]*=a;this.elements[1]*=b;this.elements[2]*=c;this.elements[4]*=a;this.elements[5]*=b;this.elements[6]*=c;this.elements[8]*=a;this.elements[9]*=b;this.elements[10]*=c;this.elements[12]*=a;this.elements[13]*=b;this.elements[14]*=c}},skewX:function(a){this.apply(1,Math.tan(a),0,0,0,1,0,0,0,0,1,0,0,0,0,1)},skewY:function(a){this.apply(1,0,0,0,Math.tan(a),1,0,0,0,0,1,0,0,0,0,1)},multX:function(a,b,c,e){return c?e?this.elements[0]*a+this.elements[1]*b+this.elements[2]*c+this.elements[3]*
e:this.elements[0]*a+this.elements[1]*b+this.elements[2]*c+this.elements[3]:this.elements[0]*a+this.elements[1]*b+this.elements[3]},multY:function(a,b,c,e){return c?e?this.elements[4]*a+this.elements[5]*b+this.elements[6]*c+this.elements[7]*e:this.elements[4]*a+this.elements[5]*b+this.elements[6]*c+this.elements[7]:this.elements[4]*a+this.elements[5]*b+this.elements[7]},multZ:function(a,b,c,e){return e?this.elements[8]*a+this.elements[9]*b+this.elements[10]*c+this.elements[11]*e:this.elements[8]*
a+this.elements[9]*b+this.elements[10]*c+this.elements[11]},multW:function(a,b,c,e){return e?this.elements[12]*a+this.elements[13]*b+this.elements[14]*c+this.elements[15]*e:this.elements[12]*a+this.elements[13]*b+this.elements[14]*c+this.elements[15]},invert:function(){var a=this.elements[0]*this.elements[5]-this.elements[1]*this.elements[4],b=this.elements[0]*this.elements[6]-this.elements[2]*this.elements[4],c=this.elements[0]*this.elements[7]-this.elements[3]*this.elements[4],e=this.elements[1]*
this.elements[6]-this.elements[2]*this.elements[5],f=this.elements[1]*this.elements[7]-this.elements[3]*this.elements[5],g=this.elements[2]*this.elements[7]-this.elements[3]*this.elements[6],k=this.elements[8]*this.elements[13]-this.elements[9]*this.elements[12],j=this.elements[8]*this.elements[14]-this.elements[10]*this.elements[12],l=this.elements[8]*this.elements[15]-this.elements[11]*this.elements[12],p=this.elements[9]*this.elements[14]-this.elements[10]*this.elements[13],o=this.elements[9]*
this.elements[15]-this.elements[11]*this.elements[13],s=this.elements[10]*this.elements[15]-this.elements[11]*this.elements[14],n=a*s-b*o+c*p+e*l-f*j+g*k;if(Math.abs(n)<=1.0E-9)return false;var w=[];w[0]=+this.elements[5]*s-this.elements[6]*o+this.elements[7]*p;w[4]=-this.elements[4]*s+this.elements[6]*l-this.elements[7]*j;w[8]=+this.elements[4]*o-this.elements[5]*l+this.elements[7]*k;w[12]=-this.elements[4]*p+this.elements[5]*j-this.elements[6]*k;w[1]=-this.elements[1]*s+this.elements[2]*o-this.elements[3]*
p;w[5]=+this.elements[0]*s-this.elements[2]*l+this.elements[3]*j;w[9]=-this.elements[0]*o+this.elements[1]*l-this.elements[3]*k;w[13]=+this.elements[0]*p-this.elements[1]*j+this.elements[2]*k;w[2]=+this.elements[13]*g-this.elements[14]*f+this.elements[15]*e;w[6]=-this.elements[12]*g+this.elements[14]*c-this.elements[15]*b;w[10]=+this.elements[12]*f-this.elements[13]*c+this.elements[15]*a;w[14]=-this.elements[12]*e+this.elements[13]*b-this.elements[14]*a;w[3]=-this.elements[9]*g+this.elements[10]*
f-this.elements[11]*e;w[7]=+this.elements[8]*g-this.elements[10]*c+this.elements[11]*b;w[11]=-this.elements[8]*f+this.elements[9]*c-this.elements[11]*a;w[15]=+this.elements[8]*e-this.elements[9]*b+this.elements[10]*a;a=1/n;w[0]*=a;w[1]*=a;w[2]*=a;w[3]*=a;w[4]*=a;w[5]*=a;w[6]*=a;w[7]*=a;w[8]*=a;w[9]*=a;w[10]*=a;w[11]*=a;w[12]*=a;w[13]*=a;w[14]*=a;w[15]*=a;this.elements=w.slice();return true},toString:function(){for(var a="",b=0;b<15;b++)a+=this.elements[b]+", ";a+=this.elements[15];return a},print:function(){var a=
td(this.elements);a=""+d.nfs(this.elements[0],a,4)+" "+d.nfs(this.elements[1],a,4)+" "+d.nfs(this.elements[2],a,4)+" "+d.nfs(this.elements[3],a,4)+"\n"+d.nfs(this.elements[4],a,4)+" "+d.nfs(this.elements[5],a,4)+" "+d.nfs(this.elements[6],a,4)+" "+d.nfs(this.elements[7],a,4)+"\n"+d.nfs(this.elements[8],a,4)+" "+d.nfs(this.elements[9],a,4)+" "+d.nfs(this.elements[10],a,4)+" "+d.nfs(this.elements[11],a,4)+"\n"+d.nfs(this.elements[12],a,4)+" "+d.nfs(this.elements[13],a,4)+" "+d.nfs(this.elements[14],
a,4)+" "+d.nfs(this.elements[15],a,4)+"\n\n";d.println(a)},invTranslate:function(a,b,c){this.preApply(1,0,0,-a,0,1,0,-b,0,0,1,-c,0,0,0,1)},invRotateX:function(a){var b=Math.cos(-a);a=Math.sin(-a);this.preApply([1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1])},invRotateY:function(a){var b=Math.cos(-a);a=Math.sin(-a);this.preApply([b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1])},invRotateZ:function(a){var b=Math.cos(-a);a=Math.sin(-a);this.preApply([b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1])},invScale:function(a,b,c){this.preApply([1/
a,0,0,0,0,1/b,0,0,0,0,1/c,0,0,0,0,1])}};var mb=d.PMatrixStack=function(){this.matrixStack=[]};mb.prototype.load=function(){var a;a=d.use3DContext?new D:new Pa;arguments.length===1?a.set(arguments[0]):a.set(arguments);this.matrixStack.push(a)};mb.prototype.push=function(){this.matrixStack.push(this.peek())};mb.prototype.pop=function(){return this.matrixStack.pop()};mb.prototype.peek=function(){var a;a=d.use3DContext?new D:new Pa;a.set(this.matrixStack[this.matrixStack.length-1]);return a};mb.prototype.mult=
function(a){this.matrixStack[this.matrixStack.length-1].apply(a)};d.split=function(a,b){return a.split(b)};d.splitTokens=function(a,b){if(arguments.length===1)b="\n\t\r\u000c ";b="["+b+"]";for(var c=[],e=0,f=a.search(b);f>=0;){if(f===0)a=a.substring(1);else{c[e]=a.substring(0,f);e++;a=a.substring(f)}f=a.search(b)}if(a.length>0)c[e]=a;if(c.length===0)c=v;return c};d.append=function(a,b){a[a.length]=b;return a};d.concat=function(a,b){return a.concat(b)};d.sort=function(a,b){var c=[];if(a.length>0){for(var e=
b>0?b:a.length,f=0;f<e;f++)c.push(a[f]);typeof a[0]==="string"?c.sort():c.sort(function(g,k){return g-k});if(b>0)for(e=c.length;e<a.length;e++)c.push(a[e])}return c};d.splice=function(a,b,c){if(b.length===0)return a;if(b instanceof Array)for(var e=0;e<b.length;c++,e++)a.splice(c,0,b[e]);else a.splice(c,0,b);return a};d.subset=function(a,b,c){if(arguments.length===2)return a.slice(b,a.length-b);else if(arguments.length===3)return a.slice(b,b+c)};d.join=function(a,b){return a.join(b)};d.shorten=function(a){for(var b=
[],c=a.length,e=0;e<c;e++)b[e]=a[e];b.pop();return b};d.expand=function(a,b){var c=a.slice(0);if(arguments.length===1){c.length=a.length*2;return c}else if(arguments.length===2){c.length=b;return c}};d.arrayCopy=function(){var a,b=0,c,e=0,f;if(arguments.length===2){a=arguments[0];c=arguments[1];f=a.length}else if(arguments.length===3){a=arguments[0];c=arguments[1];f=arguments[2]}else if(arguments.length===5){a=arguments[0];b=arguments[1];c=arguments[2];e=arguments[3];f=arguments[4]}for(var g=b;g<
f+b;g++,e++)if(c[e]!==v)c[e]=a[g];else throw"array index out of bounds exception";};d.reverse=function(a){return a.reverse()};d.mix=function(a,b,c){return a+((b-a)*c>>8)};d.peg=function(a){return a<0?0:a>255?255:a};d.modes={replace:function(a,b){return b},blend:function(a,b){var c=(b&h.ALPHA_MASK)>>>24;return Math.min(((a&h.ALPHA_MASK)>>>24)+c,255)<<24|d.mix(a&h.RED_MASK,b&h.RED_MASK,c)&h.RED_MASK|d.mix(a&h.GREEN_MASK,b&h.GREEN_MASK,c)&h.GREEN_MASK|d.mix(a&h.BLUE_MASK,b&h.BLUE_MASK,c)},add:function(a,
b){var c=(b&h.ALPHA_MASK)>>>24;return Math.min(((a&h.ALPHA_MASK)>>>24)+c,255)<<24|Math.min((a&h.RED_MASK)+((b&h.RED_MASK)>>8)*c,h.RED_MASK)&h.RED_MASK|Math.min((a&h.GREEN_MASK)+((b&h.GREEN_MASK)>>8)*c,h.GREEN_MASK)&h.GREEN_MASK|Math.min((a&h.BLUE_MASK)+((b&h.BLUE_MASK)*c>>8),h.BLUE_MASK)},subtract:function(a,b){var c=(b&h.ALPHA_MASK)>>>24;return Math.min(((a&h.ALPHA_MASK)>>>24)+c,255)<<24|Math.max((a&h.RED_MASK)-((b&h.RED_MASK)>>8)*c,h.GREEN_MASK)&h.RED_MASK|Math.max((a&h.GREEN_MASK)-((b&h.GREEN_MASK)>>
8)*c,h.BLUE_MASK)&h.GREEN_MASK|Math.max((a&h.BLUE_MASK)-((b&h.BLUE_MASK)*c>>8),0)},lightest:function(a,b){var c=(b&h.ALPHA_MASK)>>>24;return Math.min(((a&h.ALPHA_MASK)>>>24)+c,255)<<24|Math.max(a&h.RED_MASK,((b&h.RED_MASK)>>8)*c)&h.RED_MASK|Math.max(a&h.GREEN_MASK,((b&h.GREEN_MASK)>>8)*c)&h.GREEN_MASK|Math.max(a&h.BLUE_MASK,(b&h.BLUE_MASK)*c>>8)},darkest:function(a,b){var c=(b&h.ALPHA_MASK)>>>24;return Math.min(((a&h.ALPHA_MASK)>>>24)+c,255)<<24|d.mix(a&h.RED_MASK,Math.min(a&h.RED_MASK,((b&h.RED_MASK)>>
8)*c),c)&h.RED_MASK|d.mix(a&h.GREEN_MASK,Math.min(a&h.GREEN_MASK,((b&h.GREEN_MASK)>>8)*c),c)&h.GREEN_MASK|d.mix(a&h.BLUE_MASK,Math.min(a&h.BLUE_MASK,(b&h.BLUE_MASK)*c>>8),c)},difference:function(a,b){var c=(b&h.ALPHA_MASK)>>>24,e=(a&h.RED_MASK)>>16,f=(a&h.GREEN_MASK)>>8,g=a&h.BLUE_MASK,k=(b&h.RED_MASK)>>16,j=(b&h.GREEN_MASK)>>8,l=b&h.BLUE_MASK;j=f>j?f-j:j-f;l=g>l?g-l:l-g;return Math.min(((a&h.ALPHA_MASK)>>>24)+c,255)<<24|d.peg(e+(((e>k?e-k:k-e)-e)*c>>8))<<16|d.peg(f+((j-f)*c>>8))<<8|d.peg(g+((l-g)*
c>>8))},exclusion:function(a,b){var c=(b&h.ALPHA_MASK)>>>24,e=(a&h.RED_MASK)>>16,f=(a&h.GREEN_MASK)>>8,g=a&h.BLUE_MASK,k=(b&h.RED_MASK)>>16,j=(b&h.GREEN_MASK)>>8,l=b&h.BLUE_MASK;j=f+j-(f*j>>7);l=g+l-(g*l>>7);return Math.min(((a&h.ALPHA_MASK)>>>24)+c,255)<<24|d.peg(e+((e+k-(e*k>>7)-e)*c>>8))<<16|d.peg(f+((j-f)*c>>8))<<8|d.peg(g+((l-g)*c>>8))},multiply:function(a,b){var c=(b&h.ALPHA_MASK)>>>24,e=(a&h.RED_MASK)>>16,f=(a&h.GREEN_MASK)>>8,g=a&h.BLUE_MASK,k=f*((b&h.GREEN_MASK)>>8)>>8,j=g*(b&h.BLUE_MASK)>>
8;return Math.min(((a&h.ALPHA_MASK)>>>24)+c,255)<<24|d.peg(e+(((e*((b&h.RED_MASK)>>16)>>8)-e)*c>>8))<<16|d.peg(f+((k-f)*c>>8))<<8|d.peg(g+((j-g)*c>>8))},screen:function(a,b){var c=(b&h.ALPHA_MASK)>>>24,e=(a&h.RED_MASK)>>16,f=(a&h.GREEN_MASK)>>8,g=a&h.BLUE_MASK,k=255-((255-f)*(255-((b&h.GREEN_MASK)>>8))>>8),j=255-((255-g)*(255-(b&h.BLUE_MASK))>>8);return Math.min(((a&h.ALPHA_MASK)>>>24)+c,255)<<24|d.peg(e+((255-((255-e)*(255-((b&h.RED_MASK)>>16))>>8)-e)*c>>8))<<16|d.peg(f+((k-f)*c>>8))<<8|d.peg(g+
((j-g)*c>>8))},hard_light:function(a,b){var c=(b&h.ALPHA_MASK)>>>24,e=(a&h.RED_MASK)>>16,f=(a&h.GREEN_MASK)>>8,g=a&h.BLUE_MASK,k=(b&h.RED_MASK)>>16,j=(b&h.GREEN_MASK)>>8,l=b&h.BLUE_MASK;j=j<128?f*j>>7:255-((255-f)*(255-j)>>7);l=l<128?g*l>>7:255-((255-g)*(255-l)>>7);return Math.min(((a&h.ALPHA_MASK)>>>24)+c,255)<<24|d.peg(e+(((k<128?e*k>>7:255-((255-e)*(255-k)>>7))-e)*c>>8))<<16|d.peg(f+((j-f)*c>>8))<<8|d.peg(g+((l-g)*c>>8))},soft_light:function(a,b){var c=(b&h.ALPHA_MASK)>>>24,e=(a&h.RED_MASK)>>16,
f=(a&h.GREEN_MASK)>>8,g=a&h.BLUE_MASK,k=(b&h.RED_MASK)>>16,j=(b&h.GREEN_MASK)>>8,l=b&h.BLUE_MASK;j=(f*j>>7)+(f*f>>8)-(f*f*j>>15);l=(g*l>>7)+(g*g>>8)-(g*g*l>>15);return Math.min(((a&h.ALPHA_MASK)>>>24)+c,255)<<24|d.peg(e+(((e*k>>7)+(e*e>>8)-(e*e*k>>15)-e)*c>>8))<<16|d.peg(f+((j-f)*c>>8))<<8|d.peg(g+((l-g)*c>>8))},overlay:function(a,b){var c=(b&h.ALPHA_MASK)>>>24,e=(a&h.RED_MASK)>>16,f=(a&h.GREEN_MASK)>>8,g=a&h.BLUE_MASK,k=(b&h.RED_MASK)>>16,j=(b&h.GREEN_MASK)>>8,l=b&h.BLUE_MASK;j=f<128?f*j>>7:255-
((255-f)*(255-j)>>7);l=g<128?g*l>>7:255-((255-g)*(255-l)>>7);return Math.min(((a&h.ALPHA_MASK)>>>24)+c,255)<<24|d.peg(e+(((e<128?e*k>>7:255-((255-e)*(255-k)>>7))-e)*c>>8))<<16|d.peg(f+((j-f)*c>>8))<<8|d.peg(g+((l-g)*c>>8))},dodge:function(a,b){var c=(b&h.ALPHA_MASK)>>>24,e=(a&h.RED_MASK)>>16,f=(a&h.GREEN_MASK)>>8,g=a&h.BLUE_MASK,k=(b&h.RED_MASK)>>16,j=(b&h.GREEN_MASK)>>8,l=b&h.BLUE_MASK;k=k===255?255:d.peg((e<<8)/(255-k));j=j===255?255:d.peg((f<<8)/(255-j));l=l===255?255:d.peg((g<<8)/(255-l));return Math.min(((a&
h.ALPHA_MASK)>>>24)+c,255)<<24|d.peg(e+((k-e)*c>>8))<<16|d.peg(f+((j-f)*c>>8))<<8|d.peg(g+((l-g)*c>>8))},burn:function(a,b){var c=(b&h.ALPHA_MASK)>>>24,e=(a&h.RED_MASK)>>16,f=(a&h.GREEN_MASK)>>8,g=a&h.BLUE_MASK,k=(b&h.RED_MASK)>>16,j=(b&h.GREEN_MASK)>>8,l=b&h.BLUE_MASK;k=k===0?0:255-d.peg((255-e<<8)/k);j=j===0?0:255-d.peg((255-f<<8)/j);l=l===0?0:255-d.peg((255-g<<8)/l);return Math.min(((a&h.ALPHA_MASK)>>>24)+c,255)<<24|d.peg(e+((k-e)*c>>8))<<16|d.peg(f+((j-f)*c>>8))<<8|d.peg(g+((l-g)*c>>8))}};d.color=
function(a,b,c,e){if(a!==v&&b!==v&&c!==v&&e!==v)return X(a,b,c,e);if(a!==v&&b!==v&&c!==v)return X(a,b,c,ua);if(a!==v&&b!==v){var f;if(a&h.ALPHA_MASK){b=Math.round(255*(b/ua));f=a-(a&h.ALPHA_MASK)+((b>255?255:b)<<24&h.ALPHA_MASK)}else if(Fa===h.RGB)f=X(a,a,a,b);else if(Fa===h.HSB)f=X(0,0,a/la*ta,b);return f}if(typeof a==="number"){var g;if(a<=la&&a>=0)if(Fa===h.RGB)g=X(a,a,a,ua);else{if(Fa===h.HSB)g=X(0,0,a/la*ta,ua)}else if(a)g=a;return g}return X(la,za,ta,ua)};d.color.toString=function(a){return"rgba("+
((a&h.RED_MASK)>>>16)+","+((a&h.GREEN_MASK)>>>8)+","+(a&h.BLUE_MASK)+","+((a&h.ALPHA_MASK)>>>24)/255+")"};d.color.toInt=function(a,b,c,e){return e<<24&h.ALPHA_MASK|a<<16&h.RED_MASK|b<<8&h.GREEN_MASK|c&h.BLUE_MASK};d.color.toArray=function(a){return[(a&h.RED_MASK)>>>16,(a&h.GREEN_MASK)>>>8,a&h.BLUE_MASK,(a&h.ALPHA_MASK)>>>24]};d.color.toGLArray=function(a){return[((a&h.RED_MASK)>>>16)/255,((a&h.GREEN_MASK)>>>8)/255,(a&h.BLUE_MASK)/255,((a&h.ALPHA_MASK)>>>24)/255]};d.color.toRGB=function(a,b,c){a=a>
la?la:a;b=b>za?za:b;c=c>ta?ta:c;a=a/la*360;b=b/za*100;c=c/ta*100;var e=Math.round(c/100*255);if(b===0)return[e,e,e];else{a%=360;var f=a%60,g=Math.round(c*(100-b)/1E4*255),k=Math.round(c*(6E3-b*f)/6E5*255);b=Math.round(c*(6E3-b*(60-f))/6E5*255);switch(Math.floor(a/60)){case 0:return[e,b,g];case 1:return[k,e,g];case 2:return[g,e,b];case 3:return[g,k,e];case 4:return[b,g,e];case 5:return[e,g,k]}}};d.color.toHSB=function(a){var b,c,e;b=((a&h.RED_MASK)>>>16)/255;c=((a&h.GREEN_MASK)>>>8)/255;e=(a&h.BLUE_MASK)/
255;a=d.max(d.max(b,c),e);var f=d.min(d.min(b,c),e);if(f===a)return[0,0,a];else{b=b===a?(c-e)/(a-f):c===a?2+(e-b)/(a-f):4+(b-c)/(a-f);b/=6;if(b<0)b+=1;else if(b>1)b-=1}return[b*la,(a-f)/a*za,a*ta]};d.brightness=function(a){return d.color.toHSB(a)[2]};d.saturation=function(a){return d.color.toHSB(a)[1]};d.hue=function(a){return d.color.toHSB(a)[0]};d.red=function(a){return((a&h.RED_MASK)>>>16)/255*la};d.green=function(a){return((a&h.GREEN_MASK)>>>8)/255*za};d.blue=function(a){return(a&h.BLUE_MASK)/
255*ta};d.alpha=function(a){return((a&h.ALPHA_MASK)>>>24)/255*ua};d.lerpColor=function(a,b,c){var e=d.color(a),f=(e&h.RED_MASK)>>>16,g=(e&h.GREEN_MASK)>>>8;a=e&h.BLUE_MASK;e=((e&h.ALPHA_MASK)>>>24)/ua;var k=d.color(b),j=(k&h.GREEN_MASK)>>>8,l=k&h.BLUE_MASK;b=((k&h.ALPHA_MASK)>>>24)/ua;f=parseInt(d.lerp(f,(k&h.RED_MASK)>>>16,c),10);g=parseInt(d.lerp(g,j,c),10);a=parseInt(d.lerp(a,l,c),10);c=parseFloat(d.lerp(e,b,c)*ua);return d.color.toInt(f,g,a,c)};d.defaultColor=function(a,b,c){var e=Fa;Fa=h.RGB;
a=d.color(a/255*la,b/255*za,c/255*ta);Fa=e;return a};d.colorMode=function(){Fa=arguments[0];if(arguments.length>1){la=arguments[1];za=arguments[2]||arguments[1];ta=arguments[3]||arguments[1];ua=arguments[4]||arguments[1]}};d.blendColor=function(a,b,c){var e=0;switch(c){case h.REPLACE:e=d.modes.replace(a,b);break;case h.BLEND:e=d.modes.blend(a,b);break;case h.ADD:e=d.modes.add(a,b);break;case h.SUBTRACT:e=d.modes.subtract(a,b);break;case h.LIGHTEST:e=d.modes.lightest(a,b);break;case h.DARKEST:e=d.modes.darkest(a,
b);break;case h.DIFFERENCE:e=d.modes.difference(a,b);break;case h.EXCLUSION:e=d.modes.exclusion(a,b);break;case h.MULTIPLY:e=d.modes.multiply(a,b);break;case h.SCREEN:e=d.modes.screen(a,b);break;case h.HARD_LIGHT:e=d.modes.hard_light(a,b);break;case h.SOFT_LIGHT:e=d.modes.soft_light(a,b);break;case h.OVERLAY:e=d.modes.overlay(a,b);break;case h.DODGE:e=d.modes.dodge(a,b);break;case h.BURN:e=d.modes.burn(a,b)}return e};d.printMatrix=function(){U.print()};d.translate=function(a,b,c){if(d.use3DContext){Aa.translate(a,
b,c);Ba.invTranslate(a,b,c)}else i.translate(a,b)};d.scale=function(a,b,c){if(d.use3DContext){Aa.scale(a,b,c);Ba.invScale(a,b,c)}else i.scale(a,b||a)};d.pushMatrix=function(){d.use3DContext?bc.load(U):i.save()};d.popMatrix=function(){d.use3DContext?U.set(bc.pop()):Z()};d.resetMatrix=function(){if(d.use3DContext){Aa.reset();Ba.reset()}else i.setTransform(1,0,0,1,0,0)};d.applyMatrix=function(){var a=arguments;if(!d.use3DContext){for(var b=a.length;b<16;b++)a[b]=0;a[10]=a[15]=1}Aa.apply(a[0],a[1],a[2],
a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]);Ba.invApply(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15])};d.rotateX=function(a){Aa.rotateX(a);Ba.invRotateX(a)};d.rotateZ=function(a){Aa.rotateZ(a);Ba.invRotateZ(a)};d.rotateY=function(a){Aa.rotateY(a);Ba.invRotateY(a)};d.rotate=function(a){if(d.use3DContext){Aa.rotateZ(a);Ba.invRotateZ(a)}else i.rotate(a)};d.pushStyle=function(){i.save();d.pushMatrix();pd.push({doFill:V,currentFillColor:Xa,
doStroke:Q,currentStrokeColor:na,curTint:hb,curRectMode:gb,curColorMode:Fa,colorModeX:la,colorModeZ:ta,colorModeY:za,colorModeA:ua,curTextFont:fa,curTextSize:N})};d.popStyle=function(){var a=pd.pop();if(a){Z();d.popMatrix();V=a.doFill;Xa=a.currentFillColor;Q=a.doStroke;na=a.currentStrokeColor;hb=a.curTint;gb=a.curRectmode;Fa=a.curColorMode;la=a.colorModeX;ta=a.colorModeZ;za=a.colorModeY;ua=a.colorModeA;fa=a.curTextFont;N=a.curTextSize}else throw"Too many popStyle() without enough pushStyle()";};d.year=
function(){return(new Date).getFullYear()};d.month=function(){return(new Date).getMonth()+1};d.day=function(){return(new Date).getDate()};d.hour=function(){return(new Date).getHours()};d.minute=function(){return(new Date).getMinutes()};d.second=function(){return(new Date).getSeconds()};d.millis=function(){return(new Date).getTime()-ed};d.redraw=function(){var a=((new Date).getTime()-yc)/1E3;Wb++;var b=Wb/a;if(a>0.5){yc=(new Date).getTime();Wb=0;d.__frameRate=b}d.frameCount++;if(d.use3DContext){i.clear(i.DEPTH_BUFFER_BIT);
Ea={attributes:{},locations:{}};d.noLights();d.lightFalloff(1,0,0);d.shininess(1);d.ambient(255,255,255);d.specular(0,0,0);d.camera();d.draw()}else{i.save();d.draw();Z()}};d.noLoop=function(){Tb=fb=false;clearInterval(Ub)};d.loop=function(){if(!Tb){yc=(new Date).getTime();Wb=0;Ub=window.setInterval(function(){try{d.redraw()}catch(a){window.clearInterval(Ub);throw a;}},cd);Tb=fb=true}};d.frameRate=function(a){bd=a;cd=1E3/bd;if(fb){d.noLoop();d.loop()}};var Sa=[];d.exit=function(){window.clearInterval(Ub);
var a=d.externals.canvas.id;ha.instances.splice(ic[a],1);delete ic[a];for(var b in t.lib)t.lib.hasOwnProperty(b)&&t.lib[b].hasOwnProperty("detach")&&t.lib[b].detach(d);a=0;for(b=Sa.length;a<b;a++){var c=Sa[a][0],e=Sa[a][1],f=Sa[a][2];if(c.removeEventListener)c.removeEventListener(e,f,false);else c.detachEvent&&c.detachEvent("on"+e,f)}};d.cursor=function(){if(arguments.length>1||arguments.length===1&&arguments[0]instanceof d.PImage){var a=arguments[0],b,c;if(arguments.length>=3){b=arguments[1];c=arguments[2];
if(b<0||c<0||c>=a.height||b>=a.width)throw"x and y must be non-negative and less than the dimensions of the image";}else{b=a.width>>>1;c=a.height>>>1}a='url("'+a.toDataURL()+'") '+b+" "+c+", default";q.style.cursor=a}else q.style.cursor=arguments.length===1?arguments[0]:Ed};d.noCursor=function(){q.style.cursor=h.NOCURSOR};d.link=function(a,b){if(b!==v)window.open(a,b);else window.location=a};d.beginDraw=function(){};d.endDraw=function(){};d.Import=function(){};var ud=function(a){a.preventDefault();
a.stopPropagation()};d.disableContextMenu=function(){q.addEventListener("contextmenu",ud,false)};d.enableContextMenu=function(){q.removeEventListener("contextmenu",ud,false)};d.status=function(a){window.status=a};d.binary=function(a,b){var c=32;if(typeof a==="number"){if(b)c=b;return B(a,c)}if(a instanceof Ia){a=a.toString().charCodeAt(0);c=b?32:16}c=B(a,c);if(b)c=c.substr(-b);return c};d.unbinary=function(a){var b=/^[0|1]{8}$/,c=0;if(a instanceof Array){c=[];for(b=0;b<a.length;b++)c[b]=d.unbinary(a[b]);
return c}else if(isNaN(a))throw"NaN_Err";else if(arguments.length===1||a.length===8)if(b.test(a)){for(b=0;b<8;b++)c+=Math.pow(2,b)*parseInt(a.charAt(7-b),10);return c+""}else throw"notBinary: the value passed into unbinary was not an 8 bit binary number";else throw"longErr";};d.nf=function(a,b,c){return G(a,"","-",b,c)};d.nfs=function(a,b,c){return G(a," ","-",b,c)};d.nfp=function(a,b,c){return G(a,"+","-",b,c)};d.nfc=function(a,b,c){return G(a,"","-",b,c,",")};d.hex=function(a,b){if(arguments.length===
1)b=a instanceof Ia?4:8;var c=a,e=b;e=e===v||e===null?e=8:e;if(c<0)c=4294967295+c+1;for(c=Number(c).toString(16).toUpperCase();c.length<e;)c="0"+c;if(c.length>=e)c=c.substring(c.length-e,c.length);return c};d.unhex=function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b.push(H(a[c]));return b}else return H(a)};d.loadStrings=function(a){if(localStorage[a])return localStorage[a].split("\n");a=lc(a);if(typeof a!=="string"||a==="")return[];a=a.replace(/(\r\n?)/g,"\n").replace(/\n$/,"");return a.split("\n")};
d.saveStrings=function(a,b){localStorage[a]=b.join("\n")};d.loadBytes=function(a){a=lc(a);for(var b=[],c=0;c<a.length;c++)b.push(a.charCodeAt(c));return b};d.matchAll=function(a,b){for(var c=[],e,f=RegExp(b,"g");(e=f.exec(a))!==null;){c.push(e);e[0].length===0&&++f.lastIndex}return c.length>0?c:null};d.__replaceAll=function(a,b,c){if(typeof a!=="string")return a.replaceAll.apply(a,S(arguments));return a.replace(RegExp(b,"g"),c)};d.__replaceFirst=function(a,b,c){if(typeof a!=="string")return a.replaceFirst.apply(a,
S(arguments));return a.replace(RegExp(b,""),c)};d.__replace=function(a,b,c){if(typeof a!=="string")return a.replace.apply(a,S(arguments));if(b instanceof RegExp)return a.replace(b,c);if(typeof b!=="string")b=b.toString();if(b==="")return a;var e=a.indexOf(b);if(e<0)return a;var f=0,g="";do{g+=a.substring(f,e)+c;f=e+b.length}while((e=a.indexOf(b,f))>=0);return g+a.substring(f)};d.__equals=function(a,b){if(a.equals instanceof Function)return a.equals.apply(a,S(arguments));return a.valueOf()===b.valueOf()};
d.__toCharArray=function(a){if(typeof a!=="string")return a.toCharArray.apply(a,S(arguments));for(var b=[],c=0,e=a.length;c<e;++c)b[c]=new Ia(a.charAt(c));return b};d.match=function(a,b){return a.match(b)};d.__hashCode=function(a){if(a.hashCode instanceof Function)return a.hashCode.apply(a,S(arguments));return 0|a};d.__printStackTrace=function(a){d.println("Exception: "+a.toString())};var jc=[];d.console=window.console||t.logger;d.println=function(a){var b=jc.length;if(b){t.logger.log(jc.join(""));
jc.length=0}if(arguments.length===0&&b===0)t.logger.log("");else arguments.length!==0&&t.logger.log(a)};d.print=function(a){jc.push(a)};d.str=function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b.push(a[c].toString()+"");return b}else return a.toString()+""};d.trim=function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b.push(a[c].replace(/^\s*/,"").replace(/\s*$/,"").replace(/\r*$/,""));return b}else return a.replace(/^\s*/,"").replace(/\s*$/,"").replace(/\r*$/,"")};d.parseBoolean=
function(a){return d["boolean"](a)};d["boolean"]=function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b.push(Y(a[c]));return b}else return Y(a)};d["byte"]=function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b.push(0-(a[c]&128)|a[c]&127);return b}else return 0-(a&128)|a&127};d["char"]=function(a){if(typeof a==="number")return new Ia(String.fromCharCode(a&65535));else if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b.push(new Ia(String.fromCharCode(a[c]&65535)));
return b}else throw"char() may receive only one argument of type int, byte, int[], or byte[].";};d["float"]=function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b.push(ra(a[c]));return b}else return ra(a)};d["int"]=function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)typeof a[c]==="string"&&!/^\s*[+\-]?\d+\s*$/.test(a[c])?b.push(0):b.push(M(a[c]));return b}else return M(a)};d.__int_cast=function(a){return 0|a};d.abs=Math.abs;d.ceil=Math.ceil;d.constrain=function(a,b,c){return a>
c?c:a<b?b:a};d.dist=function(){var a,b,c;if(arguments.length===4){a=arguments[0]-arguments[2];b=arguments[1]-arguments[3];return Math.sqrt(a*a+b*b)}else if(arguments.length===6){a=arguments[0]-arguments[3];b=arguments[1]-arguments[4];c=arguments[2]-arguments[5];return Math.sqrt(a*a+b*b+c*c)}};d.exp=Math.exp;d.floor=Math.floor;d.lerp=function(a,b,c){return(b-a)*c+a};d.log=Math.log;d.mag=function(a,b,c){if(arguments.length===2)return Math.sqrt(a*a+b*b);else if(arguments.length===3)return Math.sqrt(a*
a+b*b+c*c)};d.map=function(a,b,c,e,f){return e+(f-e)*((a-b)/(c-b))};d.max=function(){if(arguments.length===2)return arguments[0]<arguments[1]?arguments[1]:arguments[0];else{var a=arguments.length===1?arguments[0]:arguments;if(!("length"in a&&a.length>0))throw"Non-empty array is expected";for(var b=a[0],c=a.length,e=1;e<c;++e)if(b<a[e])b=a[e];return b}};d.min=function(){if(arguments.length===2)return arguments[0]<arguments[1]?arguments[0]:arguments[1];else{var a=arguments.length===1?arguments[0]:arguments;
if(!("length"in a&&a.length>0))throw"Non-empty array is expected";for(var b=a[0],c=a.length,e=1;e<c;++e)if(b>a[e])b=a[e];return b}};d.norm=function(a,b,c){return(a-b)/(c-b)};d.pow=Math.pow;d.round=Math.round;d.sq=function(a){return a*a};d.sqrt=Math.sqrt;d.acos=Math.acos;d.asin=Math.asin;d.atan=Math.atan;d.atan2=Math.atan2;d.cos=Math.cos;d.degrees=function(a){return a*180/Math.PI};d.radians=function(a){return a/180*Math.PI};d.sin=Math.sin;d.tan=Math.tan;var kc=Math.random;d.random=function(){if(arguments.length===
0)return kc();else if(arguments.length===1)return kc()*arguments[0];else{var a=arguments[0],b=arguments[1];return kc()*(b-a)+a}};T.createRandomized=function(){var a=new Date;return new T(a/6E4&4294967295,a&4294967295)};d.randomSeed=function(a){kc=(new T(a)).nextDouble};d.Random=function(a){var b=false,c,e;this.nextGaussian=function(){if(b){b=false;return c}else{var f,g,k;do{f=2*e()-1;g=2*e()-1;k=f*f+g*g}while(k>=1||k===0);k=Math.sqrt(-2*Math.log(k)/k);c=g*k;b=true;return f*k}};e=a===v?Math.random:
(new T(a)).nextDouble};var Qa={generator:v,octaves:4,fallout:0.5,seed:v};d.noise=function(a,b,c){if(Qa.generator===v)Qa.generator=new ea(Qa.seed);for(var e=Qa.generator,f=1,g=1,k=0,j=0;j<Qa.octaves;++j){f*=Qa.fallout;switch(arguments.length){case 1:k+=f*(1+e.noise1d(g*a))/2;break;case 2:k+=f*(1+e.noise2d(g*a,g*b))/2;break;case 3:k+=f*(1+e.noise3d(g*a,g*b,g*c))/2}g*=2}return k};d.noiseDetail=function(a,b){Qa.octaves=a;if(b!==v)Qa.fallout=b};d.noiseSeed=function(a){Qa.seed=a;Qa.generator=v};var xb=
function(){if(!aa.options.isTransparent)if(d.use3DContext){i.clearColor(0.8,0.8,0.8,1);i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}else{i.fillStyle="rgb(204, 204, 204)";i.fillRect(0,0,d.width,d.height);Ha=true}};d.size=function(){var a=false;return function(b,c,e){if(e&&e===h.WEBGL){if(a)throw"Multiple calls to size() for 3D renders are not allowed.";a=true;try{if(q.width!==b||q.height!==c){q.setAttribute("width",b);q.setAttribute("height",c)}i=q.getContext("experimental-webgl");d.use3DContext=
true;id=i.createTexture();Vc=i.createTexture()}catch(f){t.debug(f)}if(i){for(e=0;e<h.SINCOS_LENGTH;e++){Jc[e]=d.sin(e*(h.PI/180)*0.5);Kc[e]=d.cos(e*(h.PI/180)*0.5)}i.viewport(0,0,q.width,q.height);i.enable(i.DEPTH_TEST);i.enable(i.BLEND);i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA);xb();J=Pc(i,"varying vec4 frontColor;attribute vec3 Vertex;attribute vec2 aTextureCoord;uniform vec4 color;uniform mat4 model;uniform mat4 view;uniform mat4 projection;uniform float pointSize;varying vec2 vTextureCoord;void main(void) {  gl_PointSize = pointSize;  frontColor = color;  gl_Position = projection * view * model * vec4(Vertex, 1.0);  vTextureCoord = aTextureCoord;}",
"#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 frontColor;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform int picktype;void main(void){  if(picktype == 0){    gl_FragColor = frontColor;  }  else if(picktype == 1){    float alpha = texture2D(uSampler, vTextureCoord).a;    gl_FragColor = vec4(frontColor.rgb*alpha, alpha);\n  }}");i.useProgram(J);d.strokeWeight(1);x=Pc(i,"varying vec4 frontColor;attribute vec3 Vertex;attribute vec3 Normal;attribute vec4 aColor;attribute vec2 aTexture;varying   vec2 vTexture;uniform vec4 color;uniform bool usingMat;uniform vec3 specular;uniform vec3 mat_emissive;uniform vec3 mat_ambient;uniform vec3 mat_specular;uniform float shininess;uniform mat4 model;uniform mat4 view;uniform mat4 projection;uniform mat4 normalTransform;uniform int lightCount;uniform vec3 falloff;struct Light {  int type;  vec3 color;  vec3 position;  vec3 direction;  float angle;  vec3 halfVector;  float concentration;};uniform Light lights0;uniform Light lights1;uniform Light lights2;uniform Light lights3;uniform Light lights4;uniform Light lights5;uniform Light lights6;uniform Light lights7;Light getLight(int index){  if(index == 0) return lights0;  if(index == 1) return lights1;  if(index == 2) return lights2;  if(index == 3) return lights3;  if(index == 4) return lights4;  if(index == 5) return lights5;  if(index == 6) return lights6;  return lights7;}void AmbientLight( inout vec3 totalAmbient, in vec3 ecPos, in Light light ) {  float d = length( light.position - ecPos );  float attenuation = 1.0 / ( falloff[0] + ( falloff[1] * d ) + ( falloff[2] * d * d ));  totalAmbient += light.color * attenuation;}void DirectionalLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {  float powerfactor = 0.0;  float nDotVP = max(0.0, dot( vertNormal, normalize(-light.position) ));  float nDotVH = max(0.0, dot( vertNormal, normalize(-light.position-ecPos )));  if( nDotVP != 0.0 ){    powerfactor = pow( nDotVH, shininess );  }  col += light.color * nDotVP;  spec += specular * powerfactor;}void PointLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in vec3 eye, in Light light ) {  float powerfactor;   vec3 VP = light.position - ecPos;  float d = length( VP );   VP = normalize( VP );  float attenuation = 1.0 / ( falloff[0] + ( falloff[1] * d ) + ( falloff[2] * d * d ));  float nDotVP = max( 0.0, dot( vertNormal, VP ));  vec3 halfVector = normalize( VP + eye );  float nDotHV = max( 0.0, dot( vertNormal, halfVector ));  if( nDotVP == 0.0) {    powerfactor = 0.0;  }  else{    powerfactor = pow( nDotHV, shininess );  }  spec += specular * powerfactor * attenuation;  col += light.color * nDotVP * attenuation;}void SpotLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in vec3 eye, in Light light ) {  float spotAttenuation;  float powerfactor;  vec3 VP = light.position - ecPos;   vec3 ldir = normalize( -light.direction );  float d = length( VP );  VP = normalize( VP );  float attenuation = 1.0 / ( falloff[0] + ( falloff[1] * d ) + ( falloff[2] * d * d ) );  float spotDot = dot( VP, ldir );    spotAttenuation = 1.0;  attenuation *= spotAttenuation;  float nDotVP = max( 0.0, dot( vertNormal, VP ));  vec3 halfVector = normalize( VP + eye );  float nDotHV = max( 0.0, dot( vertNormal, halfVector ));  if( nDotVP == 0.0 ) {    powerfactor = 0.0;  }  else {    powerfactor = pow( nDotHV, shininess );  }  spec += specular * powerfactor * attenuation;  col += light.color * nDotVP * attenuation;}void main(void) {  vec3 finalAmbient = vec3( 0.0, 0.0, 0.0 );  vec3 finalDiffuse = vec3( 0.0, 0.0, 0.0 );  vec3 finalSpecular = vec3( 0.0, 0.0, 0.0 );  vec4 col = color;  if(color[0] == -1.0){    col = aColor;  }  vec3 norm = vec3( normalTransform * vec4( Normal, 0.0 ) );  vec4 ecPos4 = view * model * vec4(Vertex,1.0);  vec3 ecPos = (vec3(ecPos4))/ecPos4.w;  vec3 eye = vec3( 0.0, 0.0, 1.0 );  if( lightCount == 0 ) {    frontColor = col + vec4(mat_specular,1.0);  }  else {    for( int i = 0; i < 8; i++ ) {      Light l = getLight(i);      if( i >= lightCount ){        break;      }      if( l.type == 0 ) {        AmbientLight( finalAmbient, ecPos, l );      }      else if( l.type == 1 ) {        DirectionalLight( finalDiffuse, finalSpecular, norm, ecPos, l );      }      else if( l.type == 2 ) {        PointLight( finalDiffuse, finalSpecular, norm, ecPos, eye, l );      }      else {        SpotLight( finalDiffuse, finalSpecular, norm, ecPos, eye, l );      }    }   if( usingMat == false ) {     frontColor = vec4(       vec3(col) * finalAmbient +       vec3(col) * finalDiffuse +       vec3(col) * finalSpecular,       col[3] );   }   else{     frontColor = vec4(        mat_emissive +        (vec3(col) * mat_ambient * finalAmbient) +        (vec3(col) * finalDiffuse) +        (mat_specular * finalSpecular),        col[3] );    }  }  vTexture.xy = aTexture.xy;  gl_Position = projection * view * model * vec4( Vertex, 1.0 );}",
"#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 frontColor;uniform sampler2D sampler;uniform bool usingTexture;varying vec2 vTexture;void main(void){  if(usingTexture){    gl_FragColor =  vec4(texture2D(sampler, vTexture.xy));  }  else{    gl_FragColor = frontColor;  }}");Ga=Pc(i,"varying vec4 frontColor;attribute vec3 aVertex;attribute vec4 aColor;uniform mat4 uView;uniform mat4 uProjection;void main(void) {  frontColor = aColor;  gl_Position = uProjection * uView * vec4(aVertex, 1.0);}",
"#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 frontColor;void main(void){  gl_FragColor = frontColor;}");i.useProgram(x);I("usingTexture3d",x,"usingTexture",ya);d.lightFalloff(1,0,0);d.shininess(1);d.ambient(255,255,255);d.specular(0,0,0);Bc=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,Bc);i.bufferData(i.ARRAY_BUFFER,qd,i.STATIC_DRAW);Cc=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,Cc);i.bufferData(i.ARRAY_BUFFER,Fd,i.STATIC_DRAW);Dc=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,Dc);
i.bufferData(i.ARRAY_BUFFER,rd,i.STATIC_DRAW);Yb=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,Yb);i.bufferData(i.ARRAY_BUFFER,Oc,i.STATIC_DRAW);Ec=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,Ec);i.bufferData(i.ARRAY_BUFFER,Gd,i.STATIC_DRAW);Bb=i.createBuffer();Fc=i.createBuffer();fd=i.createBuffer();Gc=i.createBuffer();gd=i.createBuffer();hd=i.createBuffer();Zb=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,Zb);i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,0,0]),i.STATIC_DRAW);nc=i.createBuffer();
i.bindBuffer(i.ARRAY_BUFFER,nc);i.bufferData(i.ARRAY_BUFFER,new Float32Array([1,1,0,-1,1,0,-1,-1,0,1,-1,0]),i.STATIC_DRAW);oc=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,oc);i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),i.STATIC_DRAW);pc=i.createBuffer();i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,pc);i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,2,3,0]),i.STATIC_DRAW);jb=new D;Oa=new D;Aa=new D;Ba=new D;U=new D;Cb=new D;ia=new D;d.camera();d.perspective();Aa=U;Ba=Cb;bc=new mb;
Ab=new D;Xb=new D;ub=new D;vb=new D;zc=new D;Ac=new D;Ac.set(-1,3,-3,1,3,-6,3,0,-3,3,0,0,1,0,0,0)}else throw"WebGL context is not supported on this browser.";d.stroke(0);d.fill(255)}else if(i===v){i=q.getContext("2d");d.use3DContext=false;bc=new mb;U=new Pa}e={fillStyle:i.fillStyle,strokeStyle:i.strokeStyle,lineCap:i.lineCap,lineJoin:i.lineJoin};if(q.style.length>0){q.style.removeProperty("width");q.style.removeProperty("height")}q.width=d.width=b||100;q.height=d.height=c||100;for(var g in e)if(e)i[g]=
e[g];this.textSize(N);xb();ld=Math.max(1E3,b*c*0.05);d.externals.context=i}}();d.ambientLight=function(a,b,c,e,f,g){if(d.use3DContext){if(K===h.MAX_LIGHTS)throw"can only create "+h.MAX_LIGHTS+" lights";e=new sa(e,f,g);f=new D;f.scale(1,-1,1);f.apply(U.array());f.mult(e,e);i.useProgram(x);A("lights.color.3d."+K,x,"lights"+K+".color",[a/255,b/255,c/255]);A("lights.position.3d."+K,x,"lights"+K+".position",e.array());I("lights.type.3d."+K,x,"lights"+K+".type",0);I("lightCount3d",x,"lightCount",++K)}};
d.directionalLight=function(a,b,c,e,f,g){if(d.use3DContext){if(K===h.MAX_LIGHTS)throw"can only create "+h.MAX_LIGHTS+" lights";i.useProgram(x);e=[e,f,g,-1.0E-11];f=new D;f.set(U.array());f.mult(e,e);A("lights.color.3d."+K,x,"lights"+K+".color",[a/255,b/255,c/255]);A("lights.position.3d."+K,x,"lights"+K+".position",[e[0],-e[1],e[2]]);I("lights.type.3d."+K,x,"lights"+K+".type",1);I("lightCount3d",x,"lightCount",++K)}};d.lightFalloff=function(a,b,c){if(d.use3DContext){i.useProgram(x);A("falloff3d",x,
"falloff",[a,b,c])}};d.lightSpecular=function(a,b,c){if(d.use3DContext){i.useProgram(x);A("specular3d",x,"specular",[a/255,b/255,c/255])}};d.lights=function(){d.ambientLight(128,128,128);d.directionalLight(128,128,128,0,0,-1);d.lightFalloff(1,0,0);d.lightSpecular(0,0,0)};d.pointLight=function(a,b,c,e,f,g){if(d.use3DContext){if(K===h.MAX_LIGHTS)throw"can only create "+h.MAX_LIGHTS+" lights";e=new sa(e,f,g);f=new D;f.scale(1,-1,1);f.apply(U.array());f.mult(e,e);i.useProgram(x);A("lights.color.3d."+
K,x,"lights"+K+".color",[a/255,b/255,c/255]);A("lights.position.3d."+K,x,"lights"+K+".position",e.array());I("lights.type.3d."+K,x,"lights"+K+".type",2);I("lightCount3d",x,"lightCount",++K)}};d.noLights=function(){if(d.use3DContext){K=0;i.useProgram(x);I("lightCount3d",x,"lightCount",K)}};d.spotLight=function(a,b,c,e,f,g,k,j,l,p,o){if(d.use3DContext){if(K===h.MAX_LIGHTS)throw"can only create "+h.MAX_LIGHTS+" lights";i.useProgram(x);e=new sa(e,f,g);f=new D;f.scale(1,-1,1);f.apply(U.array());f.mult(e,
e);k=[k,j,l,-1.0E-8];f.set(U.array());f.mult(k,k);A("lights.color.3d."+K,x,"lights"+K+".color",[a/255,b/255,c/255]);A("lights.position.3d."+K,x,"lights"+K+".position",e.array());A("lights.direction.3d."+K,x,"lights"+K+".direction",[k[0],-k[1],k[2]]);A("lights.concentration.3d."+K,x,"lights"+K+".concentration",o);A("lights.angle.3d."+K,x,"lights"+K+".angle",p);I("lights.type.3d."+K,x,"lights"+K+".type",3);I("lightCount3d",x,"lightCount",++K)}};d.beginCamera=function(){if(cc)throw"You cannot call beginCamera() again before calling endCamera()";
else{cc=true;Aa=Oa;Ba=jb}};d.endCamera=function(){if(cc){U.set(jb);Cb.set(Oa);Aa=U;Ba=Cb;cc=false}else throw"You cannot call endCamera() before calling beginCamera()";};d.camera=function(a,b,c,e,f,g,k,j,l){if(arguments.length===0){Lc=q.width/2;kb=q.height/2;lb=kb/Math.tan(dc/2);a=Lc;b=kb;c=lb;e=Lc;f=kb;k=g=0;j=1;l=0}var p=new sa(a-e,b-f,c-g),o=new sa(k,j,l);p.normalize();var s=sa.cross(o,p);o=sa.cross(p,s);s.normalize();o.normalize();jb.set(s.x,s.y,s.z,0,o.x,o.y,o.z,0,p.x,p.y,p.z,0,0,0,0,1);jb.translate(-a,
-b,-c);Oa.reset();Oa.invApply(s.x,s.y,s.z,0,o.x,o.y,o.z,0,p.x,p.y,p.z,0,0,0,0,1);Oa.translate(a,b,c);U.set(jb);Cb.set(Oa)};d.perspective=function(a,b,c,e){if(arguments.length===0){kb=q.height/2;lb=kb/Math.tan(dc/2);md=lb/10;nd=lb*10;od=q.width/q.height;a=dc;b=od;c=md;e=nd}var f,g;f=c*Math.tan(a/2);g=-f;d.frustum(g*b,f*b,g,f,c,e)};d.frustum=function(a,b,c,e,f,g){ia=new D;ia.set(2*f/(b-a),0,(b+a)/(b-a),0,0,2*f/(e-c),(e+c)/(e-c),0,0,0,-(g+f)/(g-f),-(2*g*f)/(g-f),0,0,-1,0)};d.ortho=function(a,b,c,e,f,
g){if(arguments.length===0){a=0;b=d.width;c=0;e=d.height;f=-10;g=10}var k=2/(b-a),j=2/(e-c),l=-2/(g-f),p=-(b+a)/(b-a),o=-(e+c)/(e-c),s=-(g+f)/(g-f);ia=new D;ia.set(k,0,0,p,0,j,0,o,0,0,l,s,0,0,0,1)};d.printProjection=function(){ia.print()};d.printCamera=function(){jb.print()};d.box=function(a,b,c){if(d.use3DContext){if(!b||!c)b=c=a;var e=new D;e.scale(a,b,c);a=new D;a.scale(1,-1,1);a.apply(U.array());a.transpose();b=new D;b.set(ia);b.transpose();if(V===true){i.useProgram(x);y("model3d",x,"model",false,
e.array());y("view3d",x,"view",false,a.array());y("projection3d",x,"projection",false,b.array());i.enable(i.POLYGON_OFFSET_FILL);i.polygonOffset(1,1);A("color3d",x,"color",xa);c=new D;c.set(a);var f=new D;f.set(e);c.mult(f);f=new D;f.set(c);f.invert();f.transpose();y("normalTransform3d",x,"normalTransform",false,f.array());u("vertex3d",x,"Vertex",3,Bc);u("normal3d",x,"Normal",3,Cc);P("aColor3d",x,"aColor");P("aTexture3d",x,"aTexture");i.drawArrays(i.TRIANGLES,0,qd.length/3);i.disable(i.POLYGON_OFFSET_FILL)}if(pa>
0&&Q){i.useProgram(J);y("model2d",J,"model",false,e.array());y("view2d",J,"view",false,a.array());y("projection2d",J,"projection",false,b.array());A("color2d",J,"color",va);I("picktype2d",J,"picktype",0);u("vertex2d",J,"Vertex",3,Dc);P("aTextureCoord2d",J,"aTextureCoord");i.lineWidth(pa);i.drawArrays(i.LINES,0,rd.length/3)}}};d.sphereDetail=function(a,b){var c;if(arguments.length===1)a=b=arguments[0];if(a<3)a=3;if(b<2)b=2;if(!(a===ib&&b===ac)){var e=h.SINCOS_LENGTH/a,f=new Float32Array(a),g=new Float32Array(a);
for(c=0;c<a;c++){f[c]=Kc[parseInt(c*e%h.SINCOS_LENGTH,10)];g[c]=Jc[parseInt(c*e%h.SINCOS_LENGTH,10)]}c=a*(b-1)+2;e=0;La=new Float32Array(c);Ma=new Float32Array(c);Na=new Float32Array(c);var k=h.SINCOS_LENGTH*0.5/b,j=k;for(c=1;c<b;c++){for(var l=Jc[parseInt(j%h.SINCOS_LENGTH,10)],p=-Kc[parseInt(j%h.SINCOS_LENGTH,10)],o=0;o<a;o++){La[e]=f[o]*l;Ma[e]=p;Na[e++]=g[o]*l}j+=k}ib=a;ac=b;L=[];for(f=0;f<ib;f++){L.push(0);L.push(-1);L.push(0);L.push(La[f]);L.push(Ma[f]);L.push(Na[f])}L.push(0);L.push(-1);L.push(0);
L.push(La[0]);L.push(Ma[0]);L.push(Na[0]);k=0;for(f=2;f<ac;f++){g=c=k;k+=ib;e=k;for(j=0;j<ib;j++){L.push(parseFloat(La[g]));L.push(parseFloat(Ma[g]));L.push(parseFloat(Na[g++]));L.push(parseFloat(La[e]));L.push(parseFloat(Ma[e]));L.push(parseFloat(Na[e++]))}g=c;e=k;L.push(parseFloat(La[g]));L.push(parseFloat(Ma[g]));L.push(parseFloat(Na[g]));L.push(parseFloat(La[e]));L.push(parseFloat(Ma[e]));L.push(parseFloat(Na[e]))}for(f=0;f<ib;f++){e=k+f;L.push(parseFloat(La[e]));L.push(parseFloat(Ma[e]));L.push(parseFloat(Na[e]));
L.push(0);L.push(1);L.push(0)}L.push(parseFloat(La[k]));L.push(parseFloat(Ma[k]));L.push(parseFloat(Na[k]));L.push(0);L.push(1);L.push(0);i.bindBuffer(i.ARRAY_BUFFER,Bb);i.bufferData(i.ARRAY_BUFFER,new Float32Array(L),i.STATIC_DRAW)}};d.sphere=function(a){if(d.use3DContext){if(ib<3||ac<2)d.sphereDetail(30);var b=new D;b.scale(a,a,a);a=new D;a.scale(1,-1,1);a.apply(U.array());a.transpose();var c=new D;c.set(ia);c.transpose();if(V===true){var e=new D;e.set(a);var f=new D;f.set(b);e.mult(f);f=new D;
f.set(e);f.invert();f.transpose();i.useProgram(x);P("aTexture3d",x,"aTexture");y("model3d",x,"model",false,b.array());y("view3d",x,"view",false,a.array());y("projection3d",x,"projection",false,c.array());y("normalTransform3d",x,"normalTransform",false,f.array());u("vertex3d",x,"Vertex",3,Bb);u("normal3d",x,"Normal",3,Bb);P("aColor3d",x,"aColor");i.enable(i.POLYGON_OFFSET_FILL);i.polygonOffset(1,1);A("color3d",x,"color",xa);i.drawArrays(i.TRIANGLE_STRIP,0,L.length/3);i.disable(i.POLYGON_OFFSET_FILL)}if(pa>
0&&Q){i.useProgram(J);y("model2d",J,"model",false,b.array());y("view2d",J,"view",false,a.array());y("projection2d",J,"projection",false,c.array());u("vertex2d",J,"Vertex",3,Bb);P("aTextureCoord2d",J,"aTextureCoord");A("color2d",J,"color",va);I("picktype2d",J,"picktype",0);i.lineWidth(pa);i.drawArrays(i.LINE_STRIP,0,L.length/3)}}};d.modelX=function(a,b,c){var e=U.array(),f=Oa.array(),g=e[0]*a+e[1]*b+e[2]*c+e[3],k=e[4]*a+e[5]*b+e[6]*c+e[7],j=e[8]*a+e[9]*b+e[10]*c+e[11];b=e[12]*a+e[13]*b+e[14]*c+e[15];
a=f[0]*g+f[1]*k+f[2]*j+f[3]*b;f=f[12]*g+f[13]*k+f[14]*j+f[15]*b;return f!==0?a/f:a};d.modelY=function(a,b,c){var e=U.array(),f=Oa.array(),g=e[0]*a+e[1]*b+e[2]*c+e[3],k=e[4]*a+e[5]*b+e[6]*c+e[7],j=e[8]*a+e[9]*b+e[10]*c+e[11];b=e[12]*a+e[13]*b+e[14]*c+e[15];a=f[4]*g+f[5]*k+f[6]*j+f[7]*b;f=f[12]*g+f[13]*k+f[14]*j+f[15]*b;return f!==0?a/f:a};d.modelZ=function(a,b,c){var e=U.array(),f=Oa.array(),g=e[0]*a+e[1]*b+e[2]*c+e[3],k=e[4]*a+e[5]*b+e[6]*c+e[7],j=e[8]*a+e[9]*b+e[10]*c+e[11];b=e[12]*a+e[13]*b+e[14]*
c+e[15];a=f[8]*g+f[9]*k+f[10]*j+f[11]*b;f=f[12]*g+f[13]*k+f[14]*j+f[15]*b;return f!==0?a/f:a};d.ambient=function(){var a=arguments;if(d.use3DContext){i.useProgram(x);I("usingMat3d",x,"usingMat",true);if(a.length===1)if(typeof a[0]==="string"){a=a[0].slice(5,-1).split(",");A("mat_ambient3d",x,"mat_ambient",[a[0]/255,a[1]/255,a[2]/255])}else A("mat_ambient3d",x,"mat_ambient",[a[0]/255,a[0]/255,a[0]/255]);else A("mat_ambient3d",x,"mat_ambient",[a[0]/255,a[1]/255,a[2]/255])}};d.emissive=function(){var a=
arguments;if(d.use3DContext){i.useProgram(x);I("usingMat3d",x,"usingMat",true);if(a.length===1)if(typeof a[0]==="string"){a=a[0].slice(5,-1).split(",");A("mat_emissive3d",x,"mat_emissive",[a[0]/255,a[1]/255,a[2]/255])}else A("mat_emissive3d",x,"mat_emissive",[a[0]/255,a[0]/255,a[0]/255]);else A("mat_emissive3d",x,"mat_emissive",[a[0]/255,a[1]/255,a[2]/255])}};d.shininess=function(a){if(d.use3DContext){i.useProgram(x);I("usingMat3d",x,"usingMat",true);A("shininess3d",x,"shininess",a)}};d.specular=
function(){var a=d.color.apply(this,arguments);if(d.use3DContext){i.useProgram(x);I("usingMat3d",x,"usingMat",true);A("mat_specular3d",x,"mat_specular",d.color.toGLArray(a).slice(0,3))}};d.screenX=function(a,b,c){var e=U.array(),f=ia.array(),g=e[0]*a+e[1]*b+e[2]*c+e[3],k=e[4]*a+e[5]*b+e[6]*c+e[7],j=e[8]*a+e[9]*b+e[10]*c+e[11];b=e[12]*a+e[13]*b+e[14]*c+e[15];a=f[0]*g+f[1]*k+f[2]*j+f[3]*b;f=f[12]*g+f[13]*k+f[14]*j+f[15]*b;if(f!==0)a/=f;return d.width*(1+a)/2};d.screenY=function(a,b,c){var e=U.array(),
f=ia.array(),g=e[0]*a+e[1]*b+e[2]*c+e[3],k=e[4]*a+e[5]*b+e[6]*c+e[7],j=e[8]*a+e[9]*b+e[10]*c+e[11];b=e[12]*a+e[13]*b+e[14]*c+e[15];a=f[4]*g+f[5]*k+f[6]*j+f[7]*b;f=f[12]*g+f[13]*k+f[14]*j+f[15]*b;if(f!==0)a/=f;return d.height*(1+a)/2};d.screenZ=function(a,b,c){var e=U.array(),f=ia.array(),g=e[0]*a+e[1]*b+e[2]*c+e[3],k=e[4]*a+e[5]*b+e[6]*c+e[7],j=e[8]*a+e[9]*b+e[10]*c+e[11];b=e[12]*a+e[13]*b+e[14]*c+e[15];a=f[8]*g+f[9]*k+f[10]*j+f[11]*b;f=f[12]*g+f[13]*k+f[14]*j+f[15]*b;if(f!==0)a/=f;return(a+1)/2};
d.fill=function(a,b,c,e){a=d.color(a,b,c,e);if(!(a===Xa&&V)){V=true;Xa=a;if(d.use3DContext)xa=d.color.toGLArray(a);else Ha=true}};d.noFill=function(){V=false};d.stroke=function(a,b,c,e){a=d.color(a,b,c,e);if(!(a===na&&Q)){Q=true;na=a;if(d.use3DContext)va=d.color.toGLArray(a);else Ib=true}};d.noStroke=function(){Q=false};d.strokeWeight=function(a){pa=a;if(d.use3DContext){i.useProgram(J);A("pointSize2d",J,"pointSize",a)}else i.lineWidth=a};d.strokeCap=function(a){i.lineCap=a};d.strokeJoin=function(a){i.lineJoin=
a};d.smooth=function(){q.style.setProperty("image-rendering","optimizeQuality","important");if(!d.use3DContext&&"mozImageSmoothingEnabled"in i)i.mozImageSmoothingEnabled=true};d.noSmooth=function(){q.style.setProperty("image-rendering","optimizeSpeed","important");if(!d.use3DContext&&"mozImageSmoothingEnabled"in i)i.mozImageSmoothingEnabled=false};d.point=function(a,b,c){if(d.use3DContext){var e=new D;e.translate(a,b,c||0);e.transpose();a=new D;a.scale(1,-1,1);a.apply(U.array());a.transpose();b=new D;
b.set(ia);b.transpose();i.useProgram(J);y("model2d",J,"model",false,e.array());y("view2d",J,"view",false,a.array());y("projection2d",J,"projection",false,b.array());if(pa>0&&Q){A("color2d",J,"color",va);I("picktype2d",J,"picktype",0);u("vertex2d",J,"Vertex",3,Zb);P("aTextureCoord2d",J,"aTextureCoord");i.drawArrays(i.POINTS,0,1)}}else if(Q)if(aa.options.crispLines){e=Math.PI/4;c=d.get(a,b);d.set(a,b,Ya(c,na,e))}else if(pa>1){i.fillStyle=d.color.toString(na);Ha=true;i.beginPath();i.arc(a,b,pa/2,0,h.TWO_PI,
false);i.fill();i.closePath()}else{i.fillStyle=d.color.toString(na);i.fillRect(Math.round(a),Math.round(b),1,1);Ha=true}};d.beginShape=function(a){da=a;m=[]};d.vertex=function(){var a=[];if(ec)ec=false;if(arguments.length===4){a[0]=arguments[0];a[1]=arguments[1];a[2]=0;a[3]=arguments[2];a[4]=arguments[3]}else{a[0]=arguments[0];a[1]=arguments[1];a[2]=arguments[2]||0;a[3]=arguments[3]||0;a[4]=arguments[4]||0}a.isVert=true;if(d.use3DContext){a[5]=xa[0];a[6]=xa[1];a[7]=xa[2];a[8]=xa[3];a[9]=va[0];a[10]=
va[1];a[11]=va[2];a[12]=va[3];a[13]=sc;a[14]=tc;a[15]=uc}else{a[5]=Xa;a[6]=na}m.push(a)};var vd=function(a,b){var c=new D;c.scale(1,-1,1);c.apply(U.array());c.transpose();var e=new D;e.set(ia);e.transpose();i.useProgram(Ga);y("uViewUS",Ga,"uView",false,c.array());y("uProjectionUS",Ga,"uProjection",false,e.array());u("aVertexUS",Ga,"aVertex",3,Zb);i.bufferData(i.ARRAY_BUFFER,new Float32Array(a),i.STREAM_DRAW);u("aColorUS",Ga,"aColor",4,Gc);i.bufferData(i.ARRAY_BUFFER,new Float32Array(b),i.STREAM_DRAW);
i.drawArrays(i.POINTS,0,a.length/3)},Ca=function(a,b,c){b=b==="LINES"?i.LINES:b==="LINE_LOOP"?i.LINE_LOOP:i.LINE_STRIP;var e=new D;e.scale(1,-1,1);e.apply(U.array());e.transpose();var f=new D;f.set(ia);f.transpose();i.useProgram(Ga);y("uViewUS",Ga,"uView",false,e.array());y("uProjectionUS",Ga,"uProjection",false,f.array());u("aVertexUS",Ga,"aVertex",3,Fc);i.bufferData(i.ARRAY_BUFFER,new Float32Array(a),i.STREAM_DRAW);u("aColorUS",Ga,"aColor",4,gd);i.bufferData(i.ARRAY_BUFFER,new Float32Array(c),i.STREAM_DRAW);
i.lineWidth(pa);i.drawArrays(b,0,a.length/3)},Ua=function(a,b,c,e){b=b==="TRIANGLES"?i.TRIANGLES:b==="TRIANGLE_FAN"?i.TRIANGLE_FAN:i.TRIANGLE_STRIP;var f=new D;f.scale(1,-1,1);f.apply(U.array());f.transpose();var g=new D;g.set(ia);g.transpose();i.useProgram(x);y("model3d",x,"model",false,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);y("view3d",x,"view",false,f.array());y("projection3d",x,"projection",false,g.array());i.enable(i.POLYGON_OFFSET_FILL);i.polygonOffset(1,1);A("color3d",x,"color",[-1,0,0,0]);u("vertex3d",
x,"Vertex",3,fd);i.bufferData(i.ARRAY_BUFFER,new Float32Array(a),i.STREAM_DRAW);u("aColor3d",x,"aColor",4,Gc);i.bufferData(i.ARRAY_BUFFER,new Float32Array(c),i.STREAM_DRAW);P("normal3d",x,"Normal");if(ya){if(jd===h.IMAGE)for(c=0;c<e.length;c+=2){e[c]/=$b.width;e[c+1]/=$b.height}for(c=0;c<e.length;c+=2){if(e[c+0]>1)e[c+0]-=e[c+0]-1;if(e[c+1]>1)e[c+1]-=e[c+1]-1}I("usingTexture3d",x,"usingTexture",ya);u("aTexture3d",x,"aTexture",2,hd);i.bufferData(i.ARRAY_BUFFER,new Float32Array(e),i.STREAM_DRAW)}i.drawArrays(b,
0,a.length/3);i.disable(i.POLYGON_OFFSET_FILL)};d.endShape=function(a){var b=a===h.CLOSE,c=[],e=[],f=[],g=[],k=[];ec=true;var j;for(a=0;a<m.length;a++)for(j=0;j<3;j++)e.push(m[a][j]);for(a=0;a<m.length;a++)for(j=5;j<9;j++)f.push(m[a][j]);for(a=0;a<m.length;a++)for(j=9;j<13;j++)g.push(m[a][j]);for(a=0;a<m.length;a++){k.push(m[a][3]);k.push(m[a][4])}if(b){e.push(m[0][0]);e.push(m[0][1]);e.push(m[0][2]);for(a=5;a<9;a++)f.push(m[0][a]);for(a=9;a<13;a++)g.push(m[0][a]);k.push(m[0][3]);k.push(m[0][4])}if(Mc&&
(da===h.POLYGON||da===v))if(d.use3DContext){Q&&Ca(e,null,g);V&&Ua(e,null,f)}else{if(m.length>3){c=[];e=1-vc;i.beginPath();i.moveTo(m[1][0],m[1][1]);for(a=1;a+2<m.length;a++){c[0]=[m[a][0],m[a][1]];c[1]=[m[a][0]+(e*m[a+1][0]-e*m[a-1][0])/6,m[a][1]+(e*m[a+1][1]-e*m[a-1][1])/6];c[2]=[m[a+1][0]+(e*m[a][0]-e*m[a+2][0])/6,m[a+1][1]+(e*m[a][1]-e*m[a+2][1])/6];c[3]=[m[a+1][0],m[a+1][1]];i.bezierCurveTo(c[1][0],c[1][1],c[2][0],c[2][1],c[3][0],c[3][1])}b&&i.lineTo(m[0][0],m[0][1]);W();ma();i.closePath()}}else if(Nc&&
(da===h.POLYGON||da===v))if(d.use3DContext){c=e;c.splice(c.length-3);g.splice(g.length-4);Q&&Ca(c,null,g);V&&Ua(e,"TRIANGLES",f)}else{i.beginPath();for(a=0;a<m.length;a++)if(m[a].isVert===true)if(m[a].moveTo===true)i.moveTo(m[a][0],m[a][1]);else m[a].moveTo===false?i.lineTo(m[a][0],m[a][1]):i.moveTo(m[a][0],m[a][1]);else i.bezierCurveTo(m[a][0],m[a][1],m[a][2],m[a][3],m[a][4],m[a][5]);b&&i.lineTo(m[0][0],m[0][1]);W();ma();i.closePath()}else if(d.use3DContext){if(da===h.POINTS){for(a=0;a<m.length;a++)for(j=
0;j<3;j++)c.push(m[a][j]);vd(c,g)}else if(da===h.LINES){for(a=0;a<m.length;a++)for(j=0;j<3;j++)c.push(m[a][j]);for(a=0;a<m.length;a++)for(j=5;j<9;j++)f.push(m[a][j]);Ca(c,"LINES",g)}else if(da===h.TRIANGLES){if(m.length>2)for(a=0;a+2<m.length;a+=3){e=[];k=[];c=[];f=[];g=[];for(j=0;j<3;j++)for(b=0;b<3;b++){c.push(m[a+j][b]);e.push(m[a+j][b])}for(j=0;j<3;j++)for(b=3;b<5;b++)k.push(m[a+j][b]);for(j=0;j<3;j++)for(b=5;b<9;b++){f.push(m[a+j][b]);g.push(m[a+j][b+4])}Q&&Ca(c,"LINE_LOOP",g);if(V||ya)Ua(e,
"TRIANGLES",f,k)}}else if(da===h.TRIANGLE_STRIP){if(m.length>2)for(a=0;a+2<m.length;a++){c=[];e=[];g=[];f=[];k=[];for(j=0;j<3;j++)for(b=0;b<3;b++){c.push(m[a+j][b]);e.push(m[a+j][b])}for(j=0;j<3;j++)for(b=3;b<5;b++)k.push(m[a+j][b]);for(j=0;j<3;j++)for(b=5;b<9;b++){g.push(m[a+j][b+4]);f.push(m[a+j][b])}if(V||ya)Ua(e,"TRIANGLE_STRIP",f,k);Q&&Ca(c,"LINE_LOOP",g)}}else if(da===h.TRIANGLE_FAN){if(m.length>2){for(a=0;a<3;a++)for(j=0;j<3;j++)c.push(m[a][j]);for(a=0;a<3;a++)for(j=9;j<13;j++)g.push(m[a][j]);
Q&&Ca(c,"LINE_LOOP",g);for(a=2;a+1<m.length;a++){c=[];g=[];c.push(m[0][0]);c.push(m[0][1]);c.push(m[0][2]);g.push(m[0][9]);g.push(m[0][10]);g.push(m[0][11]);g.push(m[0][12]);for(j=0;j<2;j++)for(b=0;b<3;b++)c.push(m[a+j][b]);for(j=0;j<2;j++)for(b=9;b<13;b++)g.push(m[a+j][b]);Q&&Ca(c,"LINE_STRIP",g)}if(V||ya)Ua(e,"TRIANGLE_FAN",f,k)}}else if(da===h.QUADS)for(a=0;a+3<m.length;a+=4){c=[];for(j=0;j<4;j++)for(b=0;b<3;b++)c.push(m[a+j][b]);Q&&Ca(c,"LINE_LOOP",g);if(V){e=[];f=[];k=[];for(j=0;j<3;j++)e.push(m[a][j]);
for(j=5;j<9;j++)f.push(m[a][j]);for(j=0;j<3;j++)e.push(m[a+1][j]);for(j=5;j<9;j++)f.push(m[a+1][j]);for(j=0;j<3;j++)e.push(m[a+3][j]);for(j=5;j<9;j++)f.push(m[a+3][j]);for(j=0;j<3;j++)e.push(m[a+2][j]);for(j=5;j<9;j++)f.push(m[a+2][j]);if(ya){k.push(m[a+0][3]);k.push(m[a+0][4]);k.push(m[a+1][3]);k.push(m[a+1][4]);k.push(m[a+3][3]);k.push(m[a+3][4]);k.push(m[a+2][3]);k.push(m[a+2][4])}Ua(e,"TRIANGLE_STRIP",f,k)}}else if(da===h.QUAD_STRIP){if(m.length>3){for(a=0;a<2;a++)for(j=0;j<3;j++)c.push(m[a][j]);
for(a=0;a<2;a++)for(j=9;j<13;j++)g.push(m[a][j]);Ca(c,"LINE_STRIP",g);if(m.length>4&&m.length%2>0){e.splice(e.length-3);m.pop()}for(a=0;a+3<m.length;a+=2){c=[];g=[];for(j=0;j<3;j++)c.push(m[a+1][j]);for(j=0;j<3;j++)c.push(m[a+3][j]);for(j=0;j<3;j++)c.push(m[a+2][j]);for(j=0;j<3;j++)c.push(m[a+0][j]);for(j=9;j<13;j++)g.push(m[a+1][j]);for(j=9;j<13;j++)g.push(m[a+3][j]);for(j=9;j<13;j++)g.push(m[a+2][j]);for(j=9;j<13;j++)g.push(m[a+0][j]);Q&&Ca(c,"LINE_STRIP",g)}if(V||ya)Ua(e,"TRIANGLE_LIST",f,k)}}else if(m.length===
1){for(j=0;j<3;j++)c.push(m[0][j]);for(j=9;j<13;j++)g.push(m[0][j]);vd(c,g)}else{for(a=0;a<m.length;a++){for(j=0;j<3;j++)c.push(m[a][j]);for(j=5;j<9;j++)g.push(m[a][j])}b?Ca(c,"LINE_LOOP",g):Ca(c,"LINE_STRIP",g);if(V||ya)Ua(e,"TRIANGLE_FAN",f,k)}ya=false;i.useProgram(x);I("usingTexture3d",x,"usingTexture",ya)}else if(da===h.POINTS)for(a=0;a<m.length;a++){Q&&d.stroke(m[a][6]);d.point(m[a][0],m[a][1])}else if(da===h.LINES)for(a=0;a+1<m.length;a+=2){Q&&d.stroke(m[a+1][6]);d.line(m[a][0],m[a][1],m[a+
1][0],m[a+1][1])}else if(da===h.TRIANGLES)for(a=0;a+2<m.length;a+=3){i.beginPath();i.moveTo(m[a][0],m[a][1]);i.lineTo(m[a+1][0],m[a+1][1]);i.lineTo(m[a+2][0],m[a+2][1]);i.lineTo(m[a][0],m[a][1]);if(V){d.fill(m[a+2][5]);W()}if(Q){d.stroke(m[a+2][6]);ma()}i.closePath()}else if(da===h.TRIANGLE_STRIP)for(a=0;a+1<m.length;a++){i.beginPath();i.moveTo(m[a+1][0],m[a+1][1]);i.lineTo(m[a][0],m[a][1]);Q&&d.stroke(m[a+1][6]);V&&d.fill(m[a+1][5]);if(a+2<m.length){i.lineTo(m[a+2][0],m[a+2][1]);Q&&d.stroke(m[a+
2][6]);V&&d.fill(m[a+2][5])}W();ma();i.closePath()}else if(da===h.TRIANGLE_FAN){if(m.length>2){i.beginPath();i.moveTo(m[0][0],m[0][1]);i.lineTo(m[1][0],m[1][1]);i.lineTo(m[2][0],m[2][1]);if(V){d.fill(m[2][5]);W()}if(Q){d.stroke(m[2][6]);ma()}i.closePath();for(a=3;a<m.length;a++){i.beginPath();i.moveTo(m[0][0],m[0][1]);i.lineTo(m[a-1][0],m[a-1][1]);i.lineTo(m[a][0],m[a][1]);if(V){d.fill(m[a][5]);W()}if(Q){d.stroke(m[a][6]);ma()}i.closePath()}}}else if(da===h.QUADS)for(a=0;a+3<m.length;a+=4){i.beginPath();
i.moveTo(m[a][0],m[a][1]);for(j=1;j<4;j++)i.lineTo(m[a+j][0],m[a+j][1]);i.lineTo(m[a][0],m[a][1]);if(V){d.fill(m[a+3][5]);W()}if(Q){d.stroke(m[a+3][6]);ma()}i.closePath()}else if(da===h.QUAD_STRIP){if(m.length>3)for(a=0;a+1<m.length;a+=2){i.beginPath();if(a+3<m.length){i.moveTo(m[a+2][0],m[a+2][1]);i.lineTo(m[a][0],m[a][1]);i.lineTo(m[a+1][0],m[a+1][1]);i.lineTo(m[a+3][0],m[a+3][1]);V&&d.fill(m[a+3][5]);Q&&d.stroke(m[a+3][6])}else{i.moveTo(m[a][0],m[a][1]);i.lineTo(m[a+1][0],m[a+1][1])}W();ma();i.closePath()}}else{i.beginPath();
i.moveTo(m[0][0],m[0][1]);for(a=1;a<m.length;a++)if(m[a].isVert===true)m[a].moveTo===true?i.moveTo(m[a][0],m[a][1]):i.lineTo(m[a][0],m[a][1]);b&&i.lineTo(m[0][0],m[0][1]);W();ma();i.closePath()}Nc=Mc=false;wa=[];qa=0};var wd=function(a,b){var c=1/a,e=c*c,f=e*c;b.set(0,0,0,1,f,e,c,0,6*f,2*e,0,0,6*f,0,0,0)},xd=function(){if(!ub){Ab=new D;ub=new D;dd=true}var a=vc;Ab.set((a-1)/2,(a+3)/2,(-3-a)/2,(1-a)/2,1-a,(-5-a)/2,a+2,(a-1)/2,(a-1)/2,0,(1-a)/2,0,0,1,0,0);wd(wc,ub);zc||(Xb=new D);Xb.set(Ab);Xb.preApply(zc);
ub.apply(Ab)};d.bezierVertex=function(){Nc=true;var a=[];if(ec)throw"vertex() must be used at least once before calling bezierVertex()";else if(arguments.length===9){if(d.use3DContext){if(vb===v)vb=new D;var b=m.length-1;wd(xc,vb);vb.apply(Ac);var c=vb.array();a=m[b][0];var e=m[b][1];b=m[b][2];var f=c[4]*a+c[5]*arguments[0]+c[6]*arguments[3]+c[7]*arguments[6],g=c[8]*a+c[9]*arguments[0]+c[10]*arguments[3]+c[11]*arguments[6],k=c[12]*a+c[13]*arguments[0]+c[14]*arguments[3]+c[15]*arguments[6],j=c[4]*
e+c[5]*arguments[1]+c[6]*arguments[4]+c[7]*arguments[7],l=c[8]*e+c[9]*arguments[1]+c[10]*arguments[4]+c[11]*arguments[7],p=c[12]*e+c[13]*arguments[1]+c[14]*arguments[4]+c[15]*arguments[7],o=c[4]*b+c[5]*arguments[2]+c[6]*arguments[5]+c[7]*arguments[8],s=c[8]*b+c[9]*arguments[2]+c[10]*arguments[5]+c[11]*arguments[8];c=c[12]*b+c[13]*arguments[2]+c[14]*arguments[5]+c[15]*arguments[8];for(var n=0;n<xc;n++){a+=f;f+=g;g+=k;e+=j;j+=l;l+=p;b+=o;o+=s;s+=c;d.vertex(a,e,b)}d.vertex(arguments[6],arguments[7],
arguments[8])}}else{for(e=0;e<arguments.length;e++)a[e]=arguments[e];m.push(a);m[m.length-1].isVert=false}};var qb=function(){var a=document.createElement("canvas");try{i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,a);qb=function(c){i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,c)}}catch(b){qb=function(c){i.texImage2D(i.TEXTURE_2D,0,c,false)}}qb.apply(this,arguments)};d.texture=function(a){if(a.localName==="canvas"){i.bindTexture(i.TEXTURE_2D,id);qb(a);i.texParameteri(i.TEXTURE_2D,
i.TEXTURE_MAG_FILTER,i.LINEAR);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR);i.generateMipmap(i.TEXTURE_2D)}else if(a.__texture)i.bindTexture(i.TEXTURE_2D,a.__texture);else{var b=i.createTexture();a.__texture=b;b=document.createElement("canvas");var c;if(a.width&a.width-1===0)b.width=a.width;else{for(c=1;c<a.width;)c*=2;b.width=c}if(a.height&a.height-1===0)b.height=a.height;else{for(c=1;c<a.height;)c*=2;b.height=c}c=b.getContext("2d");for(var e=c.createImageData(b.width,b.height),f=
a.toImageData(),g=0;g<b.width;g+=1)for(var k=0;k<b.height;k+=1){var j=(k*b.width+g)*4;e.data[j+0]=f.data[j+0];e.data[j+1]=f.data[j+1];e.data[j+2]=f.data[j+2];e.data[j+3]=255}c.putImageData(e,0,0);a.__cvs=b;i.bindTexture(i.TEXTURE_2D,a.__texture);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_LINEAR);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE);
qb(a.__cvs);i.generateMipmap(i.TEXTURE_2D)}$b.width=a.width;$b.height=a.height;ya=true;i.useProgram(x);I("usingTexture3d",x,"usingTexture",ya)};d.textureMode=function(a){jd=a};d.curveVertex=function(a,b,c){Mc=true;if(d.use3DContext){dd||xd();var e=[];e[0]=a;e[1]=b;e[2]=c;wa.push(e);qa++;if(qa>3){var f=wa[qa-4][0],g=wa[qa-4][1],k=wa[qa-4][2],j=wa[qa-3][0],l=wa[qa-3][1],p=wa[qa-3][2],o=wa[qa-2][0],s=wa[qa-2][1],n=wa[qa-2][2],w=wa[qa-1][0],E=wa[qa-1][1],C=wa[qa-1][2];a=j;b=l;c=p;var r=ub.array();e=r[4]*
f+r[5]*j+r[6]*o+r[7]*w;var $=r[8]*f+r[9]*j+r[10]*o+r[11]*w;f=r[12]*f+r[13]*j+r[14]*o+r[15]*w;j=r[4]*g+r[5]*l+r[6]*s+r[7]*E;o=r[8]*g+r[9]*l+r[10]*s+r[11]*E;g=r[12]*g+r[13]*l+r[14]*s+r[15]*E;l=r[4]*k+r[5]*p+r[6]*n+r[7]*C;s=r[8]*k+r[9]*p+r[10]*n+r[11]*C;k=r[12]*k+r[13]*p+r[14]*n+r[15]*C;d.vertex(a,b,c);for(p=0;p<wc;p++){a+=e;e+=$;$+=f;b+=j;j+=o;o+=g;c+=l;l+=s;s+=k;d.vertex(a,b,c)}}}else d.vertex(a,b,c)};d.curve=function(){if(arguments.length===8){d.beginShape();d.curveVertex(arguments[0],arguments[1]);
d.curveVertex(arguments[2],arguments[3]);d.curveVertex(arguments[4],arguments[5]);d.curveVertex(arguments[6],arguments[7]);d.endShape()}else if(d.use3DContext){d.beginShape();d.curveVertex(arguments[0],arguments[1],arguments[2]);d.curveVertex(arguments[3],arguments[4],arguments[5]);d.curveVertex(arguments[6],arguments[7],arguments[8]);d.curveVertex(arguments[9],arguments[10],arguments[11]);d.endShape()}};d.curveTightness=function(a){vc=a};d.curveDetail=function(a){wc=a;xd()};d.rectMode=function(a){gb=
a};d.imageMode=function(a){switch(a){case h.CORNER:gc=sd;break;case h.CORNERS:gc=Hd;break;case h.CENTER:gc=Id;break;default:throw"Invalid imageMode";}};d.ellipseMode=function(a){$a=a};d.arc=function(a,b,c,e,f,g){if(!(c<=0||g<f)){if($a===h.CORNERS){c-=a;e-=b}else if($a===h.RADIUS){a-=c;b-=e;c*=2;e*=2}else if($a===h.CENTER){a-=c/2;b-=e/2}for(;f<0;){f+=h.TWO_PI;g+=h.TWO_PI}if(g-f>h.TWO_PI){f=0;g=h.TWO_PI}c/=2;e/=2;a+=c;b+=e;var k,j,l;if(V){var p=Q;Q=false;k=0.5+f/h.TWO_PI*h.SINCOS_LENGTH;l=0.5+g/h.TWO_PI*
h.SINCOS_LENGTH;d.beginShape();for(d.vertex(a,b);k<l;k++){j=k%h.SINCOS_LENGTH;if(j<0)j+=h.SINCOS_LENGTH;d.vertex(a+parseFloat(Math.cos(j*h.DEG_TO_RAD*0.5))*c,b+parseFloat(Math.sin(j*h.DEG_TO_RAD*0.5))*e)}d.endShape(h.CLOSE);Q=p}if(Q){p=V;V=false;k=0.5+f/h.TWO_PI*h.SINCOS_LENGTH;l=0.5+g/h.TWO_PI*h.SINCOS_LENGTH;for(d.beginShape();k<l;k++){j=k%h.SINCOS_LENGTH;if(j<0)j+=h.SINCOS_LENGTH;d.vertex(a+parseFloat(Math.cos(j*h.DEG_TO_RAD*0.5))*c,b+parseFloat(Math.sin(j*h.DEG_TO_RAD*0.5))*e)}d.endShape();V=
p}}};d.line=function(){var a,b,c,e,f,g;if(d.use3DContext){if(arguments.length===6){a=arguments[0];b=arguments[1];c=arguments[2];e=arguments[3];f=arguments[4];g=arguments[5]}else if(arguments.length===4){a=arguments[0];b=arguments[1];c=0;e=arguments[2];f=arguments[3];g=0}a=[a,b,c,e,f,g];b=new D;b.scale(1,-1,1);b.apply(U.array());b.transpose();e=new D;e.set(ia);e.transpose();if(pa>0&&Q){i.useProgram(J);y("model2d",J,"model",false,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);y("view2d",J,"view",false,b.array());
y("projection2d",J,"projection",false,e.array());A("color2d",J,"color",va);I("picktype2d",J,"picktype",0);i.lineWidth(pa);u("vertex2d",J,"Vertex",3,Fc);P("aTextureCoord2d",J,"aTextureCoord");i.bufferData(i.ARRAY_BUFFER,new Float32Array(a),i.STREAM_DRAW);i.drawArrays(i.LINES,0,2)}}else{a=arguments[0];b=arguments[1];e=arguments[2];f=arguments[3];if((a===e||b===f)&&pa<=1&&Q&&aa.options.crispLines)if(a===e){if(b>f){c=b;b=f;f=c}for(;b<=f;++b)d.set(a,b,na)}else{if(a>e){c=a;a=e;e=c}for(;a<=e;++a)d.set(a,
b,na)}else if(Q){i.beginPath();i.moveTo(a||0,b||0);i.lineTo(e||0,f||0);ma();i.closePath()}}};d.bezier=function(){if(arguments.length===8&&!d.use3DContext){d.beginShape();d.vertex(arguments[0],arguments[1]);d.bezierVertex(arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);d.endShape()}else if(arguments.length===12&&d.use3DContext){d.beginShape();d.vertex(arguments[0],arguments[1],arguments[2]);d.bezierVertex(arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],
arguments[8],arguments[9],arguments[10],arguments[11]);d.endShape()}else throw"Please use the proper parameters!";};d.bezierDetail=function(a){xc=a};d.bezierPoint=function(a,b,c,e,f){return(1-f)*(1-f)*(1-f)*a+3*(1-f)*(1-f)*f*b+3*(1-f)*f*f*c+f*f*f*e};d.bezierTangent=function(a,b,c,e,f){return 3*f*f*(-a+3*b-3*c+e)+6*f*(a-2*b+c)+3*(-a+b)};d.curvePoint=function(a,b,c,e,f){return 0.5*(2*b+(-a+c)*f+(2*a-5*b+4*c-e)*f*f+(-a+3*b-3*c+e)*f*f*f)};d.curveTangent=function(a,b,c,e,f){return 0.5*(-a+c+2*(2*a-5*b+
4*c-e)*f+3*(-a+3*b-3*c+e)*f*f)};d.triangle=function(a,b,c,e,f,g){d.beginShape(h.TRIANGLES);d.vertex(a,b,0);d.vertex(c,e,0);d.vertex(f,g,0);d.endShape()};d.quad=function(a,b,c,e,f,g,k,j){d.beginShape(h.QUADS);d.vertex(a,b,0);d.vertex(c,e,0);d.vertex(f,g,0);d.vertex(k,j,0);d.endShape()};d.rect=function(a,b,c,e){if(d.use3DContext){var f=new D;f.translate(a,b,0);f.scale(c,e,1);f.transpose();b=new D;b.scale(1,-1,1);b.apply(U.array());b.transpose();a=new D;a.set(ia);a.transpose();if(pa>0&&Q){i.useProgram(J);
y("model2d",J,"model",false,f.array());y("view2d",J,"view",false,b.array());y("projection2d",J,"projection",false,a.array());A("color2d",J,"color",va);I("picktype2d",J,"picktype",0);u("vertex2d",J,"Vertex",3,Yb);P("aTextureCoord2d",J,"aTextureCoord");i.lineWidth(pa);i.drawArrays(i.LINE_LOOP,0,Oc.length/3)}if(V){i.useProgram(x);y("model3d",x,"model",false,f.array());y("view3d",x,"view",false,b.array());y("projection3d",x,"projection",false,a.array());i.enable(i.POLYGON_OFFSET_FILL);i.polygonOffset(1,
1);A("color3d",x,"color",xa);a=new D;a.set(b);b=new D;b.set(f);a.mult(b);f=new D;f.set(a);f.invert();f.transpose();y("normalTransform3d",x,"normalTransform",false,f.array());u("vertex3d",x,"Vertex",3,Yb);u("normal3d",x,"Normal",3,Ec);i.drawArrays(i.TRIANGLE_FAN,0,Oc.length/3);i.disable(i.POLYGON_OFFSET_FILL)}}else if(c||e)if(Q&&!V&&pa<=1&&aa.options.crispLines){var g=a+c-1,k=b+e-1;for(f=0;f<c;++f){d.set(a+f,b,na);d.set(a+f,k,na)}for(f=0;f<e;++f){d.set(a,b+f,na);d.set(g,b+f,na)}}else{i.beginPath();
if(gb===h.CORNERS){c-=a;e-=b}if(gb===h.RADIUS){c*=2;e*=2}if(gb===h.CENTER||gb===h.RADIUS){a-=c/2;b-=e/2}i.rect(Math.round(a)-0,Math.round(b)-0,Math.round(c)+0,Math.round(e)+0);W();ma();i.closePath()}};d.ellipse=function(a,b,c,e){a=a||0;b=b||0;if(!(c<=0&&e<=0)){if($a===h.RADIUS){c*=2;e*=2}if($a===h.CORNERS){c-=a;e-=b}if($a===h.CORNER||$a===h.CORNERS){a+=c/2;b+=e/2}if(!d.use3DContext&&c===e){i.beginPath();i.arc(a-0,b-0,c/2,0,h.TWO_PI,false);W();ma();i.closePath()}else{c/=2;e/=2;var f=0.5522847498307933*
c,g=0.5522847498307933*e;if(d.use3DContext){d.beginShape();d.vertex(a+c,b);d.bezierVertex(a+c,b-g,0,a+f,b-e,0,a,b-e,0);d.bezierVertex(a-f,b-e,0,a-c,b-g,0,a-c,b,0);d.bezierVertex(a-c,b+g,0,a-f,b+e,0,a,b+e,0);d.bezierVertex(a+f,b+e,0,a+c,b+g,0,a+c,b,0);d.endShape();for(f=e=c=0;f<m.length;f++){c+=m[f][0];e+=m[f][1]}c/=m.length;e/=m.length;f=[];a=[];b=[];f[0]=c;f[1]=e;f[2]=0;f[3]=0;f[4]=0;f[5]=xa[0];f[6]=xa[1];f[7]=xa[2];f[8]=xa[3];f[9]=va[0];f[10]=va[1];f[11]=va[2];f[12]=va[3];f[13]=sc;f[14]=tc;f[15]=
uc;m.unshift(f);for(f=0;f<m.length;f++){for(c=0;c<3;c++)a.push(m[f][c]);for(c=5;c<9;c++)b.push(m[f][c])}Ua(a,"TRIANGLE_FAN",b)}else{d.beginShape();d.vertex(a+c,b);d.bezierVertex(a+c,b-g,a+f,b-e,a,b-e);d.bezierVertex(a-f,b-e,a-c,b-g,a-c,b);d.bezierVertex(a-c,b+g,a-f,b+e,a,b+e);d.bezierVertex(a+f,b+e,a+c,b+g,a+c,b);d.endShape()}}}};d.normal=function(a,b,c){if(arguments.length!==3||!(typeof a==="number"&&typeof b==="number"&&typeof c==="number"))throw"normal() requires three numeric arguments.";sc=a;
tc=b;uc=c;if(da!==0)if(Vb===h.NORMAL_MODE_AUTO)Vb=h.NORMAL_MODE_SHAPE;else if(Vb===h.NORMAL_MODE_SHAPE)Vb=h.NORMAL_MODE_VERTEX};d.save=function(a,b){return b!==v?window.open(b.toDataURL(),"_blank"):window.open(d.externals.canvas.toDataURL(),"_blank")};var Jd=0;d.saveFrame=function(a){if(a===v)a="screen-####.png";a=a.replace(/#+/,function(b){for(var c=""+Jd++;c.length<b.length;)c="0"+c;return c});d.save(a)};var yd=document.createElement("canvas").getContext("2d"),Tc=[v,v,v],Va=function(a,b,c){this.get=
function(e,f,g,k){if(arguments.length)if(arguments.length===2)return d.get(e,f,this);else{if(arguments.length===4)return d.get(e,f,g,k,this)}else return d.get(this)};this.set=function(e,f,g){d.set(e,f,g,this)};this.blend=function(e,f,g,k,j,l,p,o,s,n){if(arguments.length===9)d.blend(this,e,f,g,k,j,l,p,o,s,this);else arguments.length===10&&d.blend(e,f,g,k,j,l,p,o,s,n,this);delete this.sourceImg};this.copy=function(e,f,g,k,j,l,p,o,s){if(arguments.length===8)d.blend(this,e,f,g,k,j,l,p,o,h.REPLACE,this);
else arguments.length===9&&d.blend(e,f,g,k,j,l,p,o,s,h.REPLACE,this);delete this.sourceImg};this.filter=function(e,f){if(arguments.length===2)d.filter(e,f,this);else arguments.length===1&&d.filter(e,null,this);delete this.sourceImg};this.save=function(e){d.save(e,this)};this.resize=function(e,f){if(this.isRemote)throw"Image is loaded remotely. Cannot resize.";else if(this.width!==0||this.height!==0){if(e===0&&f!==0)e=Math.floor(this.width/this.height*f);else if(f===0&&e!==0)f=Math.floor(this.height/
this.width*e);var g=ka(this.imageData).canvas;this.fromImageData(ka(g,e,f).context.getImageData(0,0,e,f))}};this.mask=function(e){this.__mask=v;if(e.constructor.name==="PImage")if(e.width===this.width&&e.height===this.height)this.__mask=e;else throw"mask must have the same dimensions as PImage.";else if(typeof e==="object"&&e.constructor===Array)if(this.pixels.length===e.length)this.__mask=e;else throw"mask array must be the same length as PImage pixels array.";};this.pixels={getLength:function(e){if(e.isRemote)throw"Image is loaded remotely. Cannot get length.";
else return function(){return e.imageData.data.length?e.imageData.data.length/4:0}}(this),getPixel:function(e){if(e.isRemote)throw"Image is loaded remotely. Cannot get pixels.";else return function(f){f*=4;return d.color.toInt(e.imageData.data[f],e.imageData.data[f+1],e.imageData.data[f+2],e.imageData.data[f+3])}}(this),setPixel:function(e){if(e.isRemote)throw"Image is loaded remotely. Cannot set pixel.";else return function(f,g){var k=f*4;e.imageData.data[k+0]=(g&h.RED_MASK)>>>16;e.imageData.data[k+
1]=(g&h.GREEN_MASK)>>>8;e.imageData.data[k+2]=g&h.BLUE_MASK;e.imageData.data[k+3]=(g&h.ALPHA_MASK)>>>24}}(this),set:function(e){if(this.isRemote)throw"Image is loaded remotely. Cannot set pixels.";else for(var f=0,g=e.length;f<g;f++)this.setPixel(f,e[f])}};this.loadPixels=function(){};this.updatePixels=function(){};this.toImageData=function(){return this.isRemote?this.sourceImg:ka(this.imageData).context.getImageData(0,0,this.width,this.height)};this.toDataURL=function(){if(this.isRemote)throw"Image is loaded remotely. Cannot create dataURI.";
else return ka(this.imageData).canvas.toDataURL()};this.fromImageData=function(e){this.width=e.width;this.height=e.height;this.imageData=e;this.format=h.ARGB};this.fromHTMLImageData=function(e){var f=ka(e);try{this.fromImageData(f.context.getImageData(0,0,e.width,e.height))}catch(g){if(e.width&&e.height){this.isRemote=true;this.width=e.width;this.height=e.height}}this.sourceImg=e};if(arguments.length===1)this.fromHTMLImageData(arguments[0]);else if(arguments.length===2||arguments.length===3){this.width=
a||1;this.height=b||1;this.imageData=yd.createImageData(this.width,this.height);this.format=c===h.ARGB||c===h.ALPHA?c:h.RGB}else{this.height=this.width=0;this.imageData=yd.createImageData(1,1);this.format=h.ARGB}};d.PImage=Va;d.createImage=function(a,b,c){return new Va(a,b,c)};d.loadImage=function(a,b,c){if(b)a=a+"."+b;if(aa.imageCache.images[a])return new Va(aa.imageCache.images[a]);else{b=new Va;var e=document.createElement("img");b.sourceImg=e;e.onload=function(f,g,k){return function(){g.fromHTMLImageData(f);
g.loaded=true;k&&k()}}(e,b,c);e.src=a;return b}};d.requestImage=d.loadImage;d.get=function(a,b,c,e,f){if(arguments.length===2){var g;if(a<d.width&&a>=0&&b>=0&&b<d.height)if(yb){var k=((0|a)+d.width*(0|b))*4;g=d.imageData.data;g=d.color.toInt(g[k],g[k+1],g[k+2],g[k+3])}else{g=i.getImageData(0|a,0|b,1,1).data;g=d.color.toInt(g[0],g[1],g[2],g[3])}else g=0;return g}else if(arguments.length===0){g=new Va(d.width,d.height,h.RGB);g.fromImageData(i.getImageData(0,0,d.width,d.height));return g}else if(arguments.length===
5){if(f.isRemote)throw"Image is loaded remotely. Cannot get x,y,w,h.";else{g=new Va(c,e,h.RGB);k=g.imageData.data;for(var j=f.width,l=f.imageData.data,p=Math.max(0,-a),o=Math.min(e,f.height-b),s=Math.min(c,j-a),n=Math.max(0,-b);n<o;++n)for(var w=((b+n)*j+(a+p))*4,E=(n*c+p)*4,C=p;C<s;++C){k[E++]=l[w++];k[E++]=l[w++];k[E++]=l[w++];k[E++]=l[w++]}}return g}else if(arguments.length===4){g=new Va(c,e,h.RGB);g.fromImageData(i.getImageData(a,b,c,e));return g}else if(arguments.length===3){if(c.isRemote)throw"Image is loaded remotely. Cannot get x,y.";
else{g=b*c.width*4+a*4;g=d.color.toInt(c.imageData.data[g],c.imageData.data[g+1],c.imageData.data[g+2],c.imageData.data[g+3])}return g}else if(arguments.length===1)return a};d.createGraphics=function(a,b,c){var e=document.createElement("canvas"),f=new t(e);f.size(a,b,c);f.canvas=e;f.toImageData=function(){var g=this.externals.context;if(this.use3DContext){var k=document.createElement("canvas").getContext("2d").createImageData(this.width,this.height),j=new Uint8Array(this.width*this.height*4);g.readPixels(0,
0,this.width,this.height,g.RGBA,g.UNSIGNED_BYTE,j);g=0;for(var l=j.length,p=this.height,o=this.width,s=k.data;g<l;g++)s[g]=j[(p-1-Math.floor(g/4/o))*o*4+g%(o*4)];return k}else return g.getImageData(0,0,this.width,this.height)};return f};d.set=function(a,b,c,e){if(arguments.length===3)if(typeof c==="number"){if(a<d.width&&a>=0&&b>=0&&b<d.height){if(!yb){d.loadPixels();if(Ic===null){Uc=i;Ic=new cb}yb=true;i=Ic;kd=0}d.pixels.setPixel((0|a)+d.width*(0|b),c);++kd>ld&&Ja()}}else c instanceof Va&&d.image(c,
a,b);else if(arguments.length===4)if(e.isRemote)throw"Image is loaded remotely. Cannot set x,y.";else{var f=d.color.toArray(c),g=b*e.width*4+a*4,k=e.imageData.data;k[g]=f[0];k[g+1]=f[1];k[g+2]=f[2];k[g+3]=f[3]}};d.imageData={};d.pixels={getLength:function(){return d.imageData.data.length?d.imageData.data.length/4:0},getPixel:function(a){a*=4;return d.imageData.data[a+3]<<24&4278190080|d.imageData.data[a+0]<<16&16711680|d.imageData.data[a+1]<<8&65280|d.imageData.data[a+2]&255},setPixel:function(a,
b){var c=a*4;d.imageData.data[c+0]=(b&16711680)>>>16;d.imageData.data[c+1]=(b&65280)>>>8;d.imageData.data[c+2]=b&255;d.imageData.data[c+3]=(b&4278190080)>>>24},set:function(a){for(var b=0,c=a.length;b<c;b++)this.setPixel(b,a[b])}};d.loadPixels=function(){d.imageData=i.getImageData(0,0,d.width,d.height)};d.updatePixels=function(){d.imageData&&i.putImageData(d.imageData,0,0)};d.hint=function(a){if(a===h.DISABLE_DEPTH_TEST){i.disable(i.DEPTH_TEST);i.depthMask(false);i.clear(i.DEPTH_BUFFER_BIT)}else if(a===
h.ENABLE_DEPTH_TEST){i.enable(i.DEPTH_TEST);i.depthMask(true)}};d.background=function(){var a,b;if(typeof arguments[0]==="number"){a=d.color.apply(this,arguments);aa.options.isTransparent||(a|=h.ALPHA_MASK)}else if(arguments.length===1&&arguments[0]instanceof Va){b=arguments[0];if(!b.pixels||b.width!==d.width||b.height!==d.height)throw"Background image must be the same dimensions as the canvas.";}else throw"Incorrect background parameters.";if(d.use3DContext)if(a!==v){var c=d.color.toGLArray(a);xb=
function(){i.clearColor(c[0],c[1],c[2],c[3]);i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}}else xb=function(){};else xb=a!==v?function(){i.save();i.setTransform(1,0,0,1,0,0);aa.options.isTransparent&&i.clearRect(0,0,d.width,d.height);i.fillStyle=d.color.toString(a);i.fillRect(0,0,d.width,d.height);Ha=true;Z()}:function(){i.save();i.setTransform(1,0,0,1,0,0);d.image(b,0,0);Z()};xb()};d.image=function(a,b,c,e,f){if(a.width>0){var g=e||a.width,k=f||a.height;if(d.use3DContext){d.beginShape(d.QUADS);
d.texture(a.externals.canvas);d.vertex(b,c,0,0,0);d.vertex(b,c+k,0,0,k);d.vertex(b+g,c+k,0,g,k);d.vertex(b+g,c,0,g,0);d.endShape()}else{g=gc(b||0,c||0,e||a.width,f||a.height,arguments.length<4);if(a.sourceImg&&hb===null&&!a.__mask){k=a.sourceImg;i.drawImage(k,0,0,k.width,k.height,g.x,g.y,g.w,g.h)}else{k=a.toImageData();if(a.__mask){var j,l;if(a.__mask.constructor.name==="PImage"){var p=a.__mask.toImageData();j=2;for(l=a.width*a.height*4;j<l;j+=4)k.data[j+1]=p.data[j]}else{j=0;for(l=a.__mask.length;j<
l;++j)k.data[(j<<2)+3]=a.__mask[j]}}hb!==null&&hb(k);i.drawImage(ka(k).canvas,0,0,a.width,a.height,g.x,g.y,g.w,g.h)}}}};d.clear=function(a,b,c,e){arguments.length===0?i.clearRect(0,0,d.width,d.height):i.clearRect(a,b,c,e)};d.tint=function(){var a=d.color.apply(this,arguments),b=d.red(a)/la,c=d.green(a)/za,e=d.blue(a)/ta,f=d.alpha(a)/ua;hb=function(g){var k=g.data;g=4*g.width*g.height;for(var j=0;j<g;){k[j++]*=b;k[j++]*=c;k[j++]*=e;k[j++]*=f}}};d.noTint=function(){hb=null};d.copy=function(a,b,c,e,
f,g,k,j,l){if(arguments.length===8){l=j;j=k;k=g;g=f;f=e;e=c;c=b;b=a;a=d}d.blend(a,b,c,e,f,g,k,j,l,h.REPLACE)};d.blend=function(a,b,c,e,f,g,k,j,l,p,o){if(arguments.length===9){p=l;l=j;j=k;k=g;g=f;f=e;e=c;c=b;b=a;a=d}var s=b+e,n=c+f,w=g+j,E=k+l,C;if(a.isRemote)throw"Image is loaded remotely. Cannot blend image.";else{if(arguments.length===10||arguments.length===9){d.loadPixels();C=d}else if(arguments.length===11&&o&&o.imageData)C=o;if(a===d)d.intersect(b,c,s,n,g,k,w,E)?d.blit_resize(d.get(b,c,s-b,n-
c),0,0,s-b-1,n-c-1,C.imageData.data,C.width,C.height,g,k,w,E,p):d.blit_resize(a,b,c,s,n,C.imageData.data,C.width,C.height,g,k,w,E,p);else{a.loadPixels();d.blit_resize(a,b,c,s,n,C.imageData.data,C.width,C.height,g,k,w,E,p)}arguments.length===10&&d.updatePixels()}};var zd=function(a,b){var c=0,e=b.pixels.getLength(),f=new Int32Array(e),g,k,j,l,p,o,s,n,w,E,C,r;if(a)for(;c<e;){g=c;for(k=c+b.width;c<k;){j=l=b.pixels.getPixel(c);o=c-1;p=c+1;s=c-b.width;n=c+b.width;if(o<g)o=c;if(p>=k)p=c;if(s<0)s=0;if(n>=
e)n=c;s=b.pixels.getPixel(s);o=b.pixels.getPixel(o);n=b.pixels.getPixel(n);p=b.pixels.getPixel(p);j=77*(j>>16&255)+151*(j>>8&255)+28*(j&255);E=77*(o>>16&255)+151*(o>>8&255)+28*(o&255);w=77*(p>>16&255)+151*(p>>8&255)+28*(p&255);C=77*(s>>16&255)+151*(s>>8&255)+28*(s&255);r=77*(n>>16&255)+151*(n>>8&255)+28*(n&255);if(E<j){l=o;j=E}if(w<j){l=p;j=w}if(C<j){l=s;j=C}if(r<j)l=n;f[c++]=l}}else for(;c<e;){g=c;for(k=c+b.width;c<k;){j=l=b.pixels.getPixel(c);o=c-1;p=c+1;s=c-b.width;n=c+b.width;if(o<g)o=c;if(p>=
k)p=c;if(s<0)s=0;if(n>=e)n=c;s=b.pixels.getPixel(s);o=b.pixels.getPixel(o);n=b.pixels.getPixel(n);p=b.pixels.getPixel(p);j=77*(j>>16&255)+151*(j>>8&255)+28*(j&255);E=77*(o>>16&255)+151*(o>>8&255)+28*(o&255);w=77*(p>>16&255)+151*(p>>8&255)+28*(p&255);C=77*(s>>16&255)+151*(s>>8&255)+28*(s&255);r=77*(n>>16&255)+151*(n>>8&255)+28*(n&255);if(E>j){l=o;j=E}if(w>j){l=p;j=w}if(C>j){l=s;j=C}if(r>j)l=n;f[c++]=l}}b.pixels.set(f)};d.filter=function(a,b,c){var e,f,g,k;if(arguments.length===3){c.loadPixels();e=
c}else{d.loadPixels();e=d}if(b===v)b=null;if(e.isRemote)throw"Image is loaded remotely. Cannot filter image.";else{var j=e.pixels.getLength();switch(a){case h.BLUR:var l=b||1;k=e;var p,o,s,n,w,E,C,r,$,ba=k.pixels.getLength();j=new Float32Array(ba);f=new Float32Array(ba);g=new Float32Array(ba);ba=new Float32Array(ba);var ja=0,R,Wa,Da;l=d.floor(l*3.5);l=l<1?1:l<248?l:248;if(d.shared.blurRadius!==l){d.shared.blurRadius=l;d.shared.blurKernelSize=1+(d.shared.blurRadius<<1);d.shared.blurKernel=new Float32Array(d.shared.blurKernelSize);
for(p=0;p<d.shared.blurKernelSize;p++)d.shared.blurKernel[p]=0;p=1;for(o=l-1;p<l;p++)d.shared.blurKernel[l+p]=d.shared.blurKernel[o]=o*o;d.shared.blurKernel[l]=l*l}for(Wa=0;Wa<k.height;Wa++){for(R=0;R<k.width;R++){s=o=p=n=l=0;C=R-d.shared.blurRadius;if(C<0){E=-C;C=0}else{if(C>=k.width)break;E=0}for(Da=E;Da<d.shared.blurKernelSize;Da++){if(C>=k.width)break;w=k.pixels.getPixel(C+ja);E=d.shared.blurKernel[Da];n+=E*((w&h.ALPHA_MASK)>>>24);p+=E*((w&h.RED_MASK)>>16);o+=E*((w&h.GREEN_MASK)>>8);s+=E*(w&h.BLUE_MASK);
l+=E;C++}w=ja+R;ba[w]=n/l;j[w]=p/l;f[w]=o/l;g[w]=s/l}ja+=k.width}ja=0;r=-d.shared.blurRadius;$=r*k.width;for(Wa=0;Wa<k.height;Wa++){for(R=0;R<k.width;R++){s=o=p=n=l=0;if(r<0){E=w=-r;C=R}else{if(r>=k.height)break;E=0;w=r;C=R+$}for(Da=E;Da<d.shared.blurKernelSize;Da++){if(w>=k.height)break;E=d.shared.blurKernel[Da];n+=E*ba[C];p+=E*j[C];o+=E*f[C];s+=E*g[C];l+=E;w++;C+=k.width}k.pixels.setPixel(R+ja,n/l<<24|p/l<<16|o/l<<8|s/l)}ja+=k.width;$+=k.width;r++}break;case h.GRAY:if(e.format===h.ALPHA){for(k=
0;k<j;k++){f=255-e.pixels.getPixel(k);e.pixels.setPixel(k,4278190080|f<<16|f<<8|f)}e.format=h.RGB}else for(k=0;k<j;k++){f=e.pixels.getPixel(k);g=77*(f>>16&255)+151*(f>>8&255)+28*(f&255)>>8;e.pixels.setPixel(k,f&h.ALPHA_MASK|g<<16|g<<8|g)}break;case h.INVERT:for(k=0;k<j;k++)e.pixels.setPixel(k,e.pixels.getPixel(k)^16777215);break;case h.POSTERIZE:if(b===null)throw"Use filter(POSTERIZE, int levels) instead of filter(POSTERIZE)";f=d.floor(b);if(f<2||f>255)throw"Levels must be between 2 and 255 for filter(POSTERIZE, levels)";
g=f-1;for(k=0;k<j;k++){ba=e.pixels.getPixel(k)>>16&255;ja=e.pixels.getPixel(k)>>8&255;l=e.pixels.getPixel(k)&255;ba=(ba*f>>8)*255/g;ja=(ja*f>>8)*255/g;l=(l*f>>8)*255/g;e.pixels.setPixel(k,4278190080&e.pixels.getPixel(k)|ba<<16|ja<<8|l)}break;case h.OPAQUE:for(k=0;k<j;k++)e.pixels.setPixel(k,e.pixels.getPixel(k)|4278190080);e.format=h.RGB;break;case h.THRESHOLD:if(b===null)b=0.5;if(b<0||b>1)throw"Level must be between 0 and 1 for filter(THRESHOLD, level)";f=d.floor(b*255);for(k=0;k<j;k++){g=d.max((e.pixels.getPixel(k)&
h.RED_MASK)>>16,d.max((e.pixels.getPixel(k)&h.GREEN_MASK)>>8,e.pixels.getPixel(k)&h.BLUE_MASK));e.pixels.setPixel(k,e.pixels.getPixel(k)&h.ALPHA_MASK|(g<f?0:16777215))}break;case h.ERODE:zd(true,e);break;case h.DILATE:zd(false,e)}e.updatePixels()}};d.shared={fracU:0,ifU:0,fracV:0,ifV:0,u1:0,u2:0,v1:0,v2:0,sX:0,sY:0,iw:0,iw1:0,ih1:0,ul:0,ll:0,ur:0,lr:0,cUL:0,cLL:0,cUR:0,cLR:0,srcXOffset:0,srcYOffset:0,r:0,g:0,b:0,a:0,srcBuffer:null,blurRadius:0,blurKernelSize:0,blurKernel:null};d.intersect=function(a,
b,c,e,f,g,k,j){c=c-a+1;e=e-b+1;k=k-f+1;j=j-g+1;if(f<a){k+=f-a;if(k>c)k=c}else{a=c+a-f;if(k>a)k=a}if(g<b){j+=g-b;if(j>e)j=e}else{b=e+b-g;if(j>b)j=b}return!(k<=0||j<=0)};d.filter_new_scanline=function(){d.shared.sX=d.shared.srcXOffset;d.shared.fracV=d.shared.srcYOffset&h.PREC_MAXVAL;d.shared.ifV=h.PREC_MAXVAL-d.shared.fracV;d.shared.v1=(d.shared.srcYOffset>>h.PRECISIONB)*d.shared.iw;d.shared.v2=Math.min((d.shared.srcYOffset>>h.PRECISIONB)+1,d.shared.ih1)*d.shared.iw};d.filter_bilinear=function(){d.shared.fracU=
d.shared.sX&h.PREC_MAXVAL;d.shared.ifU=h.PREC_MAXVAL-d.shared.fracU;d.shared.ul=d.shared.ifU*d.shared.ifV>>h.PRECISIONB;d.shared.ll=d.shared.ifU*d.shared.fracV>>h.PRECISIONB;d.shared.ur=d.shared.fracU*d.shared.ifV>>h.PRECISIONB;d.shared.lr=d.shared.fracU*d.shared.fracV>>h.PRECISIONB;d.shared.u1=d.shared.sX>>h.PRECISIONB;d.shared.u2=Math.min(d.shared.u1+1,d.shared.iw1);var a=(d.shared.v1+d.shared.u1)*4,b=(d.shared.v1+d.shared.u2)*4,c=(d.shared.v2+d.shared.u1)*4,e=(d.shared.v2+d.shared.u2)*4;d.shared.cUL=
d.color.toInt(d.shared.srcBuffer[a],d.shared.srcBuffer[a+1],d.shared.srcBuffer[a+2],d.shared.srcBuffer[a+3]);d.shared.cUR=d.color.toInt(d.shared.srcBuffer[b],d.shared.srcBuffer[b+1],d.shared.srcBuffer[b+2],d.shared.srcBuffer[b+3]);d.shared.cLL=d.color.toInt(d.shared.srcBuffer[c],d.shared.srcBuffer[c+1],d.shared.srcBuffer[c+2],d.shared.srcBuffer[c+3]);d.shared.cLR=d.color.toInt(d.shared.srcBuffer[e],d.shared.srcBuffer[e+1],d.shared.srcBuffer[e+2],d.shared.srcBuffer[e+3]);d.shared.r=d.shared.ul*((d.shared.cUL&
h.RED_MASK)>>16)+d.shared.ll*((d.shared.cLL&h.RED_MASK)>>16)+d.shared.ur*((d.shared.cUR&h.RED_MASK)>>16)+d.shared.lr*((d.shared.cLR&h.RED_MASK)>>16)<<h.PREC_RED_SHIFT&h.RED_MASK;d.shared.g=d.shared.ul*(d.shared.cUL&h.GREEN_MASK)+d.shared.ll*(d.shared.cLL&h.GREEN_MASK)+d.shared.ur*(d.shared.cUR&h.GREEN_MASK)+d.shared.lr*(d.shared.cLR&h.GREEN_MASK)>>>h.PRECISIONB&h.GREEN_MASK;d.shared.b=d.shared.ul*(d.shared.cUL&h.BLUE_MASK)+d.shared.ll*(d.shared.cLL&h.BLUE_MASK)+d.shared.ur*(d.shared.cUR&h.BLUE_MASK)+
d.shared.lr*(d.shared.cLR&h.BLUE_MASK)>>>h.PRECISIONB;d.shared.a=d.shared.ul*((d.shared.cUL&h.ALPHA_MASK)>>>24)+d.shared.ll*((d.shared.cLL&h.ALPHA_MASK)>>>24)+d.shared.ur*((d.shared.cUR&h.ALPHA_MASK)>>>24)+d.shared.lr*((d.shared.cLR&h.ALPHA_MASK)>>>24)<<h.PREC_ALPHA_SHIFT&h.ALPHA_MASK;return d.shared.a|d.shared.r|d.shared.g|d.shared.b};d.blit_resize=function(a,b,c,e,f,g,k,j,l,p,o,s,n){if(b<0)b=0;if(c<0)c=0;if(e>=a.width)e=a.width-1;if(f>=a.height)f=a.height-1;e-=b;f-=c;o-=l;s-=p;if(!(o<=0||s<=0||
e<=0||f<=0||l>=k||p>=j||b>=a.width||c>=a.height)){e=Math.floor(e/o*h.PRECISIONF);f=Math.floor(f/s*h.PRECISIONF);d.shared.srcXOffset=Math.floor(l<0?-l*e:b*h.PRECISIONF);d.shared.srcYOffset=Math.floor(p<0?-p*f:c*h.PRECISIONF);if(l<0){o+=l;l=0}if(p<0){s+=p;p=0}o=Math.min(o,k-l);s=Math.min(s,j-p);b=p*k+l;d.shared.srcBuffer=a.imageData.data;d.shared.iw=a.width;d.shared.iw1=a.width-1;d.shared.ih1=a.height-1;switch(n){case h.BLEND:for(n=0;n<s;n++){d.filter_new_scanline();for(a=0;a<o;a++){c=d.color.toInt(g[(b+
a)*4],g[(b+a)*4+1],g[(b+a)*4+2],g[(b+a)*4+3]);c=d.color.toArray(d.modes.blend(c,d.filter_bilinear()));g[(b+a)*4]=c[0];g[(b+a)*4+1]=c[1];g[(b+a)*4+2]=c[2];g[(b+a)*4+3]=c[3];d.shared.sX+=e}b+=k;d.shared.srcYOffset+=f}break;case h.ADD:for(n=0;n<s;n++){d.filter_new_scanline();for(a=0;a<o;a++){c=d.color.toInt(g[(b+a)*4],g[(b+a)*4+1],g[(b+a)*4+2],g[(b+a)*4+3]);c=d.color.toArray(d.modes.add(c,d.filter_bilinear()));c=d.color.toArray(d.modes.add(c,d.filter_bilinear()));g[(b+a)*4]=c[0];g[(b+a)*4+1]=c[1];g[(b+
a)*4+2]=c[2];g[(b+a)*4+3]=c[3];d.shared.sX+=e}b+=k;d.shared.srcYOffset+=f}break;case h.SUBTRACT:for(n=0;n<s;n++){d.filter_new_scanline();for(a=0;a<o;a++){c=d.color.toInt(g[(b+a)*4],g[(b+a)*4+1],g[(b+a)*4+2],g[(b+a)*4+3]);c=d.color.toArray(d.modes.subtract(c,d.filter_bilinear()));g[(b+a)*4]=c[0];g[(b+a)*4+1]=c[1];g[(b+a)*4+2]=c[2];g[(b+a)*4+3]=c[3];d.shared.sX+=e}b+=k;d.shared.srcYOffset+=f}break;case h.LIGHTEST:for(n=0;n<s;n++){d.filter_new_scanline();for(a=0;a<o;a++){c=d.color.toInt(g[(b+a)*4],g[(b+
a)*4+1],g[(b+a)*4+2],g[(b+a)*4+3]);c=d.color.toArray(d.modes.lightest(c,d.filter_bilinear()));g[(b+a)*4]=c[0];g[(b+a)*4+1]=c[1];g[(b+a)*4+2]=c[2];g[(b+a)*4+3]=c[3];d.shared.sX+=e}b+=k;d.shared.srcYOffset+=f}break;case h.DARKEST:for(n=0;n<s;n++){d.filter_new_scanline();for(a=0;a<o;a++){c=d.color.toInt(g[(b+a)*4],g[(b+a)*4+1],g[(b+a)*4+2],g[(b+a)*4+3]);c=d.color.toArray(d.modes.darkest(c,d.filter_bilinear()));g[(b+a)*4]=c[0];g[(b+a)*4+1]=c[1];g[(b+a)*4+2]=c[2];g[(b+a)*4+3]=c[3];d.shared.sX+=e}b+=k;
d.shared.srcYOffset+=f}break;case h.REPLACE:for(n=0;n<s;n++){d.filter_new_scanline();for(a=0;a<o;a++){d.color.toInt(g[(b+a)*4],g[(b+a)*4+1],g[(b+a)*4+2],g[(b+a)*4+3]);c=d.color.toArray(d.filter_bilinear());g[(b+a)*4]=c[0];g[(b+a)*4+1]=c[1];g[(b+a)*4+2]=c[2];g[(b+a)*4+3]=c[3];d.shared.sX+=e}b+=k;d.shared.srcYOffset+=f}break;case h.DIFFERENCE:for(n=0;n<s;n++){d.filter_new_scanline();for(a=0;a<o;a++){c=d.color.toInt(g[(b+a)*4],g[(b+a)*4+1],g[(b+a)*4+2],g[(b+a)*4+3]);c=d.color.toArray(d.modes.difference(c,
d.filter_bilinear()));g[(b+a)*4]=c[0];g[(b+a)*4+1]=c[1];g[(b+a)*4+2]=c[2];g[(b+a)*4+3]=c[3];d.shared.sX+=e}b+=k;d.shared.srcYOffset+=f}break;case h.EXCLUSION:for(n=0;n<s;n++){d.filter_new_scanline();for(a=0;a<o;a++){c=d.color.toInt(g[(b+a)*4],g[(b+a)*4+1],g[(b+a)*4+2],g[(b+a)*4+3]);c=d.color.toArray(d.modes.exclusion(c,d.filter_bilinear()));g[(b+a)*4]=c[0];g[(b+a)*4+1]=c[1];g[(b+a)*4+2]=c[2];g[(b+a)*4+3]=c[3];d.shared.sX+=e}b+=k;d.shared.srcYOffset+=f}break;case h.MULTIPLY:for(n=0;n<s;n++){d.filter_new_scanline();
for(a=0;a<o;a++){c=d.color.toInt(g[(b+a)*4],g[(b+a)*4+1],g[(b+a)*4+2],g[(b+a)*4+3]);c=d.color.toArray(d.modes.multiply(c,d.filter_bilinear()));g[(b+a)*4]=c[0];g[(b+a)*4+1]=c[1];g[(b+a)*4+2]=c[2];g[(b+a)*4+3]=c[3];d.shared.sX+=e}b+=k;d.shared.srcYOffset+=f}break;case h.SCREEN:for(n=0;n<s;n++){d.filter_new_scanline();for(a=0;a<o;a++){c=d.color.toInt(g[(b+a)*4],g[(b+a)*4+1],g[(b+a)*4+2],g[(b+a)*4+3]);c=d.color.toArray(d.modes.screen(c,d.filter_bilinear()));g[(b+a)*4]=c[0];g[(b+a)*4+1]=c[1];g[(b+a)*4+
2]=c[2];g[(b+a)*4+3]=c[3];d.shared.sX+=e}b+=k;d.shared.srcYOffset+=f}break;case h.OVERLAY:for(n=0;n<s;n++){d.filter_new_scanline();for(a=0;a<o;a++){c=d.color.toInt(g[(b+a)*4],g[(b+a)*4+1],g[(b+a)*4+2],g[(b+a)*4+3]);c=d.color.toArray(d.modes.overlay(c,d.filter_bilinear()));g[(b+a)*4]=c[0];g[(b+a)*4+1]=c[1];g[(b+a)*4+2]=c[2];g[(b+a)*4+3]=c[3];d.shared.sX+=e}b+=k;d.shared.srcYOffset+=f}break;case h.HARD_LIGHT:for(n=0;n<s;n++){d.filter_new_scanline();for(a=0;a<o;a++){c=d.color.toInt(g[(b+a)*4],g[(b+a)*
4+1],g[(b+a)*4+2],g[(b+a)*4+3]);c=d.color.toArray(d.modes.hard_light(c,d.filter_bilinear()));g[(b+a)*4]=c[0];g[(b+a)*4+1]=c[1];g[(b+a)*4+2]=c[2];g[(b+a)*4+3]=c[3];d.shared.sX+=e}b+=k;d.shared.srcYOffset+=f}break;case h.SOFT_LIGHT:for(n=0;n<s;n++){d.filter_new_scanline();for(a=0;a<o;a++){c=d.color.toInt(g[(b+a)*4],g[(b+a)*4+1],g[(b+a)*4+2],g[(b+a)*4+3]);c=d.color.toArray(d.modes.soft_light(c,d.filter_bilinear()));g[(b+a)*4]=c[0];g[(b+a)*4+1]=c[1];g[(b+a)*4+2]=c[2];g[(b+a)*4+3]=c[3];d.shared.sX+=e}b+=
k;d.shared.srcYOffset+=f}break;case h.DODGE:for(n=0;n<s;n++){d.filter_new_scanline();for(a=0;a<o;a++){c=d.color.toInt(g[(b+a)*4],g[(b+a)*4+1],g[(b+a)*4+2],g[(b+a)*4+3]);c=d.color.toArray(d.modes.dodge(c,d.filter_bilinear()));g[(b+a)*4]=c[0];g[(b+a)*4+1]=c[1];g[(b+a)*4+2]=c[2];g[(b+a)*4+3]=c[3];d.shared.sX+=e}b+=k;d.shared.srcYOffset+=f}break;case h.BURN:for(n=0;n<s;n++){d.filter_new_scanline();for(a=0;a<o;a++){c=d.color.toInt(g[(b+a)*4],g[(b+a)*4+1],g[(b+a)*4+2],g[(b+a)*4+3]);c=d.color.toArray(d.modes.burn(c,
d.filter_bilinear()));g[(b+a)*4]=c[0];g[(b+a)*4+1]=c[1];g[(b+a)*4+2]=c[2];g[(b+a)*4+3]=c[3];d.shared.sX+=e}b+=k;d.shared.srcYOffset+=f}}}};Ra.prototype.width=function(a){return"measureText"in i?i.measureText(typeof a==="number"?String.fromCharCode(a):a).width/N:"mozMeasureText"in i?i.mozMeasureText(typeof a==="number"?String.fromCharCode(a):a)/N:0};Ra.list=function(){return["sans-serif","serif","monospace","fantasy","cursive"]};d.PFont=Ra;d.loadFont=function(a){if(a===v||a.indexOf(".svg")===-1)return new Ra(a);
else{var b=d.loadGlyphs(a);return{name:a,glyph:true,units_per_em:b.units_per_em,horiz_adv_x:1/b.units_per_em*b.horiz_adv_x,ascent:b.ascent,descent:b.descent,width:function(c){for(var e=0,f=c.length,g=0;g<f;g++)try{e+=parseFloat(d.glyphLook(d.glyphTable[a],c[g]).horiz_adv_x)}catch(k){t.debug(k)}return e/d.glyphTable[a].units_per_em}}}};d.createFont=function(a,b){if(arguments.length===2){d.textSize(b);return d.loadFont(a)}else if(arguments.length===3){d.textSize(b);return d.loadFont(a)}else if(arguments.length===
4){d.textSize(b);return d.loadFont(a)}else throw"incorrent number of parameters for createFont";};d.textFont=function(a,b){fa=a;if(b)d.textSize(b);else i.font=i.mozTextStyle=N+"px "+fa.name};d.textSize=function(a){if(a){N=a;i.font=i.mozTextStyle=N+"px "+fa.name}};d.textAlign=function(){if(arguments.length===1)sb=arguments[0];else if(arguments.length===2){sb=arguments[0];rb=arguments[1]}};d.textWidth=function(a){if(d.use3DContext){if(oa===v)oa=document.createElement("canvas");var b=i;i=oa.getContext("2d");
i.font=i.mozTextStyle=N+"px "+fa.name;if("fillText"in i)oa.width=i.measureText(a).width;else if("mozDrawText"in i)oa.width=i.mozMeasureText(a);i=b;return oa.width}else{i.font=N+"px "+fa.name;if("fillText"in i)return i.measureText(a).width;else if("mozDrawText"in i)return i.mozMeasureText(a)}};d.textLeading=function(a){eb=a};d.textAscent=function(){var a=v,b=v,c=v,e=v;return function(){if(b!==fa||a!==N){b=fa;a=N;var f=false,g=d.color(0),k=0,j=N,l=N/2;for(e=new ob(fa.name,N,N,"k");l!==j;){for(var p=
0;p<N;p++)if(e.get(p,l)!==g){f=true;p=N}if(f){j=l;f=false}else k=l;l=Math.ceil((j+k)/2)}c=N-1-l+1}return c}}();d.textDescent=function(){var a=v,b=v,c=v,e=v;return function(){if(b!==fa||a!==N){b=fa;a=N;var f=false,g=d.color(0),k=0,j=N,l=N/2;for(e=new ob(fa.name,N,0,"p");l!==j;){for(var p=0;p<N;p++)if(e.get(p,l)!==g){f=true;p=N}if(f){k=l;f=false}else j=l;l=Math.ceil((j+k)/2)}c=l+1}return c}}();d.glyphLook=function(a,b){try{switch(b){case "1":return a.one;case "2":return a.two;case "3":return a.three;
case "4":return a.four;case "5":return a.five;case "6":return a.six;case "7":return a.seven;case "8":return a.eight;case "9":return a.nine;case "0":return a.zero;case " ":return a.space;case "$":return a.dollar;case "!":return a.exclam;case '"':return a.quotedbl;case "#":return a.numbersign;case "%":return a.percent;case "&":return a.ampersand;case "'":return a.quotesingle;case "(":return a.parenleft;case ")":return a.parenright;case "*":return a.asterisk;case "+":return a.plus;case ",":return a.comma;
case "-":return a.hyphen;case ".":return a.period;case "/":return a.slash;case "_":return a.underscore;case ":":return a.colon;case ";":return a.semicolon;case "<":return a.less;case "=":return a.equal;case ">":return a.greater;case "?":return a.question;case "@":return a.at;case "[":return a.bracketleft;case "\\":return a.backslash;case "]":return a.bracketright;case "^":return a.asciicircum;case "`":return a.grave;case "{":return a.braceleft;case "|":return a.bar;case "}":return a.braceright;case "~":return a.asciitilde;
default:return a[b]}}catch(c){t.debug(c)}};d.text=function(){if(Hc===h.SCREEN){d.pushMatrix();d.resetMatrix();var a=d.textAscent(),b=d.textDescent(),c=d.textWidth(arguments[0]),e=a+b;b=d.loadFont(fa.origName);c=d.createGraphics(c,e);c.beginDraw();c.fill(Xa);c.opaque=false;c.background(0,0,0,0);c.textFont(b);c.textSize(N);c.text(arguments[0],0,a);c.endDraw();arguments.length===5||arguments.length===6?d.image(c,arguments[1],arguments[2]-a,arguments[3],arguments[4]):d.image(c,arguments[1],arguments[2]-
a);d.popMatrix()}else if(Hc!==h.SHAPE)if(arguments.length===3)ga(db(arguments[0]),arguments[1],arguments[2],0);else if(arguments.length===4)ga(db(arguments[0]),arguments[1],arguments[2],arguments[3]);else if(arguments.length===5)Ka(db(arguments[0]),arguments[1],arguments[2],arguments[3],arguments[4],0);else arguments.length===6&&Ka(db(arguments[0]),arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])};d.textMode=function(a){Hc=a};d.loadGlyphs=function(a){var b,c,e,f,g,k,j,l,p,o,s,n,w=
function(C,r){var $=0,ba=[],ja,R=RegExp(C,"g");for(ja=ba[$]=R.exec(r);ja;){$++;ja=ba[$]=R.exec(r)}return ba},E=function(C){var r=C.getElementsByTagName("font");d.glyphTable[a].horiz_adv_x=r[0].getAttribute("horiz-adv-x");r=C.getElementsByTagName("font-face")[0];d.glyphTable[a].units_per_em=parseFloat(r.getAttribute("units-per-em"));d.glyphTable[a].ascent=parseFloat(r.getAttribute("ascent"));d.glyphTable[a].descent=parseFloat(r.getAttribute("descent"));C=C.getElementsByTagName("glyph");r=C.length;
for(var $=0;$<r;$++){var ba=C[$].getAttribute("unicode"),ja=C[$].getAttribute("glyph-name");s=C[$].getAttribute("horiz-adv-x");if(s===null)s=d.glyphTable[a].horiz_adv_x;j=C[$].getAttribute("d");if(j!==v){var R=j,Wa=w("[A-Za-z][0-9\\- ]+|Z",R);n="var path={draw:function(){saveContext();curContext.beginPath();";l=k=g=f=e=c=b=0;p="";o=Wa.length-1;for(var Da=0;Da<o;Da++){var Rc=Wa[Da][0];R=w("[0-9\\-]+",Rc);switch(Rc[0]){case "M":b=parseFloat(R[0][0]);c=parseFloat(R[1][0]);n+="curContext.moveTo("+b+","+
-c+");";break;case "L":b=parseFloat(R[0][0]);c=parseFloat(R[1][0]);n+="curContext.lineTo("+b+","+-c+");";break;case "H":b=parseFloat(R[0][0]);n+="curContext.lineTo("+b+","+-c+");";break;case "V":c=parseFloat(R[0][0]);n+="curContext.lineTo("+b+","+-c+");";break;case "T":g=parseFloat(R[0][0]);k=parseFloat(R[1][0]);if(p==="Q"||p==="T"){R=Math.sqrt(Math.pow(b-e,2)+Math.pow(f-c,2));l=Math.PI+Math.atan2(e-b,f-c);e=b+Math.sin(l)*R;f=c+Math.cos(l)*R}else{e=b;f=c}n+="curContext.quadraticCurveTo("+e+","+-f+
","+g+","+-k+");";b=g;c=k;break;case "Q":e=parseFloat(R[0][0]);f=parseFloat(R[1][0]);g=parseFloat(R[2][0]);k=parseFloat(R[3][0]);n+="curContext.quadraticCurveTo("+e+","+-f+","+g+","+-k+");";b=g;c=k;break;case "Z":n+="curContext.closePath();"}p=Rc[0]}n+="executeContextFill();executeContextStroke();";n+="restoreContext();";n+="curContext.translate("+s+",0);";n+="}}";eval(n);d.glyphTable[a][ja]={name:ja,unicode:ba,horiz_adv_x:s,draw:n.draw}}}};d.glyphTable[a]={};(function(){var C;try{C=document.implementation.createDocument("",
"",null)}catch(r){t.debug(r.message);return}try{C.async=false;C.load(a);E(C.getElementsByTagName("svg")[0])}catch($){t.debug($);try{var ba=new window.XMLHttpRequest;ba.open("GET",a,false);ba.send(null);E(ba.responseXML.documentElement)}catch(ja){t.debug($)}}})(a);return d.glyphTable[a]};d.extendClassChain=function(a){for(var b=[a],c=a.$upcast;c;c=c.$upcast){Za(c,a);b.push(c);a=c}for(;b.length>0;)b.pop().$self=a};d.extendStaticMembers=function(a,b){Za(a,b)};d.addMethod=function(a,b,c){if(a[b]){var e=
c.length,f=a[b];a[b]=function(){return arguments.length===e?c.apply(this,arguments):f.apply(this,arguments)}}else a[b]=c};d.createJavaArray=function a(b,c){var e=null;if(typeof c[0]==="number"){var f=0|c[0];if(c.length<=1){if(b==="int")e=new Int32Array(f);else if(b==="float")e=new Float32Array(f);else{e=[];e.length=f}for(var g=0;g<f;++g)e[g]=0}else{e=[];g=c.slice(1);for(var k=0;k<f;++k)e.push(a(b,g))}}return e};ca(q,"touchstart",function(a){q.setAttribute("style","-webkit-user-select: none");q.setAttribute("onclick",
"void(0)");q.setAttribute("style","-webkit-tap-highlight-color:rgba(0,0,0,0)");for(var b=0,c=Sa.length;b<c;b++){var e=Sa[b][0],f=Sa[b][1],g=Sa[b][2];if(f==="mouseout"||f==="mousemove"||f==="mousedown"||f==="mouseup"||f==="DOMMouseScroll"||f==="mousewheel"||f==="touchstart")Cd(e,f,g)}if(d.touchStart!==v||d.touchMove!==v||d.touchEnd!==v||d.touchCancel!==v){ca(q,"touchstart",function(k){if(d.touchStart!==v){k=Lb(k);d.touchStart(k)}});ca(q,"touchmove",function(k){if(d.touchMove!==v){k.preventDefault();
k=Lb(k);d.touchMove(k)}});ca(q,"touchend",function(k){if(d.touchEnd!==v){k=Lb(k);d.touchEnd(k)}});ca(q,"touchcancel",function(k){if(d.touchCancel!==v){k=Lb(k);d.touchCancel(k)}})}else{ca(q,"touchstart",function(k){Kb(q,k.touches[0]);d.__mousePressed=true;d.mouseDragging=false;d.mouseButton=h.LEFT;typeof d.mousePressed==="function"&&d.mousePressed()});ca(q,"touchmove",function(k){k.preventDefault();Kb(q,k.touches[0]);typeof d.mouseMoved==="function"&&!d.__mousePressed&&d.mouseMoved();if(typeof d.mouseDragged===
"function"&&d.__mousePressed){d.mouseDragged();d.mouseDragging=true}});ca(q,"touchend",function(){d.__mousePressed=false;typeof d.mouseClicked==="function"&&!d.mouseDragging&&d.mouseClicked();typeof d.mouseReleased==="function"&&d.mouseReleased()})}q.dispatchEvent(a)});ca(q,"mousemove",function(a){Kb(q,a);typeof d.mouseMoved==="function"&&!d.__mousePressed&&d.mouseMoved();if(typeof d.mouseDragged==="function"&&d.__mousePressed){d.mouseDragged();d.mouseDragging=true}});ca(q,"mouseout",function(){typeof d.mouseOut===
"function"&&d.mouseOut()});ca(q,"mouseover",function(a){Kb(q,a);typeof d.mouseOver==="function"&&d.mouseOver()});ca(q,"mousedown",function(a){d.__mousePressed=true;d.mouseDragging=false;switch(a.which){case 1:d.mouseButton=h.LEFT;break;case 2:d.mouseButton=h.CENTER;break;case 3:d.mouseButton=h.RIGHT}typeof d.mousePressed==="function"&&d.mousePressed()});ca(q,"mouseup",function(){d.__mousePressed=false;typeof d.mouseClicked==="function"&&!d.mouseDragging&&d.mouseClicked();typeof d.mouseReleased===
"function"&&d.mouseReleased()});Ta=function(a){var b=0;if(a.wheelDelta){b=a.wheelDelta/120;if(window.opera)b=-b}else if(a.detail)b=-a.detail/3;(d.mouseScroll=b)&&typeof d.mouseScrolled==="function"&&d.mouseScrolled()};ca(document,"DOMMouseScroll",Ta);ca(document,"mousewheel",Ta);if(typeof q==="string")q=document.getElementById(q);q.getAttribute("tabindex")||q.setAttribute("tabindex",0);t.debug=function(){};if(z){if(z instanceof t.Sketch)aa=z;else if(typeof z==="function")aa=new t.Sketch(z);else throw"PJS compile is not supported";
d.externals.sketch=aa;d.use3DContext=aa.use3DContext;if("mozOpaque"in q)q.mozOpaque=!aa.options.isTransparent;q.onfocus=function(){d.focused=true};q.onblur=function(){d.focused=false};if(aa.options.pauseOnBlur){ca(window,"focus",function(){fb&&d.loop()});ca(window,"blur",function(){if(fb&&Tb){d.noLoop();fb=true}})}Ta=aa.options.globalKeyEvents?window:q;ca(Ta,"keydown",function(a){d.keyCode=a.keyCode;d.__keyPressed=true;d.key=qc(a.keyCode,a.shiftKey);if(d.key!==h.CODED)d.key=Mb(a.keyCode,a.shiftKey);
rc(a,"keydown")});ca(Ta,"keypress",function(a){rc(a,"keypress")});ca(Ta,"keyup",function(a){d.keyCode=a.keyCode;d.__keyPressed=false;d.key=qc(a.keyCode,a.shiftKey);if(d.key!==h.CODED)d.key=Mb(a.keyCode,a.shiftKey);rc(a,"keyup")});if(!aa.use3DContext){i=q.getContext("2d");d.externals.context=i;U=new Pa;i.translate(0.5,0.5);i.lineCap="round";d.stroke(0);d.fill(255);d.noSmooth();d.disableContextMenu()}for(var Fb in t.lib)if(t.lib.hasOwnProperty(Fb))if(t.lib[Fb].hasOwnProperty("attach"))t.lib[Fb].attach(d);
else t.lib[Fb]instanceof Function&&t.lib[Fb].call(this);var Kd=function(a){if(!a.use3DContext){a.size(100,100);a.background(204,204,204)}},Ad=function(a){if(!aa.imageCache.pending&&aa.fonts.pending()){Kd(a);aa.attach(a,bb);if(a.setup){a.setup();aa.use3DContext||i.setTransform(1,0,0,1,0,0)}Ja();if(a.draw)fb?a.loop():a.redraw()}else window.setTimeout(function(){Ad(a)},10)};if(this.externals.canvas.id===v||!this.externals.canvas.id.length)this.externals.canvas.id="__processing"+ha.instances.length;ic[this.externals.canvas.id]=
ha.instances.length;ha.instances.push(this);Ad(d)}else{aa=new t.Sketch;aa.options.isTransparent=true}};ha.prototype=bb;mc=function(){var t={};if(typeof tinylog!=="undefined"&&typeof tinylog.log==="function")t.log=tinylog.log;else if(typeof document!=="undefined"&&!document.fake)(function(){var q=document,z={zIndex:1E4,position:"fixed",bottom:"0px",width:"100%",height:"15%",fontFamily:"sans-serif",color:"#ccc",backgroundColor:"black"},A={position:"relative",fontFamily:"monospace",overflow:"auto",height:"100%",
paddingTop:"5px"},I={height:"5px",marginTop:"-5px",cursor:"n-resize",backgroundColor:"darkgrey"},u={position:"absolute",top:"5px",right:"20px",color:"#111",MozBorderRadius:"4px",webkitBorderRadius:"4px",borderRadius:"4px",cursor:"pointer",fontWeight:"normal",textAlign:"center",padding:"3px 5px",backgroundColor:"#333",fontSize:"12px"},P={minHeight:"16px"},y={fontSize:"12px",margin:"0 8px 0 8px",maxWidth:"100%",whiteSpace:"pre-wrap",overflow:"auto"},X=q.defaultView,Z=q.documentElement,B=Z.style,F=function(){for(var M=
arguments.length,T,ea,W;M--;){ea=arguments[M--];T=arguments[M].style;for(W in ea)if(ea.hasOwnProperty(W))T[W]=ea[W]}},G=function(M,T,ea){if(M.addEventListener)M.addEventListener(T,ea,false);else M.attachEvent&&M.attachEvent("on"+T,ea);return[M,T,ea]},H=function(M,T,ea){if(M.removeEventListener)M.removeEventListener(T,ea,false);else M.detachEvent&&M.detachEvent("on"+T,ea)},S=function(M){for(var T=M.childNodes,ea=T.length;ea--;)M.removeChild(T.item(0))},Y=function(M,T){return M.appendChild(T)},ra=t.log=
function(M){var T,ea=B.paddingBottom,W=q.createElement("div"),ma=W.style,Ya=Y(W,q.createElement("div")),ka=Y(W,q.createElement("div")),Ja=Y(W,q.createElement("div")),cb=false,Ra=false,ob=false,db=0,pb=function(ga){var Ka=X.innerHeight,Za=Ya.clientHeight;if(ga<0)ga=0;else if(ga+Za>Ka)ga=Ka-Za;ma.height=ga/Ka*100+"%";B.paddingBottom=W.clientHeight+"px"},zb=[G(q,"mousemove",function(ga){if(cb){pb(X.innerHeight-ga.clientY);ka.scrollTop=ob}}),G(q,"mouseup",function(){if(cb)cb=ob=false}),G(Ya,"dblclick",
function(ga){ga.preventDefault();if(Ra){pb(Ra);Ra=false}else{Ra=W.clientHeight;ma.height="0px"}}),G(Ya,"mousedown",function(ga){ga.preventDefault();cb=true;ob=ka.scrollTop}),G(Ya,"contextmenu",function(){cb=false}),G(Ja,"click",function(){T()})];T=function(){for(var ga=zb.length;ga--;)H.apply(t,zb[ga]);Z.removeChild(W);B.paddingBottom=ea;S(ka);S(W);t.log=ra};F(W,z,ka,A,Ya,I,Ja,u);Ja.title="Close Log";Y(Ja,q.createTextNode("\u2716"));Ya.title="Double-click to toggle log minimization";Z.insertBefore(W,
Z.firstChild);t.log=function(ga){if(db===512)ka.removeChild(ka.firstChild);else db++;var Ka=Y(ka,q.createElement("div")),Za=Y(Ka,q.createElement("div"));Ka.title=(new Date).toLocaleTimeString();F(Ka,P,Za,y);Y(Za,q.createTextNode(ga));ka.scrollTop=ka.scrollHeight};t.log(M)}})();else if(typeof print==="function")t.log=print;return t}();ha.logger=mc;ha.version="@VERSION@";ha.lib={};ha.registerLibrary=function(t,q){ha.lib[t]=q;q.hasOwnProperty("init")&&q.init(bb)};ha.instances=[];var ic={};ha.getInstanceById=
function(t){return ha.instances[ic[t]]};ha.Sketch=function(t){this.attachFunction=t;this.use3DContext=false;this.options={isTransparent:false,crispLines:false,pauseOnBlur:false,globalKeyEvents:false};this.imageCache={pending:0,images:{},add:function(q){if(Hb){var z=new Image;z.onload=function(A){return function(){A.pending--}}(this);this.pending++;this.images[q]=z;z.src=q}else this.images[q]=null}};this.fonts={template:function(){if(!Hb)return null;var q=document.createElement("p");q.style.fontFamily=
"serif";q.style.fontSize="72px";q.style.visibility="hidden";q.innerHTML="abcmmmmmmmmmmlll";document.getElementsByTagName("body")[0].appendChild(q);return q}(),attempt:0,pending:function(){for(var q=true,z=0;z<this.fontList.length;z++)if(this.fontList[z].offsetWidth===this.template.offsetWidth&&this.fontList[z].offsetHeight===this.template.offsetHeight){q=false;this.attempt++}else{document.getElementsByTagName("body")[0].removeChild(this.fontList[z]);this.fontList.splice(z--,1);this.attempt=0}if(this.attempt>=
30){q=true;for(z=0;z<this.fontList.length;z++){document.getElementsByTagName("body")[0].removeChild(this.fontList[z]);this.fontList.splice(z--,1)}}q&&document.getElementsByTagName("body")[0].removeChild(this.template);return q},fontList:[],fontFamily:"",style:Hb?document.createElement("style"):null,add:function(q){var z=typeof q==="object"?q.fontFace:q;this.fontFamily+="@font-face{\n  font-family: '"+z+"';\n  src:  url('"+(typeof q==="object"?q.url:q)+"');\n}\n";this.style.innerHTML=this.fontFamily;
document.getElementsByTagName("head")[0].appendChild(this.style);q=document.createElement("p");q.style.fontFamily="'"+z+"', serif";q.style.fontSize="72px";q.style.visibility="hidden";q.innerHTML="abcmmmmmmmmmmlll";document.getElementsByTagName("body")[0].appendChild(q);this.fontList.push(q)}};this.sourceCode=undefined;this.attach=function(q){if(typeof this.attachFunction==="function")this.attachFunction(q);else if(this.sourceCode){var z=eval(this.sourceCode);z(q);this.attachFunction=z}else throw"Unable to attach sketch to the processing instance";
}};var Ld=function(){function t(P,y){function X(Y,ra){var M=new XMLHttpRequest;M.onreadystatechange=function(){if(M.readyState===4){var T;if(M.status!==200&&M.status!==0)T="Invalid XHR status "+M.status;else if(M.responseText==="")T="No content";ra(M.responseText,T)}};M.open("GET",Y,true);M.overrideMimeType&&M.overrideMimeType("application/json");M.setRequestHeader("If-Modified-Since","Fri, 01 Jan 1960 00:00:00 GMT");M.send(null)}function Z(Y,ra){X(ra,function(M,T){B[Y]=M;++H;T&&F.push("  "+ra+" ==> "+
T);if(H===G)if(F.length===0)try{return new ha(P,B.join("\n"))}catch(ea){ha.logger.log("Unable to execute pjs sketch: "+ea)}else ha.logger.log("Unable to load pjs sketch files:\n"+F.join("\n"))})}for(var B=[],F=[],G=y.length,H=0,S=0;S<G;++S)Z(S,y[S])}for(var q=document.getElementsByTagName("canvas"),z=0,A=q.length;z<A;z++){var I=q[z].getAttribute("data-processing-sources");if(I===null){I=q[z].getAttribute("data-src");if(I===null)I=q[z].getAttribute("datasrc")}if(I){I=I.split(" ");for(var u=0;u<I.length;)if(I[u])u++;
else I.splice(u,1);t(q[z],I)}}};if(Hb){window.Processing=ha;document.addEventListener("DOMContentLoaded",function(){Ld()},false)}else this.Processing=ha})();
